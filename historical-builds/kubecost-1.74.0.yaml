---
# Source: cost-analyzer/charts/grafana/templates/podsecuritypolicy.yaml
apiVersion: policy/v1beta1
kind: PodSecurityPolicy
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    heritage: Helm
    release: kubecost
  annotations:
    seccomp.security.alpha.kubernetes.io/allowedProfileNames: 'docker/default'
    seccomp.security.alpha.kubernetes.io/defaultProfileName:  'docker/default'
    apparmor.security.beta.kubernetes.io/allowedProfileNames: 'runtime/default'
    apparmor.security.beta.kubernetes.io/defaultProfileName:  'runtime/default'
    
spec:
  privileged: false
  allowPrivilegeEscalation: false
  requiredDropCapabilities:
    - ALL
  volumes:
    - 'configMap'
    - 'emptyDir'
    - 'projected'
    - 'secret'
    - 'downwardAPI'
    - 'persistentVolumeClaim'
  hostNetwork: false
  hostIPC: false
  hostPID: false
  runAsUser:
    rule: 'RunAsAny'
  seLinux:
    rule: 'RunAsAny'
  supplementalGroups:
    rule: 'RunAsAny'
  fsGroup:
    rule: 'RunAsAny'
  readOnlyRootFilesystem: false
---
# Source: cost-analyzer/templates/cost-analyzer-psp.template.yaml
apiVersion: policy/v1beta1
kind: PodSecurityPolicy
metadata:
    name: kubecost-cost-analyzer-psp
spec:
    privileged: false
    seLinux:
        rule: RunAsAny
    supplementalGroups:
        rule: RunAsAny
    runAsUser:
        rule: RunAsAny
    fsGroup:
        rule: RunAsAny
    volumes:
        - '*'
---
# Source: cost-analyzer/charts/grafana/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: grafana
    chart: grafana-1.17.2
    heritage: Helm
    release: kubecost
  name: kubecost-grafana
---
# Source: cost-analyzer/charts/prometheus/charts/kube-state-metrics/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: kube-state-metrics-2.7.2
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: kubecost
  name: kubecost-kube-state-metrics
  namespace: kubecost
imagePullSecrets:
  []
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
---
# Source: cost-analyzer/charts/prometheus/templates/node-exporter-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    component: "node-exporter"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-node-exporter
---
# Source: cost-analyzer/charts/prometheus/templates/server-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
---
# Source: cost-analyzer/templates/cost-analyzer-service-account-template.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
---
# Source: cost-analyzer/charts/grafana/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
type: Opaque
data:
  admin-user: "YWRtaW4="
  admin-password: "c3Ryb25ncGFzc3dvcmQ="
  ldap-toml: ""
---
# Source: cost-analyzer/charts/grafana/templates/configmap-dashboard-provider.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
  name: kubecost-grafana-config-dashboards
data:
  provider.yaml: |-
    apiVersion: 1
    providers:
    - name: 'default'
      orgId: 1
      folder: ''
      type: file
      disableDeletion: false
      options:
        path: /tmp/dashboards
---
# Source: cost-analyzer/charts/grafana/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
data:
  grafana.ini: |
    [analytics]
    check_for_updates = true
    [auth.anonymous]
    enabled = true
    org_name = Main Org.
    org_role = Editor
    [grafana_net]
    url = https://grafana.net
    [log]
    mode = console
    [paths]
    data = /var/lib/grafana/data
    logs = /var/log/grafana
    plugins = /var/lib/grafana/plugins
    provisioning = /etc/grafana/provisioning
    [server]
    root_url = %(protocol)s://%(domain)s:%(http_port)s/grafana
    - access: proxy
      isDefault: true
      name: Prometheus
      type: prometheus
      url: http://kubecost-prometheus-server.kubecost.svc
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
data:
  alertmanager.yml: |
    global: {}
    receivers:
    - name: default-receiver
    route:
      group_interval: 5m
      group_wait: 10s
      receiver: default-receiver
      repeat_interval: 3h
---
# Source: cost-analyzer/charts/prometheus/templates/server-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
data:
  alerting_rules.yml: |
    {}
  alerts: |
    {}
  prometheus.yml: |
    global:
      evaluation_interval: 1m
      external_labels:
        cluster_id: cluster-one
      scrape_interval: 1m
      scrape_timeout: 10s
    rule_files:
    - /etc/config/recording_rules.yml
    - /etc/config/alerting_rules.yml
    - /etc/config/rules
    - /etc/config/alerts
    scrape_configs:
    - job_name: prometheus
      static_configs:
      - targets:
        - localhost:9090
    - bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
      job_name: kubernetes-nodes-cadvisor
      kubernetes_sd_configs:
      - role: node
      metric_relabel_configs:
      - action: keep
        regex: (container_cpu_usage_seconds_total|container_memory_working_set_bytes|container_network_receive_errors_total|container_network_transmit_errors_total|container_network_receive_packets_dropped_total|container_network_transmit_packets_dropped_total|container_memory_usage_bytes|container_cpu_cfs_throttled_periods_total|container_cpu_cfs_periods_total|container_fs_usage_bytes|container_fs_limit_bytes|container_cpu_cfs_periods_total|container_fs_inodes_free|container_fs_inodes_total|container_fs_usage_bytes|container_fs_limit_bytes|container_cpu_cfs_throttled_periods_total|container_cpu_cfs_periods_total|container_network_receive_bytes_total|container_network_transmit_bytes_total|container_fs_inodes_free|container_fs_inodes_total|container_fs_usage_bytes|container_fs_limit_bytes|container_spec_cpu_shares|container_spec_memory_limit_bytes|container_network_receive_bytes_total|container_network_transmit_bytes_total|container_fs_reads_bytes_total|container_network_receive_bytes_total|container_fs_writes_bytes_total|container_fs_reads_bytes_total|cadvisor_version_info)
        source_labels:
        - __name__
      - action: replace
        regex: (.+)
        source_labels:
        - container
        target_label: container_name
      - action: replace
        regex: (.+)
        source_labels:
        - pod
        target_label: pod_name
      relabel_configs:
      - action: labelmap
        regex: __meta_kubernetes_node_label_(.+)
      - replacement: kubernetes.default.svc:443
        target_label: __address__
      - regex: (.+)
        replacement: /api/v1/nodes/$1/proxy/metrics/cadvisor
        source_labels:
        - __meta_kubernetes_node_name
        target_label: __metrics_path__
      scheme: https
      tls_config:
        ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
        insecure_skip_verify: true
    - job_name: kubernetes-service-endpoints
      kubernetes_sd_configs:
      - role: endpoints
      metric_relabel_configs:
      - action: keep
        regex: (container_cpu_allocation|container_cpu_usage_seconds_total|container_fs_limit_bytes|container_memory_allocation_bytes|container_memory_usage_bytes|container_memory_working_set_bytes|container_network_receive_bytes_total|container_network_transmit_bytes_total|deployment_match_labels|kube_deployment_spec_replicas|kube_deployment_status_replicas_available|kube_job_status_failed|kube_namespace_annotations|kube_namespace_labels|kube_node_info|kube_node_labels|kube_node_status_capacity_cpu_cores|kube_node_status_capacity_memory_bytes|kube_node_status_condition|kube_persistentvolume_capacity_bytes|kube_persistentvolume_status_phase|kube_persistentvolumeclaim_info|kube_persistentvolumeclaim_resource_requests_storage_bytes|kube_persistentvolumeclaim_resource_requests_storage_bytes|container_memory_allocation_bytes|kube_pod_container_resource_limits_cpu_cores|kube_pod_container_resource_limits_memory_bytes|kube_pod_container_resource_requests_cpu_cores|kube_pod_container_resource_requests_cpu_cores|container_cpu_usage_seconds_total|kube_pod_container_resource_requests_memory_bytes|kube_pod_container_resource_requests_memory_bytes|kube_node_status_capacity_memory_bytes|kube_pod_container_resource_requests|kube_pod_container_status_restarts_total|kube_pod_container_status_running|kube_pod_container_status_terminated_reason|kube_pod_labels|kube_pod_owner|kube_pod_status_phase|kubecost_cluster_memory_working_set_bytes|kubecost_pod_network_egress_bytes_total|node_cpu_hourly_cost|node_cpu_seconds_total|node_disk_reads_completed|node_disk_reads_completed_total|node_disk_writes_completed|node_disk_writes_completed_total|node_filesystem_device_error|node_gpu_hourly_cost|node_memory_Buffers_bytes|node_memory_Cached_bytes|node_memory_MemAvailable_bytes|node_memory_MemFree_bytes|node_memory_MemTotal_bytes|node_network_transmit_bytes_total|node_ram_hourly_cost|pod_pvc_allocation|pv_hourly_cost|service_selector_labels|statefulSet_match_labels|up|kube_node_status_allocatable_cpu_cores|kube_node_status_allocatable_memory_bytes|container_fs_writes_bytes_total|kube_deployment_status_replicas|kube_statefulset_replicas|kube_daemonset_status_desired_number_scheduled|kube_deployment_status_replicas_available|kube_statefulset_status_replicas|kube_daemonset_status_number_ready|kube_deployment_status_replicas|kube_statefulset_replicas|kube_daemonset_status_desired_number_scheduled|kube_replicaset_owner|kube_pod_container_info)
        source_labels:
        - __name__
      relabel_configs:
      - action: keep
        regex: true
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_scrape
      - action: replace
        regex: (https?)
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_scheme
        target_label: __scheme__
      - action: replace
        regex: (.+)
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_path
        target_label: __metrics_path__
      - action: replace
        regex: ([^:]+)(?::\d+)?;(\d+)
        replacement: $1:$2
        source_labels:
        - __address__
        - __meta_kubernetes_service_annotation_prometheus_io_port
        target_label: __address__
      - action: labelmap
        regex: __meta_kubernetes_service_label_(.+)
      - action: replace
        source_labels:
        - __meta_kubernetes_namespace
        target_label: kubernetes_namespace
      - action: replace
        source_labels:
        - __meta_kubernetes_service_name
        target_label: kubernetes_name
      - action: replace
        source_labels:
        - __meta_kubernetes_pod_node_name
        target_label: kubernetes_node
    - job_name: kubernetes-service-endpoints-slow
      kubernetes_sd_configs:
      - role: endpoints
      relabel_configs:
      - action: keep
        regex: true
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_scrape_slow
      - action: replace
        regex: (https?)
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_scheme
        target_label: __scheme__
      - action: replace
        regex: (.+)
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_path
        target_label: __metrics_path__
      - action: replace
        regex: ([^:]+)(?::\d+)?;(\d+)
        replacement: $1:$2
        source_labels:
        - __address__
        - __meta_kubernetes_service_annotation_prometheus_io_port
        target_label: __address__
      - action: labelmap
        regex: __meta_kubernetes_service_label_(.+)
      - action: replace
        source_labels:
        - __meta_kubernetes_namespace
        target_label: kubernetes_namespace
      - action: replace
        source_labels:
        - __meta_kubernetes_service_name
        target_label: kubernetes_name
      - action: replace
        source_labels:
        - __meta_kubernetes_pod_node_name
        target_label: kubernetes_node
      scrape_interval: 5m
      scrape_timeout: 30s
    - honor_labels: true
      job_name: prometheus-pushgateway
      kubernetes_sd_configs:
      - role: service
      relabel_configs:
      - action: keep
        regex: pushgateway
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_probe
    - job_name: kubernetes-services
      kubernetes_sd_configs:
      - role: service
      metrics_path: /probe
      params:
        module:
        - http_2xx
      relabel_configs:
      - action: keep
        regex: true
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_probe
      - source_labels:
        - __address__
        target_label: __param_target
      - replacement: blackbox
        target_label: __address__
      - source_labels:
        - __param_target
        target_label: instance
      - action: labelmap
        regex: __meta_kubernetes_service_label_(.+)
      - source_labels:
        - __meta_kubernetes_namespace
        target_label: kubernetes_namespace
      - source_labels:
        - __meta_kubernetes_service_name
        target_label: kubernetes_name
    - job_name: kubecost
      honor_labels: true
      scrape_interval: 1m
      scrape_timeout: 10s
      metrics_path: /metrics
      scheme: http
      dns_sd_configs:
      - names:
        - kubecost-cost-analyzer
        type: 'A'
        port: 9003
    - job_name: kubecost-networking
      kubernetes_sd_configs:
        - role: pod
      relabel_configs:
      # Scrape only the the targets matching the following metadata
        - source_labels: [__meta_kubernetes_pod_label_app]
          action: keep
          regex:  kubecost-network-costs
    
    alerting:
      alertmanagers:
      - kubernetes_sd_configs:
          - role: pod
        tls_config:
          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
        relabel_configs:
        - source_labels: [__meta_kubernetes_namespace]
          regex: kubecost
          action: keep
        - source_labels: [__meta_kubernetes_pod_label_app]
          regex: prometheus
          action: keep
        - source_labels: [__meta_kubernetes_pod_label_component]
          regex: alertmanager
          action: keep
        - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_probe]
          regex: .*
          action: keep
        - source_labels: [__meta_kubernetes_pod_container_port_number]
          regex:
          action: drop
  recording_rules.yml: |
    {}
  rules: |
    groups:
    - name: CPU
      rules:
      - expr: sum(rate(container_cpu_usage_seconds_total{container_name!=""}[5m]))
        record: cluster:cpu_usage:rate5m
      - expr: rate(container_cpu_usage_seconds_total{container_name!=""}[5m])
        record: cluster:cpu_usage_nosum:rate5m
      - expr: avg(irate(container_cpu_usage_seconds_total{container_name!="POD", container_name!=""}[5m]))
          by (container_name,pod_name,namespace)
        record: kubecost_container_cpu_usage_irate
      - expr: sum(container_memory_working_set_bytes{container_name!="POD",container_name!=""})
          by (container_name,pod_name,namespace)
        record: kubecost_container_memory_working_set_bytes
      - expr: sum(container_memory_working_set_bytes{container_name!="POD",container_name!=""})
        record: kubecost_cluster_memory_working_set_bytes
    - name: Savings
      rules:
      - expr: sum(avg(kube_pod_owner{owner_kind!="DaemonSet"}) by (pod) * sum(container_cpu_allocation)
          by (pod))
        labels:
          daemonset: "false"
        record: kubecost_savings_cpu_allocation
      - expr: sum(avg(kube_pod_owner{owner_kind="DaemonSet"}) by (pod) * sum(container_cpu_allocation)
          by (pod)) / sum(kube_node_info)
        labels:
          daemonset: "true"
        record: kubecost_savings_cpu_allocation
      - expr: sum(avg(kube_pod_owner{owner_kind!="DaemonSet"}) by (pod) * sum(container_memory_allocation_bytes)
          by (pod))
        labels:
          daemonset: "false"
        record: kubecost_savings_memory_allocation_bytes
      - expr: sum(avg(kube_pod_owner{owner_kind="DaemonSet"}) by (pod) * sum(container_memory_allocation_bytes)
          by (pod)) / sum(kube_node_info)
        labels:
          daemonset: "true"
        record: kubecost_savings_memory_allocation_bytes
      - expr: label_replace(sum(kube_pod_status_phase{phase="Running",namespace!="kube-system"}
          > 0) by (pod, namespace), "pod_name", "$1", "pod", "(.+)")
        record: kubecost_savings_running_pods
      - expr: sum(rate(container_cpu_usage_seconds_total{container_name!="",container_name!="POD",instance!=""}[5m]))
          by (namespace, pod_name, container_name, instance)
        record: kubecost_savings_container_cpu_usage_seconds
      - expr: sum(container_memory_working_set_bytes{container_name!="",container_name!="POD",instance!=""})
          by (namespace, pod_name, container_name, instance)
        record: kubecost_savings_container_memory_usage_bytes
      - expr: avg(sum(kube_pod_container_resource_requests_cpu_cores{namespace!="kube-system"})
          by (pod, namespace, instance)) by (pod, namespace)
        record: kubecost_savings_pod_requests_cpu_cores
      - expr: avg(sum(kube_pod_container_resource_requests_memory_bytes{namespace!="kube-system"})
          by (pod, namespace, instance)) by (pod, namespace)
        record: kubecost_savings_pod_requests_memory_bytes
---
# Source: cost-analyzer/templates/cost-analyzer-alerts-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: alert-configs
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
data:
  alerts.json: '{"alerts":[{"aggregation":"namespace","filter":"kubecost","ownerContact":["owner@example.com","owner2@example.com"],"slackWebhookUrl":"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX","threshold":50,"type":"budget","window":"daily"},{"aggregation":"cluster","filter":"cluster-one","threshold":200.8,"type":"budget","window":"daily"},{"aggregation":"namespace","filter":"*","type":"recurringUpdate","window":"weekly"},{"aggregation":"namespace","filter":"kubecost","type":"recurringUpdate","window":"weekly"},{"aggregation":"namespace","baselineWindow":"30d","filter":"kubecost, default","relativeThreshold":0.2,"type":"spendChange","window":"1d"}],"enabled":false,"frontendUrl":"http://localhost:9090","globalAlertEmails":["recipient@example.com","additionalRecipient@example.com"],"globalSlackWebhookUrl":"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX","kubecostHealth":false}'
---
# Source: cost-analyzer/templates/cost-analyzer-config-map-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
data:
    prometheus-alertmanager-endpoint: http://kubecost-prometheus-alertmanager.kubecost
    prometheus-server-endpoint: http://kubecost-prometheus-server.kubecost
    kubecost-token: not-applied
---
# Source: cost-analyzer/templates/cost-analyzer-frontend-config-map-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-conf
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
data:
  nginx.conf: |
    gzip_static  on;

    # Enable gzip encoding for content of the provided types of 50kb and higher.
    gzip on;
    gzip_min_length 50000; 
    gzip_proxied expired no-cache no-store private auth;
    gzip_types 
        application/atom+xml
        application/geo+json
        application/javascript
        application/x-javascript
        application/json
        application/ld+json
        application/manifest+json
        application/rdf+xml
        application/rss+xml
        application/vnd.ms-fontobject
        application/wasm
        application/x-web-app-manifest+json
        application/xhtml+xml
        application/xml
        font/eot
        font/otf
        font/ttf
        image/bmp
        image/svg+xml
        text/cache-manifest
        text/calendar
        text/css
        text/javascript
        text/markdown
        text/plain
        text/xml
        text/x-component
        text/x-cross-domain-policy;

    upstream api {
        server kubecost-cost-analyzer.kubecost:9001;
    }

    upstream model {
        server kubecost-cost-analyzer.kubecost:9003;
    }
    upstream grafana {
        server kubecost-grafana.kubecost;

    }


    server {
        server_name _;
        root /var/www;
        index index.html;
        add_header Cache-Control "max-age=300";
        add_header Cache-Control "must-revalidate";
        add_header ETag "1.74.0";
        listen 9090;
        location /api/ {
            proxy_pass http://api/;
            proxy_redirect off;
            proxy_http_version 1.1;
            proxy_set_header Connection "";
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        location /model/ {
            proxy_connect_timeout       180;
            proxy_send_timeout          180;
            proxy_read_timeout          180;
            proxy_pass http://model/;
            proxy_redirect off;
            proxy_http_version 1.1;
            proxy_set_header Connection "";
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        
        location ~ ^/(turndown|cluster)/ {

            add_header 'Access-Control-Allow-Origin' '*' always;
            return 404;
        }
        location /saml/ {
            proxy_connect_timeout       180;
            proxy_send_timeout          180;
            proxy_read_timeout          180;
            proxy_pass http://model/saml/;
            proxy_redirect off;
            proxy_http_version 1.1;
            proxy_set_header Connection "";
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        location /login {
            proxy_connect_timeout       180;
            proxy_send_timeout          180;
            proxy_read_timeout          180;
            proxy_pass http://model/login;
            proxy_redirect off;
            proxy_http_version 1.1;
            proxy_set_header Connection "";
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        location /grafana/ {
            proxy_pass http://grafana/;
            proxy_redirect off;
            proxy_http_version 1.1;
            proxy_set_header Connection "";
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        }
    
    }
---
# Source: cost-analyzer/templates/grafana-attached-disk-metrics-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: attached-disk-metrics-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    attached-disks.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "id": 10,
          "iteration": 1589748792557,
          "links": [],
          "panels": [
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 0,
                "y": 0
              },
              "id": 2,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(container_fs_limit_bytes{instance=~'$disk', device!=\"tmpfs\", id=\"/\"}) by (instance)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Disk Size",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "decbytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 12,
                "y": 0
              },
              "id": 4,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(container_fs_usage_bytes{instance=~'$disk',id=\"/\"}) by (instance) / sum(container_fs_limit_bytes{instance=~'$disk',device!=\"tmpfs\", id=\"/\"}) by (instance)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Disk Utilization",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "decimals": 1,
                  "format": "percentunit",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 0,
                "y": 9
              },
              "id": 5,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "1 - sum(container_fs_inodes_free{instance=~'$disk',id=\"/\"}) by (instance) / sum(container_fs_inodes_total{instance=~'$disk',id=\"/\"}) by (instance)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "iNode Utilization",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "decimals": 1,
                  "format": "percentunit",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 12,
                "y": 9
              },
              "id": 3,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(container_fs_usage_bytes{instance=~'$disk',id=\"/\"}) by (instance)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Disk Usage",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "decbytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "schemaVersion": 16,
          "style": "dark",
          "tags": [
            "cost",
            "utilization",
            "metrics"
          ],
          "templating": {
            "list": [
              {
                "allValue": null,
                "current": {
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "disk",
                "options": [],
                "query": "query_result(sum(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance))",
                "refresh": 1,
                "regex": "/instance=\\\"(.*?)(\\\")/",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-7d",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "",
          "title": "Attached disk metrics",
          "uid": "nBH7qBgMk",
          "version": 2
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-cluster-metrics-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-metrics-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    cluster-metrics.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "description": "Cost metrics from the Kubecost product",
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "id": 7,
          "iteration": 1558062099204,
          "links": [],
          "panels": [
            {
              "content": "Note: this dashboard requires Kubecost metrics to be available in your Prometheus deployment. [Learn more](https://github.com/kubecost/cost-model/blob/master/PROMETHEUS.md)",
              "gridPos": {
                "h": 2,
                "w": 24,
                "x": 0,
                "y": 0
              },
              "id": 27,
              "links": [],
              "mode": "markdown",
              "title": "",
              "transparent": true,
              "type": "text"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Monthly run rate of CPU + GPU costs based on currently provisioned resources.",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 6,
                "x": 0,
                "y": 2
              },
              "hideTimeOverride": true,
              "id": 2,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": true,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100) +\n  avg(node_gpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n)",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "CPU Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Monthly run rate of memory costs based on currently provisioned expenses.",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 6,
                "x": 6,
                "y": 2
              },
              "hideTimeOverride": true,
              "id": 3,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n)",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Memory Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Monthly run rate of attached storage and PV costs based on currently provisioned resources.",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 6,
                "x": 12,
                "y": 2
              },
              "hideTimeOverride": true,
              "id": 4,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(avg(pv_hourly_cost) by (persistentvolume) * 730 * avg(kube_persistentvolume_capacity_bytes) by (persistentvolume) / 1024 / 1024 / 1024) \n+\nsum(sum(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance) / 1024 / 1024 / 1024) * $localStorageGBCost",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Storage Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Sum of compute, memory, storage and network costs.",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 7,
                "w": 6,
                "x": 18,
                "y": 2
              },
              "hideTimeOverride": true,
              "id": 11,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "# Compute\nsum(\n  avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100) +\n  avg(node_gpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n) +\n\n\n# Memory\nsum(\n  avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n) +\n\n# Storage \n\nsum(avg(pv_hourly_cost) by (persistentvolume) * 730 * avg(kube_persistentvolume_capacity_bytes) by (persistentvolume) / 1024 / 1024 / 1024) \n+\nsum(sum(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance) / 1024 / 1024 / 1024) * $localStorageGBCost",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Total Cost",
              "type": "singlestat",
              "valueFontSize": "120%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(50, 172, 45, 0.97)",
                "#c15c17"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Current CPU use from applications divided by allocatable CPUs",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 0,
                "y": 5
              },
              "height": "180px",
              "hideTimeOverride": true,
              "id": 13,
              "interval": null,
              "isNew": true,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "(\n sum(\n   count(irate(container_cpu_usage_seconds_total{id=\"/\"}[10m])) by (instance)\n   * on (instance) \n   sum(irate(container_cpu_usage_seconds_total{id=\"/\"}[10m])) by (instance)\n ) \n / \n (sum (kube_node_status_allocatable_cpu_cores))\n) * 100",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": "30, 80",
              "timeFrom": "",
              "title": "CPU Utilization",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(50, 172, 45, 0.97)",
                "#c15c17"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Current CPU reservation requests from applications vs allocatable CPU",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 3,
                "y": 5
              },
              "height": "180px",
              "id": 15,
              "interval": null,
              "isNew": true,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "SUM(kube_pod_container_resource_requests_cpu_cores) / SUM(kube_node_status_allocatable_cpu_cores) * 100",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": "30, 80",
              "title": "CPU Requests",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(50, 172, 45, 0.97)",
                "#c15c17"
              ],
              "datasource": "default-kubecost",
              "description": "Current RAM use vs RAM available",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 6,
                "y": 5
              },
              "height": "180px",
              "hideTimeOverride": true,
              "id": 17,
              "interval": null,
              "isNew": true,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "SUM(container_memory_usage_bytes{namespace!=\"\"}) / SUM(kube_node_status_allocatable_memory_bytes) * 100",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "B"
                }
              ],
              "thresholds": "30,80",
              "timeFrom": "",
              "title": "RAM Utilization",
              "transparent": false,
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(50, 172, 45, 0.97)",
                "#c15c17"
              ],
              "datasource": "default-kubecost",
              "description": "Current RAM requests vs RAM available",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 9,
                "y": 5
              },
              "height": "180px",
              "id": 19,
              "interval": null,
              "isNew": true,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\"})\n /\n sum(kube_node_status_allocatable_memory_bytes)\n) * 100",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": "30,80",
              "title": "RAM Requests",
              "transparent": false,
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(50, 172, 45, 0.97)",
                "#c15c17"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "This gauge shows the current standard storage use, including cluster storage, vs storage available",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 6,
                "x": 12,
                "y": 5
              },
              "height": "180px",
              "hideTimeOverride": true,
              "id": 21,
              "interval": null,
              "isNew": true,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (\n sum(kube_persistentvolumeclaim_info) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kubelet_volume_stats_used_bytes) by (persistentvolumeclaim, namespace) or up * 0\n + sum(container_fs_usage_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"})\n) /\nsum (\n sum(kube_persistentvolumeclaim_info) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n + sum(container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"})\n) * 100",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": "30, 80",
              "timeFrom": "",
              "title": "Storage Utilization",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "Monthly run rate of CPU + GPU costs",
              "fill": 1,
              "gridPos": {
                "h": 7,
                "w": 6,
                "x": 0,
                "y": 9
              },
              "id": 6,
              "interval": "1m",
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost) by (node) * 730 +\n  avg(node_gpu_hourly_cost) by (node) * 730\n)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "compute cost",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Compute Cost",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "currencyUSD",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "Monthly run rate of memory costs",
              "fill": 1,
              "gridPos": {
                "h": 7,
                "w": 6,
                "x": 6,
                "y": 9
              },
              "id": 9,
              "interval": "1m",
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730\n)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "memory cost",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Memory Cost",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "currencyUSD",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "Monthly run rate of attached disk + PV storage costs",
              "fill": 1,
              "gridPos": {
                "h": 7,
                "w": 6,
                "x": 12,
                "y": 9
              },
              "id": 10,
              "interval": "1m",
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n  avg(avg_over_time(pv_hourly_cost[$timeRange] offset 1m)) by (persistentvolume) * 730 \n  * avg(avg_over_time(kube_persistentvolume_capacity_bytes[$timeRange] offset 1m)) by (persistentvolume) / 1024 / 1024 / 1024\n) +\nsum(avg(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance) / 1024 / 1024 / 1024) * $localStorageGBCost",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "storage cost",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Storage Cost",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "Sum of compute, memory, and storage costs",
              "fill": 1,
              "gridPos": {
                "h": 7,
                "w": 6,
                "x": 18,
                "y": 9
              },
              "id": 22,
              "interval": "1m",
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "# Compute\nsum(\n  avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100) +\n  avg(node_gpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n) +\n\n\n# Memory\nsum(\n  avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n) +\n\n# Storage \n\nsum(avg(pv_hourly_cost) by (persistentvolume) * 730 * avg(kube_persistentvolume_capacity_bytes) by (persistentvolume) / 1024 / 1024 / 1024) \n+\nsum(sum(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance) / 1024 / 1024 / 1024) * $localStorageGBCost",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "total cost",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Total Cost",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "columns": [],
              "datasource": "default-kubecost",
              "description": "Cost of by resource class of currently provisioned nodes",
              "fontSize": "100%",
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 0,
                "y": 16
              },
              "id": 8,
              "links": [],
              "pageSize": null,
              "scroll": true,
              "showHeader": true,
              "sort": {
                "col": 4,
                "desc": false
              },
              "styles": [
                {
                  "alias": "",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Time",
                  "thresholds": [],
                  "type": "hidden",
                  "unit": "short"
                },
                {
                  "alias": "Compute Cost",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "CPU Cost",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #A",
                  "thresholds": [],
                  "type": "number",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "Mem Cost",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #B",
                  "thresholds": [],
                  "type": "number",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "Total",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #C",
                  "thresholds": [],
                  "type": "number",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "instance",
                  "thresholds": [],
                  "type": "hidden",
                  "unit": "short"
                },
                {
                  "alias": "GPU",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #D",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "decimals": 2,
                  "pattern": "/.*/",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                }
              ],
              "targets": [
                {
                  "expr": "avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost or up * 0) by (node) * 730 * (1-$useDiscount/100)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 1,
                  "legendFormat": "",
                  "refId": "A"
                },
                {
                  "expr": "avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730 * (1-$useDiscount/100)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 1,
                  "legendFormat": "",
                  "refId": "B"
                },
                {
                  "expr": "avg(node_gpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "D"
                },
                {
                  "expr": "# CPU  \navg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost or up * 0) by (node) * 730 * (1-$useDiscount/100) +\n# GPU\navg(node_gpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100) +\n# Memory\navg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "C"
                }
              ],
              "title": "Cost by node",
              "transform": "table",
              "type": "table"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "Monthly run rate of attached disk + PV storage costs based on currently provisioned resources.",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 12,
                "y": 16
              },
              "id": 25,
              "interval": "1m",
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": true,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost) by (node) * 730 +\n  avg(node_gpu_hourly_cost) by (node) * 730\n)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "cpu",
                  "refId": "B"
                },
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730\n)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "memory",
                  "refId": "A"
                },
                {
                  "expr": "sum(\n  avg(avg_over_time(pv_hourly_cost[$timeRange] offset 1m)) by (persistentvolume) * 730 \n  * avg(avg_over_time(kube_persistentvolume_capacity_bytes[$timeRange] offset 1m)) by (persistentvolume) / 1024 / 1024 / 1024\n) +\nsum(avg(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance) / 1024 / 1024 / 1024) * $localStorageGBCost",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "storage",
                  "refId": "C"
                },
                {
                  "expr": "SUM(rate(node_network_transmit_bytes_total{device=\"eth0\"}[60m]) / 1024 / 1024 / 1024 ) * (60 * 60 * 24 * 30) * $percentEgress * $egressCost ",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "network",
                  "refId": "D"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Cost by Resource",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "currencyUSD",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "refresh": false,
          "schemaVersion": 16,
          "style": "dark",
          "tags": [
            "cost",
            "utilization",
            "metrics"
          ],
          "templating": {
            "list": [
              {
                "auto": true,
                "auto_count": 1,
                "auto_min": "1m",
                "current": {
                  "text": "auto",
                  "value": "$__auto_interval_timeRange"
                },
                "hide": 2,
                "label": null,
                "name": "timeRange",
                "options": [
                  {
                    "selected": true,
                    "text": "auto",
                    "value": "$__auto_interval_timeRange"
                  },
                  {
                    "selected": false,
                    "text": "1h",
                    "value": "1h"
                  },
                  {
                    "selected": false,
                    "text": "6h",
                    "value": "6h"
                  },
                  {
                    "selected": false,
                    "text": "12h",
                    "value": "12h"
                  },
                  {
                    "selected": false,
                    "text": "1d",
                    "value": "1d"
                  },
                  {
                    "selected": false,
                    "text": "7d",
                    "value": "7d"
                  },
                  {
                    "selected": false,
                    "text": "14d",
                    "value": "14d"
                  },
                  {
                    "selected": false,
                    "text": "30d",
                    "value": "30d"
                  },
                  {
                    "selected": false,
                    "text": "90d",
                    "value": "90d"
                  }
                ],
                "query": "1h,6h,12h,1d,7d,14d,30d,90d",
                "refresh": 2,
                "skipUrlSync": false,
                "type": "interval"
              },
              {
                "current": {
                  "text": ".04",
                  "value": ".04"
                },
                "hide": 2,
                "label": "Cost per Gb hour for attached disks",
                "name": "localStorageGBCost",
                "options": [
                  {
                    "selected": true,
                    "text": ".04",
                    "value": ".04"
                  }
                ],
                "query": ".04",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "current": {
                  "tags": [],
                  "text": "0",
                  "value": "0"
                },
                "hide": 0,
                "label": "Sustained Use Discount %",
                "name": "useDiscount",
                "options": [
                  {
                    "selected": true,
                    "text": "0",
                    "value": "0"
                  }
                ],
                "query": "0",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "current": {
                  "text": ".1",
                  "value": ".1"
                },
                "hide": 2,
                "label": null,
                "name": "percentEgress",
                "options": [
                  {
                    "selected": true,
                    "text": ".1",
                    "value": ".1"
                  }
                ],
                "query": ".1",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "current": {
                  "text": ".12",
                  "value": ".12"
                },
                "hide": 2,
                "label": null,
                "name": "egressCost",
                "options": [
                  {
                    "selected": true,
                    "text": ".12",
                    "value": ".12"
                  }
                ],
                "query": ".12",
                "skipUrlSync": false,
                "type": "constant"
              }
            ]
          },
          "time": {
            "from": "now-7d",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "",
          "title": "Kubecost cluster metrics",
          "uid": "JOUdHGZZz",
          "version": 20
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-cluster-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-utilization-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    cluster-utilization.json: |-
        {
            "annotations":{
                "list":[
                    {
                        "builtIn":1,
                        "datasource":"-- Grafana --",
                        "enable":true,
                        "hide":true,
                        "iconColor":"rgba(0, 211, 255, 1)",
                        "name":"Annotations & Alerts",
                        "type":"dashboard"
                    }
                ]
            },
            "description":"A dashboard to help manage Kubernetes cluster costs and resources",
            "editable":true,
            "gnetId":6873,
            "graphTooltip":0,
            "id":4,
            "iteration":1556759633456,
            "links":[
        
            ],
            "panels":[
                {
                    "content":"This dashboard shows monthly cost estimates for the cluster, based on **current** CPU, RAM and storage provisioned.",
                    "gridPos":{
                        "h":2,
                        "w":24,
                        "x":0,
                        "y":0
                    },
                    "id":86,
                    "links":[
        
                    ],
                    "mode":"markdown",
                    "title":"",
                    "transparent":true,
                    "type":"text"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":false,
                    "colors":[
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "format":"currencyUSD",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":false,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":6,
                        "x":0,
                        "y":2
                    },
                    "hideTimeOverride":true,
                    "id":75,
                    "interval":null,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"label_cloud_google_com_gke_preemptible",
                    "targets":[
                        {
                            "expr":"sum(\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) * $costpcpu\n )\n or\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) * ($costcpu - ($costcpu / 100 * $costDiscount))\n )\n) ",
                            "format":"time_series",
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":" {{ node }}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":"",
                    "timeFrom":"15m",
                    "timeShift":null,
                    "title":"CPU Cost",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":false,
                    "colors":[
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "format":"currencyUSD",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":false,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":6,
                        "x":6,
                        "y":2
                    },
                    "hideTimeOverride":true,
                    "id":77,
                    "interval":null,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"label_cloud_google_com_gke_preemptible",
                    "targets":[
                        {
                            "expr":"sum(\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) /1024/1024/1024 * $costpram\n )\n or\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) /1024/1024/1024 * ($costram - ($costram / 100 * $costDiscount))\n)\n) ",
                            "format":"time_series",
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":" {{ node }}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":"",
                    "timeFrom":"15m",
                    "timeShift":null,
                    "title":"RAM Cost",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":false,
                    "colors":[
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "format":"currencyUSD",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":false,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":6,
                        "x":12,
                        "y":2
                    },
                    "hideTimeOverride":true,
                    "id":78,
                    "interval":null,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"label_cloud_google_com_gke_preemptible",
                    "targets":[
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageSSD\n\n+\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageStandard\n\n+ \n\nsum(container_fs_limit_bytes{id=\"/\"}) / 1024 / 1024 / 1024 * 1.03 * $costStorageStandard",
                            "format":"time_series",
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":" {{ node }}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":"",
                    "timeFrom":"15m",
                    "timeShift":null,
                    "title":"Storage Cost (Cluster and PVC)",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":false,
                    "colors":[
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"Represents a near worst-case approximation of network costs.",
                    "format":"currencyUSD",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":false,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":6,
                        "x":18,
                        "y":2
                    },
                    "hideTimeOverride":true,
                    "id":129,
                    "interval":null,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"label_cloud_google_com_gke_preemptible",
                    "targets":[
                        {
                            "expr":"SUM(rate(node_network_transmit_bytes_total{device=\"eth0\"}[60m]) / 1024 / 1024 / 1024 ) * (60 * 60 * 24 * 30) * $costEgress",
                            "format":"time_series",
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":" {{ node }}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":"",
                    "timeFrom":"15m",
                    "timeShift":null,
                    "title":"Network Egress Cost",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"Current CPU use from applications divided by allocatable CPUs",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":0,
                        "y":6
                    },
                    "height":"180px",
                    "hideTimeOverride":true,
                    "id":82,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"(\n sum(\n count(irate(container_cpu_usage_seconds_total{id=\"/\"}[10m])) by (instance)\n * on (instance) \n sum(irate(container_cpu_usage_seconds_total{id=\"/\"}[10m])) by (instance)\n ) \n / \n (sum (kube_node_status_allocatable_cpu_cores))\n) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        }
                    ],
                    "thresholds":"30, 80",
                    "timeFrom":"",
                    "title":"CPU Utilization",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"Current CPU reservation requests from applications vs allocatable CPU",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":3,
                        "y":6
                    },
                    "height":"180px",
                    "id":91,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"SUM(kube_pod_container_resource_requests_cpu_cores) / SUM(kube_node_status_allocatable_cpu_cores) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        }
                    ],
                    "thresholds":"30, 80",
                    "title":"CPU Requests",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "description":"Current RAM use vs RAM available",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":6,
                        "y":6
                    },
                    "height":"180px",
                    "hideTimeOverride":true,
                    "id":80,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"SUM(container_memory_usage_bytes{namespace!=\"\"}) / SUM(kube_node_status_allocatable_memory_bytes) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        },
                        {
                            "expr":"",
                            "format":"time_series",
                            "intervalFactor":1,
                            "refId":"B"
                        }
                    ],
                    "thresholds":"30,80",
                    "timeFrom":"",
                    "title":"RAM Utilization",
                    "transparent":false,
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "description":"Current RAM requests vs RAM available",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":9,
                        "y":6
                    },
                    "height":"180px",
                    "id":92,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\"})\n /\n sum(kube_node_status_allocatable_memory_bytes)\n) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        }
                    ],
                    "thresholds":"30,80",
                    "title":"RAM Requests",
                    "transparent":false,
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"This gauge shows the current standard storage use, including cluster storage, vs storage available",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":12,
                        "y":6
                    },
                    "height":"180px",
                    "hideTimeOverride":true,
                    "id":95,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kubelet_volume_stats_used_bytes) by (persistentvolumeclaim, namespace) or up * 0\n + sum(container_fs_usage_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"})\n) /\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n + sum(container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"})\n) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        }
                    ],
                    "thresholds":"30, 80",
                    "timeFrom":"",
                    "title":"Storage Utilization",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"This gauge shows the current SSD use vs SSD available",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":15,
                        "y":6
                    },
                    "height":"180px",
                    "hideTimeOverride":true,
                    "id":96,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kubelet_volume_stats_used_bytes) by (persistentvolumeclaim, namespace)\n) /\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace)\n) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        }
                    ],
                    "thresholds":"30, 80",
                    "timeFrom":"",
                    "title":"SSD Utilization",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":false,
                    "colors":[
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"Expected monthly cost given current CPU, memory storage, and network resource consumption",
                    "format":"currencyUSD",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":false,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":6,
                        "x":18,
                        "y":6
                    },
                    "hideTimeOverride":true,
                    "id":93,
                    "interval":null,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"label_cloud_google_com_gke_preemptible",
                    "targets":[
                        {
                            "expr":"# CPU\nsum(\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) * $costpcpu\n )\n or\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) * ($costcpu - ($costcpu / 100 * $costDiscount))\n )\n) \n\n+ \n\n# Storage\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageSSD\n\n+\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageStandard\n\n+ \n\nsum(container_fs_limit_bytes{id=\"/\"}) / 1024 / 1024 / 1024 * 1.03 * $costStorageStandard \n\n+\n\n# END STORAGE\n# RAM \nsum(\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) /1024/1024/1024 * $costpram\n )\n or\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) /1024/1024/1024 * ($costram - ($costram / 100 * $costDiscount))\n)\n)\n\n+\n\n#Network \nSUM(rate(node_network_transmit_bytes_total{device=\"eth0\"}[60m]) / 1024 / 1024 / 1024 ) * (60 * 60 * 24 * 30) * $costEgress",
                            "format":"time_series",
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":" {{ node }}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":"",
                    "timeFrom":"15m",
                    "timeShift":null,
                    "title":"Total Monthly Cost",
                    "type":"singlestat",
                    "valueFontSize":"120%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "description":"Expected monthly CPU, memory and storage costs given provisioned resources",
                    "fill":1,
                    "gridPos":{
                        "h":8,
                        "w":12,
                        "x":0,
                        "y":10
                    },
                    "id":120,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":false,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"# CPU\nsum(\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) * $costpcpu\n )\n or\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) * ($costcpu - ($costcpu / 100 * $costDiscount))\n )\n) \n\n+ \n\n# Storage\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageSSD\n\n+\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageStandard\n\n+ \n\nsum(container_fs_limit_bytes{id=\"/\"}) / 1024 / 1024 / 1024 * 1.03 * $costStorageStandard \n\n+\n\n# END STORAGE\n# RAM \nsum(\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) /1024/1024/1024 * $costpram\n )\n or\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) /1024/1024/1024 * ($costram - ($costram / 100 * $costDiscount))\n)\n) \n\n+\n\n#Network \nSUM(rate(node_network_transmit_bytes_total{device=\"eth0\"}[60m]) / 1024 / 1024 / 1024 ) * (60 * 60 * 24 * 30) * $costEgress",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"cluster cost",
                            "refId":"A"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Total monthly cost",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"currencyUSD",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "description":"Resources allocated to namespace based on container requests",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":8,
                        "w":12,
                        "x":12,
                        "y":10
                    },
                    "hideTimeOverride":false,
                    "id":73,
                    "links":[
        
                    ],
                    "pageSize":10,
                    "repeat":null,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":7,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"Namespace",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(50, 172, 45, 0.97)",
                                "#c15c17"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "link":true,
                            "linkTooltip":"View namespace cost metrics",
                            "linkUrl":"d/at-cost-analysis-namespace2/namespace-cost-metrics?&var-namespace=$__cell",
                            "pattern":"namespace",
                            "thresholds":[
                                "30",
                                "80"
                            ],
                            "type":"string",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"RAM",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "pattern":"Value #B",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"CPU",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"PV Storage",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #C",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"Total",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #D",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"CPU Utilization",
                            "colorMode":"value",
                            "colors":[
                                "#bf1b00",
                                "rgba(50, 172, 45, 0.97)",
                                "#ef843c"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #E",
                            "thresholds":[
                                "30",
                                "80"
                            ],
                            "type":"number",
                            "unit":"percent"
                        },
                        {
                            "alias":"RAM Utilization",
                            "colorMode":"value",
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(50, 172, 45, 0.97)",
                                "#ef843c"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #F",
                            "thresholds":[
                                "30",
                                "80"
                            ],
                            "type":"number",
                            "unit":"percent"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"(\n sum(kube_pod_container_resource_requests_cpu_cores{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible!=\"true\"}*($costcpu - ($costcpu / 100 * $costDiscount))) by(namespace)\n or\n count(\n count(container_spec_cpu_shares{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n(\n sum(kube_pod_container_resource_requests_cpu_cores{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible=\"true\"}*$costpcpu) by(namespace)\n or\n count(\n count(container_spec_cpu_shares{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)",
                            "format":"table",
                            "hide":false,
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":"{{ namespace }}",
                            "refId":"A"
                        },
                        {
                            "expr":"(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible!=\"true\"} / 1024 / 1024 / 1024*($costram- ($costram / 100 * $costDiscount))) by (namespace) \n or\n count(\n count(container_spec_memory_limit_bytes{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible=\"true\"} / 1024 / 1024 / 1024 * $costpram ) by (namespace) \n or\n count(\n count(container_spec_memory_limit_bytes{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "legendFormat":"{{ namespace }}",
                            "refId":"B"
                        },
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) \n) by (namespace) / 1024 / 1024 /1024 * $costStorageSSD \n\nor\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) \n) by (namespace) / 1024 / 1024 /1024 * $costStorageStandard",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "legendFormat":"{{ namespace }}",
                            "refId":"C"
                        },
                        {
                            "expr":"# CPU \n(\n sum(kube_pod_container_resource_requests_cpu_cores{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible!=\"true\"}*($costcpu - ($costcpu / 100 * $costDiscount))) by(namespace)\n or\n count(\n count(container_spec_cpu_shares{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n(\n sum(kube_pod_container_resource_requests_cpu_cores{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible=\"true\"}*$costpcpu) by(namespace)\n or\n count(\n count(container_spec_cpu_shares{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n#END CPU \n# Memory \n\n(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible!=\"true\"} / 1024 / 1024 / 1024*($costram- ($costram / 100 * $costDiscount))) by (namespace) \n or\n count(\n count(container_spec_memory_limit_bytes{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible=\"true\"} / 1024 / 1024 / 1024 * $costpram ) by (namespace) \n or\n count(\n count(container_spec_memory_limit_bytes{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n# PV storage\n\n(\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) \n) by (namespace) / 1024 / 1024 /1024 * $costStorageSSD \n\nor\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) \n) by (namespace) / 1024 / 1024 /1024 * $costStorageStandard \n)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "legendFormat":"Total",
                            "refId":"D"
                        }
                    ],
                    "timeFrom":"",
                    "timeShift":null,
                    "title":"Namespace cost allocation",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "collapsed":false,
                    "gridPos":{
                        "h":1,
                        "w":24,
                        "x":0,
                        "y":18
                    },
                    "id":108,
                    "panels":[
        
                    ],
                    "title":"CPU Metrics",
                    "type":"row"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":8,
                        "w":24,
                        "x":0,
                        "y":19
                    },
                    "id":116,
                    "legend":{
                        "alignAsTable":false,
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "rightSide":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"SUM(kube_node_status_capacity_cpu_cores)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"capacity",
                            "refId":"A"
                        },
                        {
                            "expr":"SUM(kube_pod_container_resource_requests_cpu_cores)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"requests",
                            "refId":"C"
                        },
                        {
                            "expr":"SUM(irate(container_cpu_usage_seconds_total{id=\"/\"}[5m]))",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"usage",
                            "refId":"B"
                        },
                        {
                            "expr":"SUM(kube_pod_container_resource_limits_cpu_cores) ",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"limits",
                            "refId":"D"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Cluster CPUs",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "decimals":1,
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":8,
                        "w":24,
                        "x":0,
                        "y":27
                    },
                    "id":130,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"avg(irate(node_cpu_seconds_total{mode!=\"idle\"}[5m])) by (mode) * 100",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"{{mode}}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"CPU Mode",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"percent",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"percent",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":false
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "description":"This table shows the comparison of CPU requests and usage by namespace",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":0,
                        "y":35
                    },
                    "hideTimeOverride":true,
                    "id":104,
                    "links":[
        
                    ],
                    "pageSize":8,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":1,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"CPU Requests",
                            "colorMode":null,
                            "colors":[
                                "#fceaca",
                                "#fce2de",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
                                ""
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Node",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"node",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"CPU Requests",
                            "colorMode":"value",
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(50, 172, 45, 0.97)",
                                "#cffaff"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
                                ""
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"24h CPU Usage",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #C",
                            "thresholds":[
                                "30"
                            ],
                            "type":"number",
                            "unit":"none"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "link":true,
                            "linkTooltip":"View namespace cost metrics",
                            "linkUrl":"d/at-cost-analysis-namespace2/namespace-cost-metrics?&var-namespace=$__cell",
                            "mappingType":1,
                            "pattern":"namespace",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"sum(kube_pod_container_resource_requests_cpu_cores{namespace!=\"\"}) by (namespace) ",
                            "format":"table",
                            "hide":false,
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":"",
                            "refId":"A"
                        },
                        {
                            "expr":"sum (rate (container_cpu_usage_seconds_total{image!=\"\",namespace!=\"\"}[24h])) by (namespace)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "legendFormat":"{{ namespace }}",
                            "refId":"C"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"CPU request utilization by namespace",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "description":"This table shows the comparison of application CPU usage vs the capacity of the node (measured over last 60 minutes)",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":12,
                        "y":35
                    },
                    "hideTimeOverride":true,
                    "id":90,
                    "links":[
        
                    ],
                    "pageSize":8,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":2,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"CPU Request Utilization",
                            "colorMode":"value",
                            "colors":[
                                "#ef843c",
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
                                ".30",
                                " .80"
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        },
                        {
                            "alias":"Node",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"node",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"CPU Utilization",
                            "colorMode":"value",
                            "colors":[
                                "#ef843c",
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
                                ".20",
                                " .80"
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        },
                        {
                            "alias":"24h Utilization ",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"SUM(\nSUM(rate(container_cpu_usage_seconds_total[24h])) by (pod_name)\n* on (pod_name) group_left (node) \nlabel_replace(\n avg(kube_pod_info{}),\n \"pod_name\", \n \"$1\", \n \"pod\", \n \"(.+)\"\n)\n) by (node) \n/ \nsum(kube_node_status_capacity_cpu_cores) by (node)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"B"
                        },
                        {
                            "expr":"sum(kube_pod_container_resource_requests_cpu_cores) by (node) / sum(kube_node_status_capacity_cpu_cores) by (node)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"A"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Cluster cost & utilization by node",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "collapsed":false,
                    "gridPos":{
                        "h":1,
                        "w":24,
                        "x":0,
                        "y":45
                    },
                    "id":113,
                    "panels":[
        
                    ],
                    "title":"Memory Metrics",
                    "type":"row"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":8,
                        "w":24,
                        "x":0,
                        "y":46
                    },
                    "id":117,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":false,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"SUM(kube_node_status_capacity_memory_bytes / 1024 / 1024 / 1024)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"capacity",
                            "refId":"A"
                        },
                        {
                            "expr":"SUM(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\"} / 1024 / 1024 / 1024)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"requests",
                            "refId":"C"
                        },
                        {
                            "expr":"SUM(container_memory_usage_bytes{image!=\"\"} / 1024 / 1024 / 1024)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"usage",
                            "refId":"B"
                        },
                        {
                            "expr":"SUM(kube_pod_container_resource_limits_memory_bytes {namespace!=\"\"} / 1024 / 1024 / 1024)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"limits",
                            "refId":"D"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Cluster memory (GB)",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"decgbytes",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":8,
                        "w":24,
                        "x":0,
                        "y":54
                    },
                    "id":131,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":false,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"1 - sum(node_memory_MemAvailable_bytes) by (node) / sum(node_memory_MemTotal_bytes) by (node)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"usage",
                            "refId":"A"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Cluster Memory Utilization",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"percentunit",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "description":"Comparison of memory requests and current usage by namespace",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":0,
                        "y":62
                    },
                    "hideTimeOverride":true,
                    "id":109,
                    "links":[
        
                    ],
                    "pageSize":7,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":1,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"Mem Requests (GB)",
                            "colorMode":null,
                            "colors":[
                                "#fceaca",
                                "#fce2de",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
                                ""
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Node",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"node",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"CPU Requests",
                            "colorMode":"value",
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(50, 172, 45, 0.97)",
                                "#cffaff"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
                                ""
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"24h Mem Usage",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "#508642",
                                "#e5ac0e"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #C",
                            "thresholds":[
                                ".30",
                                ".75"
                            ],
                            "type":"number",
                            "unit":"none"
                        },
                        {
                            "alias":"Namespace",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "link":true,
                            "linkTooltip":"View namespace cost metrics",
                            "linkUrl":"d/at-cost-analysis-namespace2/namespace-cost-metrics?&var-namespace=$__cell",
                            "mappingType":1,
                            "pattern":"namespace",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\"} / 1024 / 1024 / 1024) by (namespace) ",
                            "format":"table",
                            "hide":false,
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":"",
                            "refId":"A"
                        },
                        {
                            "expr":"SUM(container_memory_usage_bytes{image!=\"\",namespace!=\"\"} / 1024 / 1024 / 1024) by (namespace)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "legendFormat":"",
                            "refId":"C"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Memory requests & utilization by namespace",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "description":"Container RAM usage vs node capacity",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":12,
                        "y":62
                    },
                    "hideTimeOverride":true,
                    "id":114,
                    "links":[
        
                    ],
                    "pageSize":8,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":1,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"RAM Requests",
                            "colorMode":"value",
                            "colors":[
                                "#ef843c",
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
                                "30",
                                " 80"
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        },
                        {
                            "alias":"Node",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"node",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"RAM Usage",
                            "colorMode":"value",
                            "colors":[
                                "#ef843c",
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
                                "25",
                                " 80"
                            ],
                            "type":"number",
                            "unit":"percent"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"SUM(label_replace(container_memory_usage_bytes{namespace!=\"\"}, \"node\", \"$1\", \"instance\",\"(.+)\")) by (node) * 100\n/\nSUM(kube_node_status_capacity_memory_bytes) by (node)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"B"
                        },
                        {
                            "expr":"sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\"}) by (node) / SUM(kube_node_status_capacity_memory_bytes) by (node)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"A"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Node utilization of allocatable RAM",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "collapsed":false,
                    "gridPos":{
                        "h":1,
                        "w":24,
                        "x":0,
                        "y":72
                    },
                    "id":101,
                    "panels":[
        
                    ],
                    "title":"Storage Metrics",
                    "type":"row"
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":9,
                        "w":12,
                        "x":0,
                        "y":73
                    },
                    "hideTimeOverride":true,
                    "id":97,
                    "links":[
        
                    ],
                    "pageSize":8,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":4,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"Node",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"instance",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"PVC Name",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"persistentvolumeclaim",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Storage Class",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"storageclass",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Cost",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"Cost",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"Size (GB)",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Usage",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #C",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"SUM(container_fs_limit_bytes{id=\"/\"}) by (instance) / 1024 / 1024 / 1024 * 1.03",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"B"
                        },
                        {
                            "expr":"SUM(container_fs_limit_bytes{id=\"/\"}) by (instance) / 1024 / 1024 / 1024 * 1.03 * $costStorageStandard\n",
                            "format":"table",
                            "hide":false,
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":"{{ persistentvolumeclaim }}",
                            "refId":"A"
                        },
                        {
                            "expr":"sum(container_fs_usage_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"} / container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"}) by (instance) \n",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"C"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Local Storage",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":9,
                        "w":12,
                        "x":12,
                        "y":73
                    },
                    "id":128,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"SUM(container_fs_usage_bytes{id=\"/\"}) / SUM(container_fs_limit_bytes{id=\"/\"})",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"reads",
                            "refId":"D"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Local storage utilization",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"percent",
                            "label":"IOPS",
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":0,
                        "y":82
                    },
                    "hideTimeOverride":true,
                    "id":94,
                    "links":[
        
                    ],
                    "pageSize":10,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":2,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"Namespace",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "link":true,
                            "linkTooltip":"View namespace cost metrics",
                            "linkUrl":"d/at-cost-analysis-namespace2/namespace-cost-metrics?&var-namespace=$__cell",
                            "mappingType":1,
                            "pattern":"namespace",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"PVC Name",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"persistentvolumeclaim",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Storage Class",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"storageclass",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Cost",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"Cost",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"Usage",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        },
                        {
                            "alias":"Size (GB)",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #C",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n * on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim,storageclass) / 1024 / 1024 /1024\n\nor\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n * on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim,storageclass) / 1024 / 1024 /1024\n\n\n",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"C"
                        },
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n * on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim,storageclass) / 1024 / 1024 /1024 * $costStorageSSD\n\nor\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n * on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim,storageclass) / 1024 / 1024 /1024 * $costStorageStandard\n",
                            "format":"table",
                            "hide":false,
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":"{{ persistentvolumeclaim }}",
                            "refId":"A"
                        },
                        {
                            "expr":"sum(kubelet_volume_stats_used_bytes) by (persistentvolumeclaim, namespace) \n/\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n * on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"B"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Persistent Volume Claims",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":12,
                        "y":82
                    },
                    "id":132,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"SUM(rate(node_disk_reads_completed_total[10m])) or SUM(rate(node_disk_reads_completed[10m]))\n",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"reads",
                            "refId":"D"
                        },
                        {
                            "expr":"SUM(rate(node_disk_writes_completed_total[10m])) or SUM(rate(node_disk_writes_completed[10m]))",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"writes",
                            "refId":"A"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Disk IOPS",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"none",
                            "label":"IOPS",
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":9,
                        "w":24,
                        "x":0,
                        "y":92
                    },
                    "id":122,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"SUM( kubelet_volume_stats_inodes_used / kubelet_volume_stats_inodes) by (persistentvolumeclaim) * 100",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"",
                            "refId":"D"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Inode usage",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"percent",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "collapsed":false,
                    "gridPos":{
                        "h":1,
                        "w":24,
                        "x":0,
                        "y":101
                    },
                    "id":127,
                    "panels":[
        
                    ],
                    "title":"Network",
                    "type":"row"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":9,
                        "w":24,
                        "x":0,
                        "y":102
                    },
                    "id":123,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"sum (rate (node_network_transmit_bytes_total{}[60m]))\n",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"node_out",
                            "refId":"B"
                        },
                        {
                            "expr":"SUM ( rate(node_network_transmit_bytes_total{device=\"eth0\"}[60m]))",
                            "format":"time_series",
                            "instant":false,
                            "intervalFactor":1,
                            "legendFormat":"eth0 out",
                            "refId":"C"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Node network transmit",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"decbytes",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                }
            ],
            "refresh":"15m",
            "schemaVersion":16,
            "style":"dark",
            "tags":[
                "cost",
                "utilization",
                "metrics"
            ],
            "templating":{
                "list":[
                    {
                        "current":{
                            "text":"23.076",
                            "value":"23.076"
                        },
                        "hide":0,
                        "label":"CPU",
                        "name":"costcpu",
                        "options":[
                            {
                                "text":"23.076",
                                "value":"23.076"
                            }
                        ],
                        "query":"23.076",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":"5.10",
                            "value":"5.10"
                        },
                        "hide":0,
                        "label":"PE CPU",
                        "name":"costpcpu",
                        "options":[
                            {
                                "text":"5.10",
                                "value":"5.10"
                            }
                        ],
                        "query":"5.10",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":"3.25",
                            "value":"3.25"
                        },
                        "hide":0,
                        "label":"RAM",
                        "name":"costram",
                        "options":[
                            {
                                "text":"3.25",
                                "value":"3.25"
                            }
                        ],
                        "query":"3.25",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":"0.6862",
                            "value":"0.6862"
                        },
                        "hide":0,
                        "label":"PE RAM",
                        "name":"costpram",
                        "options":[
                            {
                                "text":"0.6862",
                                "value":"0.6862"
                            }
                        ],
                        "query":"0.6862",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":"0.040",
                            "value":"0.040"
                        },
                        "hide":0,
                        "label":"Storage",
                        "name":"costStorageStandard",
                        "options":[
                            {
                                "text":"0.040",
                                "value":"0.040"
                            }
                        ],
                        "query":"0.040",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":".17",
                            "value":".17"
                        },
                        "hide":0,
                        "label":"SSD",
                        "name":"costStorageSSD",
                        "options":[
                            {
                                "text":".17",
                                "value":".17"
                            }
                        ],
                        "query":".17",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":".12",
                            "value":".12"
                        },
                        "hide":0,
                        "label":"Egress",
                        "name":"costEgress",
                        "options":[
                            {
                                "selected":true,
                                "text":".12",
                                "value":".12"
                            }
                        ],
                        "query":".12",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":"30",
                            "value":"30"
                        },
                        "hide":0,
                        "label":"Discount",
                        "name":"costDiscount",
                        "options":[
                            {
                                "text":"30",
                                "value":"30"
                            }
                        ],
                        "query":"30",
                        "skipUrlSync":false,
                        "type":"constant"
                    }
                ]
            },
            "time":{
                "from":"now-24h",
                "to":"now"
            },
            "timepicker":{
                "hidden":false,
                "refresh_intervals":[
                    "5s",
                    "10s",
                    "30s",
                    "1m",
                    "5m",
                    "15m",
                    "30m",
                    "1h",
                    "2h",
                    "1d"
                ],
                "time_options":[
                    "5m",
                    "15m",
                    "1h",
                    "6h",
                    "12h",
                    "24h",
                    "2d",
                    "7d",
                    "30d"
                ]
            },
            "timezone":"browser",
            "title":"Cluster cost & utilization metrics",
            "uid":"cluster-costs",
            "version":1
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-deployment-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: deployment-utilization-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    deployment-utilization.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "description": "Monitors Kubernetes deployments in cluster using Prometheus and kube-state-metrics. Shows resource utilization of deployments, daemonsets, and statefulsets.",
          "editable": true,
          "gnetId": 8588,
          "graphTooltip": 0,
          "id": 2,
          "iteration": 1586200623748,
          "links": [],
          "panels": [
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(50, 172, 45, 0.97)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(245, 54, 54, 0.9)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 8,
                "x": 0,
                "y": 0
              },
              "height": "180px",
              "id": 1,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (container_memory_working_set_bytes{container!=\"\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", kubernetes_io_hostname=~\"^$Node$\", pod_name!=\"\"}) / sum (kube_node_status_allocatable_memory_bytes{node=~\"^$Node.*$\"}) * 100",
                  "format": "time_series",
                  "interval": "10s",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 900
                }
              ],
              "thresholds": "65, 90",
              "title": "Deployment memory usage",
              "transparent": false,
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(50, 172, 45, 0.97)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(245, 54, 54, 0.9)"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 8,
                "x": 8,
                "y": 0
              },
              "height": "180px",
              "id": 2,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (rate (container_cpu_usage_seconds_total{pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", kubernetes_io_hostname=~\"^$Node$\"}[2m])) / sum (machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"}) * 100",
                  "format": "time_series",
                  "interval": "10s",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 900
                }
              ],
              "thresholds": "65, 90",
              "title": "Deployment CPU usage",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(50, 172, 45, 0.97)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(245, 54, 54, 0.9)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 8,
                "x": 16,
                "y": 0
              },
              "height": "180px",
              "id": 3,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "(((sum(kube_deployment_status_replicas{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_desired_number_scheduled{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))) - ((sum(kube_deployment_status_replicas_available{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_status_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_number_ready{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)))) / ((sum(kube_deployment_status_replicas{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_desired_number_scheduled{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))) * 100",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "1,30",
              "title": "Unavailable Replicas",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "bytes",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 0,
                "y": 5
              },
              "height": "100px",
              "id": 4,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(container_memory_working_set_bytes{container!=\"\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", kubernetes_io_hostname=~\"^$Node$\", pod_name!=\"\"})",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Used",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "bytes",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 4,
                "y": 5
              },
              "height": "100px",
              "id": 5,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (kube_node_status_allocatable_memory_bytes{node=~\"^$Node.*$\"})",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Total",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 8,
                "y": 5
              },
              "height": "100px",
              "id": 6,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": " cores",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (rate (container_cpu_usage_seconds_total{pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", kubernetes_io_hostname=~\"^$Node$\"}[5m]))",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Used",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 12,
                "y": 5
              },
              "height": "100px",
              "id": 7,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": " cores",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"})",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Total",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "avg"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 16,
                "y": 5
              },
              "height": "100px",
              "id": 8,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "(sum(kube_deployment_status_replicas_available{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_status_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_number_ready{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Available (cluster)",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 20,
                "y": 5
              },
              "height": "100px",
              "id": 9,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "(sum(kube_deployment_status_replicas{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_desired_number_scheduled{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "{{ $Daemonset }}",
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Total (cluster)",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 3,
              "editable": true,
              "error": false,
              "fill": 0,
              "grid": {},
              "gridPos": {
                "h": 11,
                "w": 24,
                "x": 0,
                "y": 8
              },
              "height": "",
              "id": 10,
              "legend": {
                "alignAsTable": true,
                "avg": false,
                "current": true,
                "hideEmpty": false,
                "hideZero": false,
                "max": true,
                "min": false,
                "rightSide": true,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [
                {
                  "alias": "/avlbl.*/",
                  "yaxis": 2
                }
              ],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum (irate (container_cpu_usage_seconds_total{container!=\"\",image!=\"\",name=~\"^k8s_.*\",io_kubernetes_container_name!=\"POD\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (pod_name,kubernetes_io_hostname)",
                  "format": "time_series",
                  "hide": false,
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "usage: {{ kubernetes_io_hostname }} | {{ pod_name }} ",
                  "metric": "container_cpu",
                  "refId": "A",
                  "step": 60
                },
                {
                  "expr": "sum (kube_pod_container_resource_requests_cpu_cores{pod=~\"^$Deployment$Statefulset$Daemonset.*$\",node=~\"^$Node$\"}) by (pod,node)",
                  "format": "time_series",
                  "hide": false,
                  "intervalFactor": 2,
                  "legendFormat": "rqst: {{ node }} | {{ pod }}",
                  "refId": "B",
                  "step": 120
                },
                {
                  "expr": "sum ((kube_node_status_allocatable_cpu_cores{node=~\"^$Node$\"})) by (node)",
                  "format": "time_series",
                  "hide": true,
                  "intervalFactor": 2,
                  "legendFormat": "avlbl: {{ node }}",
                  "refId": "C",
                  "step": 30
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "CPU usage & requests",
              "tooltip": {
                "msResolution": true,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": "cores",
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 2,
              "editable": true,
              "error": false,
              "fill": 0,
              "grid": {},
              "gridPos": {
                "h": 13,
                "w": 24,
                "x": 0,
                "y": 19
              },
              "id": 11,
              "legend": {
                "alignAsTable": true,
                "avg": false,
                "current": true,
                "max": true,
                "min": false,
                "rightSide": true,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [
                {
                  "alias": "/^avlbl.*$/",
                  "yaxis": 2
                }
              ],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "max (container_memory_working_set_bytes{container!=\"POD\",container!=\"\",id!=\"/\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",kubernetes_io_hostname=~\"^$Node$\"}) by (pod_name,kubernetes_io_hostname)",
                  "format": "time_series",
                  "hide": false,
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "usage: {{kubernetes_io_hostname }} | {{ pod_name }}",
                  "metric": "container_memory_usage:sort_desc",
                  "refId": "A",
                  "step": 60
                },
                {
                  "expr": "sum ((kube_pod_container_resource_requests_memory_bytes{pod=~\"^$Deployment$Statefulset$Daemonset.*$\",node=~\"^$Node$\"})) by (pod,node)",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "rqst: {{ node }} | {{ pod }}",
                  "refId": "B",
                  "step": 120
                },
                {
                  "expr": "sum ((kube_node_status_allocatable_memory_bytes{node=~\"^$Node$\"})) by (node)",
                  "format": "time_series",
                  "hide": true,
                  "intervalFactor": 2,
                  "legendFormat": "avlbl: {{ node }}",
                  "refId": "C",
                  "step": 30
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Memory usage & requests",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 24,
                "x": 0,
                "y": 32
              },
              "id": 12,
              "legend": {
                "alignAsTable": true,
                "avg": false,
                "current": true,
                "max": false,
                "min": false,
                "rightSide": true,
                "show": true,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "100 * (kubelet_volume_stats_used_bytes{kubernetes_io_hostname=~\"^$Node$\", persistentvolumeclaim=~\".*$Deployment$Statefulset$Daemonset.*$\"} / kubelet_volume_stats_capacity_bytes{kubernetes_io_hostname=~\"^$Node$\", persistentvolumeclaim=~\".*$Deployment$Statefulset$Daemonset.*$\"})",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "{{ persistentvolumeclaim }} | {{ kubernetes_io_hostname }}",
                  "refId": "A",
                  "step": 120
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Disk Usage",
              "tooltip": {
                "shared": true,
                "sort": 2,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "percent",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 2,
              "editable": true,
              "error": false,
              "fill": 1,
              "grid": {},
              "gridPos": {
                "h": 13,
                "w": 24,
                "x": 0,
                "y": 41
              },
              "id": 13,
              "legend": {
                "alignAsTable": true,
                "avg": true,
                "current": true,
                "max": true,
                "min": false,
                "rightSide": true,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum (rate (container_network_receive_bytes_total{id!=\"/\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",kubernetes_io_hostname=~\"^$Node$\"}[2m])) by (pod_name, kubernetes_io_hostname)",
                  "format": "time_series",
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "-> {{ kubernetes_io_hostname }} | {{ pod_name }}",
                  "metric": "network",
                  "refId": "A",
                  "step": 60
                },
                {
                  "expr": "- sum( rate (container_network_transmit_bytes_total{id!=\"/\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",kubernetes_io_hostname=~\"^$Node$\"}[2m])) by (pod_name, kubernetes_io_hostname)",
                  "format": "time_series",
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "<- {{ kubernetes_io_hostname }} | {{ pod_name }}",
                  "metric": "network",
                  "refId": "B",
                  "step": 60
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "All processes network I/O",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "Bps",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "refresh": false,
          "schemaVersion": 16,
          "style": "dark",
          "tags": [
            "kubernetes",
            "deployment"
          ],
          "templating": {
            "list": [
              {
                "allValue": "()",
                "current": {
                  "selected": false,
                  "tags": [],
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "Deployment",
                "options": [],
                "query": "label_values(deployment)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": "()",
                "current": {
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "Statefulset",
                "options": [],
                "query": "label_values(statefulset)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": "()",
                "current": {
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "Daemonset",
                "options": [],
                "query": "label_values(daemonset)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": ".*",
                "current": {
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "Node",
                "options": [],
                "query": "label_values(kubernetes_io_hostname)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-24h",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "browser",
          "title": "Deployment/Statefulset/Daemonset utilization metrics",
          "uid": "deployment-metrics",
          "version": 1
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-label-cost-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: label-cost-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    label-cost-utilization.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "id": 7,
          "iteration": 1586214000479,
          "links": [],
          "panels": [
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Monthly projected CPU cost given last 10m",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 6,
                "x": 0,
                "y": 0
              },
              "hideTimeOverride": true,
              "id": 15,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(\n  avg(container_cpu_allocation) by (pod,node)\n\n  * on (node) group_left()\n  avg(avg_over_time(node_cpu_hourly_cost[10m])) by (node)\n\n  * on (pod) group_left()\n  label_replace(\n    max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod),\n    \"pod_name\",\n    \"$1\", \n    \"pod\", \n    \"(.+)\"\n  )\n) * 730",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "CPU Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Based on CPU usage over last 24 hours",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 6,
                "x": 6,
                "y": 0
              },
              "hideTimeOverride": true,
              "id": 16,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(\n  avg(container_memory_allocation_bytes) by (pod,node) / 1024 / 1024 / 1024\n\n  * on (node) group_left()\n  avg(avg_over_time(node_ram_hourly_cost[10m])) by (node)\n\n  * on (pod) group_left()\n  label_replace(\n    max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod),\n    \"pod_name\",\n    \"$1\", \n    \"pod\", \n    \"(.+)\"\n  )\n) * 730",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Memory Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 6,
                "x": 12,
                "y": 0
              },
              "hideTimeOverride": true,
              "id": 21,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(\n sum(kube_persistentvolumeclaim_info{storageclass!=\".*ssd.*\"}) by (persistentvolumeclaim, storageclass)\n * on (persistentvolumeclaim) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim)\n * on (persistentvolumeclaim) group_left(label_app)\n max(kube_persistentvolumeclaim_labels{label_$label=~\"$label_value\"}) by (persistentvolumeclaim) or up * 0\n) / 1024 / 1024 /1024 * .04 \n\n+\n\nsum(\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, storageclass)\n * on (persistentvolumeclaim) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim)\n * on (persistentvolumeclaim) group_left(label_app)\n max(kube_persistentvolumeclaim_labels{label_$label=~\"$label_value\"}) by (persistentvolumeclaim) or up * 0\n) / 1024 / 1024 /1024 * .17 \n",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Storage Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Cost of memory + CPU usage",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 6,
                "x": 18,
                "y": 0
              },
              "hideTimeOverride": true,
              "id": 20,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ CPU ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nsum(\n  avg(container_cpu_allocation) by (pod,node)\n\n  * on (node) group_left()\n  avg(avg_over_time(node_cpu_hourly_cost[10m])) by (node)\n\n  * on (pod) group_left()\n  label_replace(\n    max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod),\n    \"pod_name\",\n    \"$1\", \n    \"pod\", \n    \"(.+)\"\n  )\n) * 730\n\n#END CPU\n+\n\n# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Memory ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nsum(\n  avg(container_memory_allocation_bytes) by (pod,node) / 1024 / 1024 / 1024\n\n  * on (node) group_left()\n  avg(avg_over_time(node_ram_hourly_cost[10m])) by (node)\n\n  * on (pod) group_left()\n  label_replace(\n    max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod),\n    \"pod_name\",\n    \"$1\", \n    \"pod\", \n    \"(.+)\"\n  )\n) * 730\n\n# END MEMORY\n\n+\n\n# ~~~~~~~~~~~~~~~~~~~~~~~~~~~ STORAGE ~~~~~~~~~~~~~~~~~~~~~~~~~\n\nsum(\n sum(kube_persistentvolumeclaim_info{storageclass!=\".*ssd.*\"}) by (persistentvolumeclaim, storageclass)\n * on (persistentvolumeclaim) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim)\n * on (persistentvolumeclaim) group_left(label_app)\n max(kube_persistentvolumeclaim_labels{label_$label=~\"$label_value\"}) by (persistentvolumeclaim) or up * 0\n) / 1024 / 1024 /1024 * .04 \n\n+\n\nsum(\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, storageclass)\n * on (persistentvolumeclaim) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim)\n * on (persistentvolumeclaim) group_left(label_app)\n max(kube_persistentvolumeclaim_labels{label_$label=~\"$label_value\"}) by (persistentvolumeclaim) or up * 0\n) / 1024 / 1024 /1024 * .17 \n\n\n# END STORAGE\n",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Total Cost",
              "type": "singlestat",
              "valueFontSize": "110%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 0,
                "y": 5
              },
              "id": 10,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": " cores",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(\n sum (kube_pod_container_resource_requests_cpu_cores) by (pod)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod)\n or up * 0\n) ",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "title": "CPU Request",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 3,
                "y": 5
              },
              "id": 17,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": " cores",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(\n label_replace(\n sum(rate(container_cpu_usage_seconds_total{image!=\"\",container_name!=\"POD\"}[1h])) by (kubernetes_io_hostname,pod_name),\n \"node\",\n \"$1\", \n \"kubernetes_io_hostname\", \n \"(.+)\"\n ) \n * on (pod_name) group_left()\n label_replace(\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod),\n \"pod_name\",\n \"$1\", \n \"pod\", \n \"(.+)\"\n ) or up * 0\n) ",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "title": "CPU Used",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 0,
              "format": "bytes",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 6,
                "y": 5
              },
              "id": 11,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": true,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(\n sum (kube_pod_container_resource_requests_memory_bytes) by (pod)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod)\n or up * 0\n) ",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "title": "Memory Request",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "format": "bytes",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 9,
                "y": 5
              },
              "id": 18,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(\n label_replace(\n sum (container_memory_working_set_bytes{pod_name!=\"\",container!=\"POD\",container!=\"\"}) by (pod_name),\n \"pod\",\n \"$1\", \n \"pod_name\", \n \"(.+)\")\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod)\n or up * 0\n)",
                  "format": "time_series",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "title": "Memory Usage",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 0,
              "format": "bytes",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 6,
                "x": 12,
                "y": 5
              },
              "id": 22,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(\n max(kube_persistentvolumeclaim_info) by (persistentvolumeclaim, storageclass)\n * on (persistentvolumeclaim) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim)\n * on (persistentvolumeclaim) group_left(label_app)\n max(kube_persistentvolumeclaim_labels{label_$label=~\"$label_value\"}) by (persistentvolumeclaim) or up * 0\n) \n",
                  "format": "time_series",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "title": "Storage Request",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 9
              },
              "id": 8,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n label_replace(\n sum (kube_pod_container_resource_limits_cpu_cores) by (pod, container)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container),\n \"container_name\",\n \"$1\", \n \"container\", \n \"(.+)\"\n )\n) \n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "limit",
                  "refId": "C"
                },
                {
                  "expr": "sum(\n label_replace(\n sum (kube_pod_container_resource_requests_cpu_cores) by (pod, container)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container),\n \"container_name\",\n \"$1\", \n \"container\", \n \"(.+)\"\n )\n) \n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "request",
                  "refId": "B"
                },
                {
                  "expr": "sum(\n label_replace(\n sum (rate (container_cpu_usage_seconds_total{image!=\"\",container!=\"POD\",container!=\"\"}[10m])) by (container,pod),\n \"pod\", \n \"$1\", \n \"pod_name\", \n \"(.+)\"\n )\n * on (pod) group_left (label_$label)\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container)\n)\n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "usage",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "CPU Usage vs Requests vs Limits",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 8,
                "w": 12,
                "x": 12,
                "y": 9
              },
              "id": 23,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n label_replace(\n sum (kube_pod_container_resource_limits_memory_bytes) by (pod, container)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container),\n \"container_name\",\n \"$1\", \n \"container\", \n \"(.+)\"\n )\n) \n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "limit",
                  "refId": "C"
                },
                {
                  "expr": "sum(\n label_replace(\n sum (kube_pod_container_resource_requests_memory_bytes) by (pod, container)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container),\n \"container_name\",\n \"$1\", \n \"container\", \n \"(.+)\"\n )\n) \n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "request",
                  "refId": "B"
                },
                {
                  "expr": "sum(\n label_replace(\n sum (container_memory_working_set_bytes{container!=\"\",container!=\"POD\"}) by (container,pod),\n \"pod\", \n \"$1\", \n \"pod_name\", \n \"(.+)\"\n )\n * on (pod) group_left (label_$label)\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container)\n)\n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "usage",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Memory Usage vs Requests vs Limits",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "refresh": false,
          "schemaVersion": 16,
          "style": "dark",
          "tags": [
            "cost",
            "utilization",
            "metrics"
          ],
          "templating": {
            "list": [
              {
                "datasource": "default-kubecost",
                "filters": [],
                "hide": 0,
                "label": "",
                "name": "Filters",
                "skipUrlSync": false,
                "type": "adhoc"
              },
              {
                "allValue": null,
                "current": {
                  "tags": [],
                  "text": "app",
                  "value": "app"
                },
                "hide": 0,
                "includeAll": false,
                "label": "Label",
                "multi": false,
                "name": "label",
                "options": [
                  {
                    "selected": false,
                    "text": "app",
                    "value": "app"
                  },
                  {
                    "selected": false,
                    "text": "tier",
                    "value": "tier"
                  },
                  {
                    "selected": false,
                    "text": "component",
                    "value": "component"
                  },
                  {
                    "selected": true,
                    "text": "release",
                    "value": "release"
                  },
                  {
                    "selected": false,
                    "text": "name",
                    "value": "name"
                  },
                  {
                    "selected": false,
                    "text": "team",
                    "value": "team"
                  },
                  {
                    "selected": false,
                    "text": "department",
                    "value": "department"
                  },
                  {
                    "selected": false,
                    "text": "owner",
                    "value": "owner"
                  },
                  {
                    "selected": false,
                    "text": "contact",
                    "value": "contact"
                  }
                ],
                "query": "app, tier, component, release, name, team, department, owner, contact",
                "skipUrlSync": false,
                "type": "custom"
              },
              {
                "allValue": ".*",
                "current": {
                  "tags": [],
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": "Value",
                "multi": false,
                "name": "label_value",
                "options": [],
                "query": "query_result(SUM(kube_pod_labels{label_$label!=\"\",namespace!=\"kube-system\"}) by (label_$label))",
                "refresh": 1,
                "regex": "/label_$label=\\\"(.*?)(\\\")/",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": "()",
                "current": {
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": "",
                "multi": false,
                "name": "Deployments",
                "options": [],
                "query": "label_values(deployment)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": null,
                "current": {
                  "tags": [],
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "Secondary",
                "options": [
                  {
                    "selected": true,
                    "text": "All",
                    "value": "$__all"
                  },
                  {
                    "selected": false,
                    "text": "app",
                    "value": "app"
                  },
                  {
                    "selected": false,
                    "text": "component",
                    "value": "component"
                  },
                  {
                    "selected": false,
                    "text": "controller_revision_hash",
                    "value": "controller_revision_hash"
                  },
                  {
                    "selected": false,
                    "text": "k8s_app",
                    "value": "k8s_app"
                  }
                ],
                "query": "query_result(kube_pod_labels)",
                "refresh": 0,
                "regex": "/.+?label_([^=]*).*/",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-24h",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "",
          "title": "Label costs & utilization",
          "uid": "lWMhIA-ik",
          "version": 2
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-namespace-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: namespace-utilization-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    namespace-utilization.json: |-
        {
        	"annotations":{
        		"list":[
        			{
        				"builtIn":1,
        				"datasource":"-- Grafana --",
        				"enable":true,
        				"hide":true,
        				"iconColor":"rgba(0, 211, 255, 1)",
        				"name":"Annotations & Alerts",
        				"type":"dashboard"
        			}
        		]
        	},
        	"description":"A dashboard to help with utilization and resource allocation",
        	"editable":true,
        	"gnetId":8673,
        	"graphTooltip":0,
        	"id":9,
        	"iteration":1553150922105,
        	"links":[
        
        	],
        	"panels":[
        		{
        			"columns":[
        				{
        					"text":"Avg",
        					"value":"avg"
        				}
        			],
        			"datasource":"default-kubecost",
        			"fontSize":"100%",
        			"gridPos":{
        				"h":9,
        				"w":16,
        				"x":0,
        				"y":0
        			},
        			"hideTimeOverride":true,
        			"id":73,
        			"links":[
        
        			],
        			"pageSize":8,
        			"repeat":null,
        			"repeatDirection":"v",
        			"scroll":true,
        			"showHeader":true,
        			"sort":{
        				"col":2,
        				"desc":false
        			},
        			"styles":[
        				{
        					"alias":"Pod",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(50, 172, 45, 0.97)",
        						"#c15c17"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"link":false,
        					"linkTooltip":"",
        					"linkUrl":"",
        					"pattern":"pod_name",
        					"thresholds":[
        						"30",
        						"80"
        					],
        					"type":"string",
        					"unit":"currencyUSD"
        				},
        				{
        					"alias":"RAM",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"pattern":"Value #B",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"decbytes"
        				},
        				{
        					"alias":"CPU %",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #A",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"percent"
        				},
        				{
        					"alias":"",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Time",
        					"thresholds":[
        
        					],
        					"type":"hidden",
        					"unit":"short"
        				},
        				{
        					"alias":"Storage",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #C",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"currencyUSD"
        				},
        				{
        					"alias":"Total",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #D",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"currencyUSD"
        				},
        				{
        					"alias":"CPU Utilization",
        					"colorMode":"value",
        					"colors":[
        						"#bf1b00",
        						"rgba(50, 172, 45, 0.97)",
        						"#ef843c"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #E",
        					"thresholds":[
        						"30",
        						"80"
        					],
        					"type":"number",
        					"unit":"percent"
        				},
        				{
        					"alias":"RAM Utilization",
        					"colorMode":"value",
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(50, 172, 45, 0.97)",
        						"#ef843c"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #F",
        					"thresholds":[
        						"30",
        						"80"
        					],
        					"type":"number",
        					"unit":"percent"
        				}
        			],
        			"targets":[
        				{
        					"expr":"sum (rate (container_cpu_usage_seconds_total{namespace=\"$namespace\"}[10m])) by (pod_name) * 100",
        					"format":"table",
        					"hide":false,
        					"instant":true,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"{{ pod_name }}",
        					"refId":"A"
        				},
        				{
        					"expr":"sum (avg_over_time (container_memory_working_set_bytes{namespace=\"$namespace\", container_name!=\"POD\"}[10m])) by (pod_name)",
        					"format":"table",
        					"hide":false,
        					"instant":true,
        					"intervalFactor":1,
        					"legendFormat":"{{ pod_name }}",
        					"refId":"B"
        				}
        			],
        			"timeFrom":"1M",
        			"timeShift":null,
        			"title":"Pod utilization analysis",
        			"transform":"table",
        			"transparent":false,
        			"type":"table"
        		},
        		{
        			"columns":[
        				{
        					"text":"Avg",
        					"value":"avg"
        				}
        			],
        			"datasource":"default-kubecost",
        			"fontSize":"100%",
        			"gridPos":{
        				"h":9,
        				"w":8,
        				"x":16,
        				"y":0
        			},
        			"hideTimeOverride":true,
        			"id":90,
        			"links":[
        
        			],
        			"pageSize":8,
        			"repeatDirection":"v",
        			"scroll":true,
        			"showHeader":true,
        			"sort":{
        				"col":4,
        				"desc":true
        			},
        			"styles":[
        				{
        					"alias":"Namespace",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"namespace",
        					"thresholds":[
        
        					],
        					"type":"hidden",
        					"unit":"short"
        				},
        				{
        					"alias":"PVC Name",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"persistentvolumeclaim",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"short"
        				},
        				{
        					"alias":"Storage Class",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"storageclass",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"short"
        				},
        				{
        					"alias":"Size",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":1,
        					"mappingType":1,
        					"pattern":"Value",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"gbytes"
        				},
        				{
        					"alias":"",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Time",
        					"thresholds":[
        
        					],
        					"type":"hidden",
        					"unit":"short"
        				}
        			],
        			"targets":[
        				{
        					"expr":"sum (\n sum(kube_persistentvolumeclaim_info) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right (storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{namespace=~\"$namespace\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim,storageclass) / 1024 / 1024 /1024 ",
        					"format":"table",
        					"hide":false,
        					"instant":true,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"{{ persistentvolumeclaim }}",
        					"refId":"A"
        				}
        			],
        			"timeFrom":null,
        			"timeShift":null,
        			"title":"Persistent Volume Claims",
        			"transform":"table",
        			"transparent":false,
        			"type":"table"
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"description":"CPU requests by pod divided by the rate of CPU usage over the last hour",
        			"fill":1,
        			"gridPos":{
        				"h":9,
        				"w":24,
        				"x":0,
        				"y":9
        			},
        			"id":100,
        			"legend":{
        				"avg":false,
        				"current":false,
        				"max":false,
        				"min":false,
        				"show":true,
        				"total":false,
        				"values":false
        			},
        			"lines":true,
        			"linewidth":1,
        			"links":[
        
        			],
        			"nullPointMode":"null",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":false,
        			"targets":[
        				{
        					"expr":"topk(10,\n label_replace(\n sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\"}) by (pod),\n \"pod_name\", \n \"$1\", \n \"pod\", \n \"(.+)\"\n ) \n/ on (pod_name) sum(rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod_name=~\".+\"}[1h])) by (pod_name))",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":null,
        			"timeShift":null,
        			"title":"Ratio of CPU requests to usage (Top 10 pods)",
        			"tooltip":{
        				"shared":true,
        				"sort":0,
        				"value_type":"individual"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":3,
        			"description":"This panel shows historical utilization as an average across all pods in this namespace. It only accounts for currently deployed pods",
        			"editable":true,
        			"error":false,
        			"fill":0,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":0,
        				"y":18
        			},
        			"height":"",
        			"id":94,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":false,
        				"current":false,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":false,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":true,
        			"targets":[
        				{
        					"expr":"sum (rate (container_cpu_usage_seconds_total{namespace=\"$namespace\"}[10m])) by (namespace)\n",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"10s",
        					"intervalFactor":1,
        					"legendFormat":"cpu utilization",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Overall CPU Utilization",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"decimals":null,
        					"format":"percent",
        					"label":"",
        					"logBase":1,
        					"max":"110",
        					"min":"0",
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"This panel shows historical utilization as an average across all pods in this namespace. It only accounts for currently deployed pods",
        			"editable":true,
        			"error":false,
        			"fill":0,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":12,
        				"y":18
        			},
        			"id":92,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":false,
        				"current":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":false,
        				"sideWidth":200,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":true,
        			"targets":[
        				{
        					"expr":"sum (container_memory_working_set_bytes{namespace=\"$namespace\"})\n/\nsum(node_memory_MemTotal_bytes)",
        					"format":"time_series",
        					"instant":false,
        					"intervalFactor":1,
        					"legendFormat":"mem utilization",
        					"refId":"B"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Overall RAM Utilization",
        			"tooltip":{
        				"msResolution":false,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"decimals":null,
        					"format":"percent",
        					"label":null,
        					"logBase":1,
        					"max":"110",
        					"min":"0",
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"Traffic in and out of this namespace, as a sum of the pods within it",
        			"editable":true,
        			"error":false,
        			"fill":1,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":0,
        				"y":24
        			},
        			"height":"",
        			"id":96,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":true,
        				"current":true,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":true,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":false,
        			"targets":[
        				{
        					"expr":"sum (rate (container_network_receive_bytes_total{namespace=\"$namespace\"}[10m])) by (namespace)",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"<- in",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				},
        				{
        					"expr":"- sum (rate (container_network_transmit_bytes_total{namespace=\"$namespace\"}[10m])) by (namespace)",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"-> out",
        					"refId":"B"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Network IO",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"format":"Bps",
        					"label":"",
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"Disk reads and writes for the namespace, as a sum of the pods within it",
        			"editable":true,
        			"error":false,
        			"fill":1,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":12,
        				"y":24
        			},
        			"height":"",
        			"id":98,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":true,
        				"current":true,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":true,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":false,
        			"targets":[
        				{
        					"expr":"sum (rate (container_fs_writes_bytes_total{namespace=\"$namespace\"}[10m])) by (namespace)",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"<- write",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				},
        				{
        					"expr":"- sum (rate (container_fs_reads_bytes_total{namespace=\"$namespace\"}[10m])) by (namespace)",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"-> read",
        					"refId":"B"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Disk IO",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"format":"Bps",
        					"label":"",
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		}
        	],
        	"refresh":"10s",
        	"schemaVersion":16,
        	"style":"dark",
        	"tags":[
        		"cost",
        		"utilization",
        		"metrics"
        	],
        	"templating":{
        		"list":[
        			{
        				"current":{
        					"text":"23.06",
        					"value":"23.06"
        				},
        				"hide":0,
        				"label":"CPU",
        				"name":"costcpu",
        				"options":[
        					{
        						"text":"23.06",
        						"value":"23.06"
        					}
        				],
        				"query":"23.06",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":"7.28",
        					"value":"7.28"
        				},
        				"hide":0,
        				"label":"PE CPU",
        				"name":"costpcpu",
        				"options":[
        					{
        						"text":"7.28",
        						"value":"7.28"
        					}
        				],
        				"query":"7.28",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":"3.25",
        					"value":"3.25"
        				},
        				"hide":0,
        				"label":"RAM",
        				"name":"costram",
        				"options":[
        					{
        						"text":"3.25",
        						"value":"3.25"
        					}
        				],
        				"query":"3.25",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":"0.6862",
        					"value":"0.6862"
        				},
        				"hide":0,
        				"label":"PE RAM",
        				"name":"costpram",
        				"options":[
        					{
        						"text":"0.6862",
        						"value":"0.6862"
        					}
        				],
        				"query":"0.6862",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":"0.04",
        					"value":"0.04"
        				},
        				"hide":0,
        				"label":"Storage",
        				"name":"costStorageStandard",
        				"options":[
        					{
        						"text":"0.04",
        						"value":"0.04"
        					}
        				],
        				"query":"0.04",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":".17",
        					"value":".17"
        				},
        				"hide":0,
        				"label":"SSD",
        				"name":"costStorageSSD",
        				"options":[
        					{
        						"text":".17",
        						"value":".17"
        					}
        				],
        				"query":".17",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":"30",
        					"value":"30"
        				},
        				"hide":0,
        				"label":"Disc.",
        				"name":"costDiscount",
        				"options":[
        					{
        						"text":"30",
        						"value":"30"
        					}
        				],
        				"query":"30",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"allValue":null,
        				"current":{
        					"text":"kube-system",
        					"value":"kube-system"
        				},
        				"datasource":"default-kubecost",
        				"hide":0,
        				"includeAll":false,
        				"label":"NS",
        				"multi":false,
        				"name":"namespace",
        				"options":[
        
        				],
        				"query":"query_result(sum(kube_namespace_created{namespace!=\"\"}) by (namespace))",
        				"refresh":1,
        				"regex":"/namespace=\\\"(.*?)(\\\")/",
        				"skipUrlSync":false,
        				"sort":0,
        				"tagValuesQuery":"",
        				"tags":[
        
        				],
        				"tagsQuery":"",
        				"type":"query",
        				"useTags":false
        			},
        			{
        				"datasource":"default-kubecost",
        				"filters":[
        
        				],
        				"hide":0,
        				"label":"",
        				"name":"Filters",
        				"skipUrlSync":false,
        				"type":"adhoc"
        			}
        		]
        	},
        	"time":{
        		"from":"now-15m",
        		"to":"now"
        	},
        	"timepicker":{
        		"hidden":false,
        		"refresh_intervals":[
        			"5s",
        			"10s",
        			"30s",
        			"1m",
        			"5m",
        			"15m",
        			"30m",
        			"1h",
        			"2h",
        			"1d"
        		],
        		"time_options":[
        			"5m",
        			"15m",
        			"1h",
        			"6h",
        			"12h",
        			"24h",
        			"2d",
        			"7d",
        			"30d"
        		]
        	},
        	"timezone":"browser",
        	"title":"Namespace utilization metrics",
        	"uid":"at-cost-analysis-namespace2",
        	"version":1
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-node-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: node-utilization-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    node-utilization.json: |-
        {
        	"annotations":{
        		"list":[
        			{
        				"builtIn":1,
        				"datasource":"-- Grafana --",
        				"enable":true,
        				"hide":true,
        				"iconColor":"rgba(0, 211, 255, 1)",
        				"name":"Annotations & Alerts",
        				"type":"dashboard"
        			}
        		]
        	},
        	"editable":true,
        	"gnetId":null,
        	"graphTooltip":0,
        	"id":6,
        	"iteration":1557245882378,
        	"links":[
        
        	],
        	"panels":[
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"percentunit",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":true,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":7,
        				"w":8,
        				"x":0,
        				"y":0
        			},
        			"id":2,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"sum(irate(container_cpu_usage_seconds_total{id=\"/\",instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"CPU Usage",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"avg"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"percentunit",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":true,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":7,
        				"w":8,
        				"x":8,
        				"y":0
        			},
        			"id":3,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"SUM(container_memory_usage_bytes{namespace!=\"\",instance=\"$node\"}) / SUM(kube_node_status_capacity_memory_bytes{node=\"$node\"})",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"Memory Usage",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"avg"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"percentunit",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":true,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":7,
        				"w":8,
        				"x":16,
        				"y":0
        			},
        			"id":4,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"sum(container_fs_usage_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\",instance=\"$node\"}) /\nsum(container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\",instance=\"$node\"})",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"Storage Usage",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"avg"
        		},
        		{
        			"columns":[
        				{
        					"text":"Avg",
        					"value":"avg"
        				}
        			],
        			"datasource":"default-kubecost",
        			"fontSize":"100%",
        			"gridPos":{
        				"h":8,
        				"w":16,
        				"x":0,
        				"y":7
        			},
        			"hideTimeOverride":true,
        			"id":21,
        			"links":[
        
        			],
        			"pageSize":8,
        			"repeat":null,
        			"repeatDirection":"v",
        			"scroll":true,
        			"showHeader":true,
        			"sort":{
        				"col":4,
        				"desc":true
        			},
        			"styles":[
        				{
        					"alias":"Pod",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(50, 172, 45, 0.97)",
        						"#c15c17"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"link":false,
        					"linkTooltip":"",
        					"linkUrl":"",
        					"pattern":"pod_name",
        					"thresholds":[
        						"30",
        						"80"
        					],
        					"type":"string",
        					"unit":"currencyUSD"
        				},
        				{
        					"alias":"",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Time",
        					"thresholds":[
        
        					],
        					"type":"hidden",
        					"unit":"short"
        				},
        				{
        					"alias":"CPU Usage",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #C",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"short"
        				},
        				{
        					"alias":"CPU Request",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #A",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"short"
        				},
        				{
        					"alias":"CPU Limit",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #B",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"short"
        				},
        				{
        					"alias":"Mem Usage",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #D",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"bytes"
        				},
        				{
        					"alias":"Mem Request",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #E",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"bytes"
        				},
        				{
        					"alias":"Mem Limit",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #F",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"bytes"
        				}
        			],
        			"targets":[
        				{
        					"expr":"sum(rate(container_cpu_usage_seconds_total{container_name!=\"\",container_name!=\"POD\",pod_name!=\"\",instance=\"$node\"}[24h])) by (pod_name)",
        					"format":"table",
        					"instant":true,
        					"intervalFactor":1,
        					"refId":"C"
        				},
        				{
        					"expr":"sum(label_replace(\nsum(avg_over_time(kube_pod_container_resource_requests_cpu_cores{container!=\"\",container!=\"POD\",node=\"$node\"}[24h])) by (pod), \n\"pod_name\",\"$1\",\"pod\",\"(.+)\")\nor up * 0\n) by (pod_name)",
        					"format":"table",
        					"instant":true,
        					"intervalFactor":1,
        					"refId":"A"
        				},
        				{
        					"expr":"sum(avg_over_time(container_memory_usage_bytes{container_name!=\"\",container_name!=\"POD\",pod_name!=\"\",instance=\"$node\"}[24h])) by (pod_name)\n",
        					"format":"table",
        					"instant":true,
        					"intervalFactor":1,
        					"refId":"D"
        				},
        				{
        					"expr":"sum(label_replace(label_replace(\nsum(avg_over_time(kube_pod_container_resource_requests_memory_bytes{container!=\"\",container!=\"POD\",node=\"$node\"}[24h])) by (pod),\n\"container_name\",\"$1\",\"container\",\"(.+)\"), \"pod_name\",\"$1\",\"pod\",\"(.+)\")\nor up * 0\n) by (pod_name)\n",
        					"format":"table",
        					"instant":true,
        					"intervalFactor":1,
        					"refId":"E"
        				}
        			],
        			"timeFrom":"1M",
        			"timeShift":null,
        			"title":"Current pods",
        			"transform":"table",
        			"transparent":false,
        			"type":"table"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"decimals":0,
        			"format":"none",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":false,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":4,
        				"w":4,
        				"x":16,
        				"y":7
        			},
        			"id":8,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"sum(\n count(avg_over_time(kube_pod_container_resource_requests_cpu_cores{container!=\"\",container!=\"POD\",node=\"$node\"}[24h])) by (pod)\n * on (pod) group_right()\n sum(kube_pod_container_status_running) by (pod)\n)",
        					"format":"time_series",
        					"instant":true,
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"Pods Running",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"current"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"bytes",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":false,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":4,
        				"w":4,
        				"x":20,
        				"y":7
        			},
        			"id":18,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"sum(container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\",instance=\"$node\"})",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"Storage Capacity",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"current"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"none",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":false,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":4,
        				"w":4,
        				"x":16,
        				"y":11
        			},
        			"id":9,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"kube_node_status_capacity_cpu_cores{node=\"$node\"}",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"CPU Capacity",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"avg"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"bytes",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":false,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":4,
        				"w":4,
        				"x":20,
        				"y":11
        			},
        			"id":19,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"kube_node_status_capacity_memory_bytes{node=\"$node\"}",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"RAM Capacity",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"current"
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":3,
        			"description":"This panel shows historical utilization for the node.",
        			"editable":true,
        			"error":false,
        			"fill":0,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":0,
        				"y":15
        			},
        			"height":"",
        			"id":11,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":false,
        				"current":false,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":false,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":true,
        			"targets":[
        				{
        					"expr":"sum(irate(container_cpu_usage_seconds_total{id=\"/\",instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"10s",
        					"intervalFactor":1,
        					"legendFormat":"cpu utilization",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"CPU Utilization",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"decimals":null,
        					"format":"percentunit",
        					"label":"",
        					"logBase":1,
        					"max":"1.1",
        					"min":"0",
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"This panel shows historical utilization for the node.",
        			"editable":true,
        			"error":false,
        			"fill":0,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":12,
        				"y":15
        			},
        			"id":13,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":false,
        				"current":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":false,
        				"sideWidth":200,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":true,
        			"targets":[
        				{
        					"expr":"SUM(container_memory_usage_bytes{namespace!=\"\",instance=\"$node\"}) / SUM(kube_node_status_capacity_memory_bytes{node=\"$node\"})",
        					"format":"time_series",
        					"instant":false,
        					"interval":"10s",
        					"intervalFactor":1,
        					"legendFormat":"ram utilization",
        					"metric":"container_memory_usage:sort_desc",
        					"refId":"A",
        					"step":10
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"RAM Utilization",
        			"tooltip":{
        				"msResolution":false,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"decimals":null,
        					"format":"percentunit",
        					"label":null,
        					"logBase":1,
        					"max":"1.1",
        					"min":"0",
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"Traffic in and out of this namespace, as a sum of the pods within it",
        			"editable":true,
        			"error":false,
        			"fill":1,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":0,
        				"y":21
        			},
        			"height":"",
        			"id":15,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":true,
        				"current":true,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":true,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":false,
        			"targets":[
        				{
        					"expr":"sum (rate (container_network_receive_bytes_total{instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"<- in",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				},
        				{
        					"expr":"- sum (rate (container_network_transmit_bytes_total{instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"-> out",
        					"refId":"B"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Network IO",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"format":"Bps",
        					"label":"",
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"Disk reads and writes for the namespace, as a sum of the pods within it",
        			"editable":true,
        			"error":false,
        			"fill":1,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":12,
        				"y":21
        			},
        			"height":"",
        			"id":17,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":true,
        				"current":true,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":true,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":false,
        			"targets":[
        				{
        					"expr":"sum (rate (container_fs_writes_bytes_total{instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"<- write",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				},
        				{
        					"expr":"- sum (rate (container_fs_reads_bytes_total{instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"-> read",
        					"refId":"B"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Disk IO",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"format":"Bps",
        					"label":"",
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		}
        	],
        	"schemaVersion":16,
        	"style":"dark",
        	"tags":[
        		"cost",
        		"utilization",
        		"metrics"
        	],
        	"templating":{
        		"list":[
        			{
        				"allValue":null,
        				"current":{
        					"text":"ip-172-20-44-170.us-east-2.compute.internal",
        					"value":"ip-172-20-44-170.us-east-2.compute.internal"
        				},
        				"datasource":"default-kubecost",
        				"hide":0,
        				"includeAll":false,
        				"label":null,
        				"multi":false,
        				"name":"node",
        				"options":[
        
        				],
        				"query":"query_result(kube_node_labels)",
        				"refresh":1,
        				"regex":"/node=\\\"(.*?)(\\\")/",
        				"skipUrlSync":false,
        				"sort":0,
        				"tagValuesQuery":"",
        				"tags":[
        
        				],
        				"tagsQuery":"",
        				"type":"query",
        				"useTags":false
        			}
        		]
        	},
        	"time":{
        		"from":"now-6h",
        		"to":"now"
        	},
        	"timepicker":{
        		"refresh_intervals":[
        			"5s",
        			"10s",
        			"30s",
        			"1m",
        			"5m",
        			"15m",
        			"30m",
        			"1h",
        			"2h",
        			"1d"
        		],
        		"time_options":[
        			"5m",
        			"15m",
        			"1h",
        			"6h",
        			"12h",
        			"24h",
        			"2d",
        			"7d",
        			"30d"
        		]
        	},
        	"timezone":"",
        	"title":"Node utilization metrics",
        	"uid":"NUQW37Lmk",
        	"version":1
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-pod-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: pod-utilization-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    pod-utilization.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "description": "Visualize your kubernetes costs at the pod level.",
          "editable": true,
          "gnetId": 9063,
          "graphTooltip": 0,
          "id": 4,
          "iteration": 1560100821196,
          "links": [],
          "panels": [
            {
              "columns": [
                {
                  "text": "Avg",
                  "value": "avg"
                }
              ],
              "datasource": "default-kubecost",
              "fontSize": "100%",
              "gridPos": {
                "h": 5,
                "w": 24,
                "x": 0,
                "y": 0
              },
              "hideTimeOverride": true,
              "id": 98,
              "links": [],
              "pageSize": 5,
              "repeatDirection": "v",
              "scroll": true,
              "showHeader": true,
              "sort": {
                "col": 6,
                "desc": true
              },
              "styles": [
                {
                  "alias": "Container",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(50, 172, 45, 0.97)",
                    "#c15c17"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "link": false,
                  "pattern": "container_name",
                  "thresholds": [
                    "30",
                    "80"
                  ],
                  "type": "string",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "Memory Allocation",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "pattern": "Value #B",
                  "thresholds": [],
                  "type": "number",
                  "unit": "bytes"
                },
                {
                  "alias": "CPU Allocation",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #A",
                  "thresholds": [],
                  "type": "number",
                  "unit": "none"
                },
                {
                  "alias": "",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Time",
                  "thresholds": [],
                  "type": "hidden",
                  "unit": "short"
                },
                {
                  "alias": "Memory ($/hour)",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #C",
                  "thresholds": [],
                  "type": "number",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "Spot/PE RAM",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #D",
                  "thresholds": [],
                  "type": "number",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "Total",
                  "colorMode": null,
                  "colors": [
                    "#bf1b00",
                    "rgba(50, 172, 45, 0.97)",
                    "#ef843c"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #E",
                  "thresholds": [
                    ""
                  ],
                  "type": "number",
                  "unit": "currencyUSD"
                }
              ],
              "targets": [
                {
                  "expr": "sum(\n  avg_over_time(container_memory_allocation_bytes{namespace=\"$namespace\", pod=\"$pod\", container!=\"POD\"}[$__range])\n) by (container,node)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "B"
                },
                {
                  "expr": "sum(\n  avg_over_time(container_cpu_allocation{namespace=\"$namespace\", pod=\"$pod\", container!=\"POD\"}[$__range])\n  or up * 0 \n) by (container,node)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "",
                  "refId": "A"
                }
              ],
              "timeFrom": "1M",
              "timeShift": null,
              "title": "Container cost  & allocation analysis",
              "transform": "table",
              "transparent": false,
              "type": "table"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 3,
              "description": "This graph attempts to show you CPU use of your application vs its requests",
              "editable": true,
              "error": false,
              "fill": 0,
              "grid": {},
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 0,
                "y": 5
              },
              "height": "",
              "id": 94,
              "isNew": true,
              "legend": {
                "alignAsTable": false,
                "avg": false,
                "current": false,
                "hideEmpty": false,
                "hideZero": false,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": true,
              "targets": [
                {
                  "expr": "avg (rate (container_cpu_usage_seconds_total{namespace=~\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\",container_name!=\"\"}[10m])) by (container_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{ container_name }} (usage)",
                  "metric": "container_cpu",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "avg(kube_pod_container_resource_requests_cpu_cores{namespace=~\"$namespace\", pod=\"$pod\", container!=\"POD\"}) by (container)",
                  "format": "time_series",
                  "instant": false,
                  "intervalFactor": 1,
                  "legendFormat": "{{ container}} (request)",
                  "refId": "B"
                }
              ],
              "thresholds": [],
              "timeFrom": "",
              "timeShift": null,
              "title": "CPU Usage vs Requested",
              "tooltip": {
                "msResolution": true,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": "",
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 3,
              "description": "This graph attempts to show you RAM use of your application vs its requests",
              "editable": true,
              "error": false,
              "fill": 0,
              "grid": {},
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 12,
                "y": 5
              },
              "height": "",
              "id": 96,
              "isNew": true,
              "legend": {
                "alignAsTable": false,
                "avg": false,
                "current": false,
                "hideEmpty": false,
                "hideZero": false,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": true,
              "targets": [
                {
                  "expr": "avg (avg_over_time (container_memory_working_set_bytes{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\",container_name!=\"\"}[1m])) by (container_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{ container_name }} (usage)",
                  "metric": "container_cpu",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "avg(kube_pod_container_resource_requests_memory_bytes{namespace=~\"$namespace\", pod=\"$pod\", container!=\"POD\"}) by (container)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "intervalFactor": 1,
                  "legendFormat": "{{ container }} (requested)",
                  "refId": "B"
                }
              ],
              "thresholds": [],
              "timeFrom": "",
              "timeShift": null,
              "title": "RAM Usage vs Requested",
              "tooltip": {
                "msResolution": true,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": "",
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Traffic in and out of this pod, as a sum of its containers",
              "editable": true,
              "error": false,
              "fill": 1,
              "grid": {},
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 0,
                "y": 12
              },
              "height": "",
              "id": 95,
              "isNew": true,
              "legend": {
                "alignAsTable": false,
                "avg": true,
                "current": true,
                "hideEmpty": false,
                "hideZero": false,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "avg (rate (container_network_receive_bytes_total{namespace=\"$namespace\",pod_name=\"$pod\"}[10m])) by (pod_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "<- in",
                  "metric": "container_cpu",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "- avg (rate (container_network_transmit_bytes_total{namespace=\"$namespace\",pod_name=\"$pod\"}[10m])) by (pod_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "-> out",
                  "refId": "B"
                }
              ],
              "thresholds": [],
              "timeFrom": "",
              "timeShift": null,
              "title": "Network IO",
              "tooltip": {
                "msResolution": true,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "Bps",
                  "label": "",
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Disk read writes",
              "editable": true,
              "error": false,
              "fill": 1,
              "grid": {},
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 12,
                "y": 12
              },
              "height": "",
              "id": 97,
              "isNew": true,
              "legend": {
                "alignAsTable": false,
                "avg": true,
                "current": true,
                "hideEmpty": false,
                "hideZero": false,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "avg (rate (container_fs_writes_bytes_total{namespace=\"$namespace\",pod_name=\"$pod\"}[10m])) by (pod_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "<- write",
                  "metric": "container_cpu",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "- avg (rate (container_fs_reads_bytes_total{namespace=\"$namespace\",pod_name=\"$pod\"}[10m])) by (pod_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "-> read",
                  "refId": "B"
                }
              ],
              "thresholds": [],
              "timeFrom": "",
              "timeShift": null,
              "title": "Disk IO",
              "tooltip": {
                "msResolution": true,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "Bps",
                  "label": "",
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "refresh": false,
          "schemaVersion": 16,
          "style": "dark",
          "tags": [
            "cost",
            "utilization",
            "metrics"
          ],
          "templating": {
            "list": [
              {
                "current": {
                  "text": "0.044",
                  "value": "0.044"
                },
                "hide": 0,
                "label": "Storage",
                "name": "costStorageStandard",
                "options": [
                  {
                    "text": "0.044",
                    "value": "0.044"
                  }
                ],
                "query": "0.044",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "current": {
                  "text": "0.187",
                  "value": "0.187"
                },
                "hide": 0,
                "label": "SSD",
                "name": "costStorageSSD",
                "options": [
                  {
                    "text": "0.187",
                    "value": "0.187"
                  }
                ],
                "query": "0.187",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "current": {
                  "text": "30",
                  "value": "30"
                },
                "hide": 0,
                "label": "Disc.",
                "name": "costDiscount",
                "options": [
                  {
                    "text": "30",
                    "value": "30"
                  }
                ],
                "query": "30",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "allValue": null,
                "current": {
                  "selected": false,
                  "text": "kubecost",
                  "value": "kubecost"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": false,
                "label": "NS",
                "multi": false,
                "name": "namespace",
                "options": [],
                "query": "query_result(sum(container_memory_working_set_bytes{namespace!=\"\"}) by (namespace))",
                "refresh": 1,
                "regex": "/namespace=\\\"(.*?)(\\\")/",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": null,
                "current": {
                  "selected": false,
                  "tags": [],
                  "text": "kubecost-grafana-5cc9f5bf6-7kmgl",
                  "value": "kubecost-grafana-5cc9f5bf6-7kmgl"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": false,
                "label": "Pod",
                "multi": false,
                "name": "pod",
                "options": [],
                "query": "query_result(sum(container_memory_working_set_bytes{namespace=\"$namespace\"}) by (pod_name))",
                "refresh": 1,
                "regex": "/pod_name=\\\"(.*?)(\\\")/",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-24h",
            "to": "now"
          },
          "timepicker": {
            "hidden": false,
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "browser",
          "title": "Pod cost & utilization metrics",
          "uid": "at-cost-analysis-pod",
          "version": 1
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-prometheus-metrics-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: prom-benchmark-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    prom-benchmark.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "description": "Metrics useful for benchmarking and loadtesting Prometheus itself. Designed primarily for Prometheus 2.17.x.",
          "editable": true,
          "gnetId": 12054,
          "graphTooltip": 1,
          "id": 9,
          "iteration": 1603144824023,
          "links": [],
          "panels": [
            {
              "collapsed": false,
              "datasource": "default-kubecost",
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 0
              },
              "id": 49,
              "panels": [],
              "title": "Basics",
              "type": "row"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 1
              },
              "hiddenSeries": false,
              "id": 40,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_build_info{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{version}} - {{revision}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Prometheus Version",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 1
              },
              "hiddenSeries": false,
              "id": 72,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "time() - process_start_time_seconds{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "Age",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Uptime",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "dtdurations",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 1
              },
              "hiddenSeries": false,
              "id": 107,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "time() - prometheus_config_last_reload_success_timestamp_seconds{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "Age",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Last Successful Config Reload",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "dtdurations",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": "default-kubecost",
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 8
              },
              "id": 46,
              "panels": [],
              "title": "Ingestion",
              "type": "row"
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833",
                "Time series": "#70dbed"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 9
              },
              "hiddenSeries": false,
              "id": 3,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_tsdb_head_series{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Time series",
                  "metric": "prometheus_local_storage_memory_series",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Head Time series",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 9
              },
              "hiddenSeries": false,
              "id": 26,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_tsdb_head_active_appenders{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Head Appenders",
                  "metric": "prometheus_local_storage_memory_series",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Head Active Appenders",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "samples/s": "#e5a8e2"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 9
              },
              "hiddenSeries": false,
              "id": 1,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_head_samples_appended_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "samples/s",
                  "metric": "prometheus_local_storage_ingested_samples_total",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Samples Appended/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": "",
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833",
                "To persist": "#9AC48A"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 0,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 16
              },
              "hiddenSeries": false,
              "id": 2,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [
                {
                  "alias": "/Max.*/",
                  "fill": 0
                }
              ],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_tsdb_head_chunks{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Chunks",
                  "metric": "prometheus_local_storage_memory_chunks",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Head Chunks",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 16
              },
              "hiddenSeries": false,
              "id": 4,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_head_chunks_created_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Created",
                  "metric": "prometheus_local_storage_chunk_ops_total",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "rate(prometheus_tsdb_head_chunks_removed_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Removed",
                  "metric": "prometheus_local_storage_chunk_ops_total",
                  "refId": "B",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Head Chunks/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "ops",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833",
                "Removed": "#e5ac0e"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 16
              },
              "hiddenSeries": false,
              "id": 25,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_tsdb_isolation_high_watermark{job=\"prometheus\",instance=\"$Prometheus:9090\"} - prometheus_tsdb_isolation_low_watermark{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Difference",
                  "metric": "prometheus_local_storage_chunk_ops_total",
                  "refId": "B",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Isolation Watermarks",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": "default-kubecost",
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 23
              },
              "id": 52,
              "panels": [],
              "title": "Compaction",
              "type": "row"
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max": "#447ebc",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833",
                "Min": "#447ebc",
                "Now": "#7eb26d"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 0,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 24
              },
              "hiddenSeries": false,
              "id": 28,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [
                {
                  "alias": "Max",
                  "fillBelowTo": "Min",
                  "lines": false
                }
              ],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_tsdb_head_min_time{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Min",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "time() * 1000",
                  "format": "time_series",
                  "hide": false,
                  "intervalFactor": 2,
                  "legendFormat": "Now",
                  "refId": "C"
                },
                {
                  "expr": "prometheus_tsdb_head_max_time{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Max",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "B",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Head Time Range",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "decimals": null,
                  "format": "dateTimeAsIso",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 24
              },
              "hiddenSeries": false,
              "id": 29,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_head_gc_duration_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "GC Time/s",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Head GC Time/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 24
              },
              "hiddenSeries": false,
              "id": 14,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [
                {
                  "alias": "Queue length",
                  "yaxis": 2
                }
              ],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_tsdb_blocks_loaded{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Blocks Loaded",
                  "metric": "prometheus_local_storage_indexing_batch_sizes_sum",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Blocks Loaded",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Failed Compactions": "#bf1b00",
                "Failed Reloads": "#bf1b00",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 31
              },
              "hiddenSeries": false,
              "id": 30,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_reloads_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Reloads",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "TSDB Reloads/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Failed Compactions": "#bf1b00",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 31
              },
              "hiddenSeries": false,
              "id": 31,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_wal_fsync_duration_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m]) / rate(prometheus_tsdb_wal_fsync_duration_seconds_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Fsync Latency",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "rate(prometheus_tsdb_wal_truncate_duration_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m]) / rate(prometheus_tsdb_wal_trunacte_duration_seconds_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Truncate Latency",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "B",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "WAL Fsync&Truncate Latency",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Failed Compactions": "#bf1b00",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833",
                "{instance=\"demo.robustperception.io:9090\",job=\"prometheus\"}": "#bf1b00"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 31
              },
              "hiddenSeries": false,
              "id": 32,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_wal_corruptions_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "WAL Corruptions",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "rate(prometheus_tsdb_reloads_failures_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Reload Failures",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "B",
                  "step": 10
                },
                {
                  "expr": "rate(prometheus_tsdb_head_series_not_found{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Head Series Not Found",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "C",
                  "step": 10
                },
                {
                  "expr": "rate(prometheus_tsdb_compactions_failed_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Compaction Failures",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "D",
                  "step": 10
                },
                {
                  "expr": "rate(prometheus_tsdb_retention_cutoffs_failures_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Retention Cutoff Failures",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "E",
                  "step": 10
                },
                {
                  "expr": "rate(prometheus_tsdb_checkpoint_creations_failed_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "WAL Checkpoint Creation Failures",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "F",
                  "step": 10
                },
                {
                  "expr": "rate(prometheus_tsdb_checkpoint_deletions_failed_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "WAL Checkpoint Deletion Failures",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "G",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "TSDB Problems/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Failed Compactions": "#bf1b00",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 38
              },
              "hiddenSeries": false,
              "id": 19,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_compactions_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Compactions",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Compactions/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 38
              },
              "hiddenSeries": false,
              "id": 33,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_compaction_duration_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Compaction Time/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Allocated bytes": "#F9BA8F",
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833",
                "RSS": "#890F02"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 38
              },
              "hiddenSeries": false,
              "id": 8,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_time_retentions_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Time Cutoffs",
                  "metric": "last",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "rate(prometheus_tsdb_size_retentions_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Size Cutoffs",
                  "metric": "last",
                  "refId": "B",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Retention Cutoffs/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 45
              },
              "hiddenSeries": false,
              "id": 27,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_compaction_chunk_range_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m]) / rate(prometheus_tsdb_compaction_chunk_range_seconds_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Chunk Time Range",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "First Compaction, Avg Chunk Time Range",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "decimals": null,
                  "format": "dtdurationms",
                  "label": "",
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 45
              },
              "hiddenSeries": false,
              "id": 35,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_compaction_chunk_size_bytes_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m]) / rate(prometheus_tsdb_compaction_chunk_samples_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Bytes/Sample",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "First Compaction, Avg Bytes/Sample",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "decimals": null,
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 45
              },
              "hiddenSeries": false,
              "id": 34,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_tsdb_compaction_chunk_samples_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m]) / rate(prometheus_tsdb_compaction_chunk_samples_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[10m])",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Chunk Samples",
                  "metric": "prometheus_local_storage_series_chunks_persisted_count",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "First Compaction, Avg Chunk Samples",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "decimals": null,
                  "format": "none",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": "default-kubecost",
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 52
              },
              "id": 55,
              "panels": [],
              "title": "Resource Usage",
              "type": "row"
            },
            {
              "aliasColors": {
                "Allocated bytes": "#7EB26D",
                "Allocated bytes - 1m max": "#BF1B00",
                "Allocated bytes - 1m min": "#BF1B00",
                "Allocated bytes - 5m max": "#BF1B00",
                "Allocated bytes - 5m min": "#BF1B00",
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833",
                "RSS": "#447EBC"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": null,
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 0,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 53
              },
              "hiddenSeries": false,
              "id": 6,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [
                {
                  "alias": "/-/",
                  "fill": 0
                }
              ],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "process_resident_memory_bytes{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "intervalFactor": 2,
                  "legendFormat": "RSS",
                  "metric": "process_resident_memory_bytes",
                  "refId": "B",
                  "step": 10
                },
                {
                  "expr": "prometheus_local_storage_target_heap_size_bytes{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "intervalFactor": 2,
                  "legendFormat": "Target heap size",
                  "metric": "go_memstats_alloc_bytes",
                  "refId": "D",
                  "step": 10
                },
                {
                  "expr": "go_memstats_next_gc_bytes{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "intervalFactor": 2,
                  "legendFormat": "Next GC",
                  "metric": "go_memstats_next_gc_bytes",
                  "refId": "C",
                  "step": 10
                },
                {
                  "expr": "go_memstats_alloc_bytes{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "intervalFactor": 2,
                  "legendFormat": "Allocated",
                  "metric": "go_memstats_alloc_bytes",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Memory",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Allocated bytes": "#F9BA8F",
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833",
                "RSS": "#890F02"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 53
              },
              "hiddenSeries": false,
              "id": 7,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(go_memstats_alloc_bytes_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Allocated Bytes/s",
                  "metric": "go_memstats_alloc_bytes",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Allocations",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 2,
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 53
              },
              "hiddenSeries": false,
              "id": 9,
              "legend": {
                "alignAsTable": false,
                "avg": false,
                "current": false,
                "hideEmpty": false,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "irate(process_cpu_seconds_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])",
                  "intervalFactor": 2,
                  "legendFormat": "Irate",
                  "metric": "prometheus_local_storage_ingested_samples_total",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "rate(process_cpu_seconds_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[5m])",
                  "intervalFactor": 2,
                  "legendFormat": "5m rate",
                  "metric": "prometheus_local_storage_ingested_samples_total",
                  "refId": "B",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "CPU",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [
                  "avg"
                ]
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 2,
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 60
              },
              "hiddenSeries": false,
              "id": 70,
              "legend": {
                "alignAsTable": false,
                "avg": false,
                "current": false,
                "hideEmpty": false,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_tsdb_symbol_table_size_bytes{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "RAM Used",
                  "metric": "prometheus_local_storage_ingested_samples_total",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Symbol Tables Size",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [
                  "avg"
                ]
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 2,
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 60
              },
              "hiddenSeries": false,
              "id": 71,
              "legend": {
                "alignAsTable": false,
                "avg": false,
                "current": false,
                "hideEmpty": false,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_tsdb_storage_blocks_bytes_total{job=\"prometheus\",instance=\"$Prometheus:9090\"} or prometheus_tsdb_storage_blocks_bytes{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Disk Used",
                  "metric": "prometheus_local_storage_ingested_samples_total",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Block Size",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [
                  "avg"
                ]
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Max": "#e24d42",
                "Open": "#508642"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 0,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 60
              },
              "hiddenSeries": false,
              "id": 41,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "process_max_fds{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "Max",
                  "refId": "A"
                },
                {
                  "expr": "process_open_fds{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "Open",
                  "refId": "B"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "File Descriptors",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": "default-kubecost",
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 67
              },
              "id": 91,
              "panels": [],
              "title": "Service Discovery",
              "type": "row"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 68
              },
              "hiddenSeries": false,
              "id": 42,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_sd_discovered_targets{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{name}}-{{config}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Discovered Targets",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 68
              },
              "hiddenSeries": false,
              "id": 96,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_sd_updates_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[5m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{name}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Sent Updates/s",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 68
              },
              "hiddenSeries": false,
              "id": 97,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_sd_received_updates_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[5m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{name}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Received Updates/s",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": "default-kubecost",
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 75
              },
              "id": 99,
              "panels": [],
              "title": "Scraping",
              "type": "row"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 76
              },
              "hiddenSeries": false,
              "id": 105,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": true,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_target_interval_length_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m]) / rate(prometheus_target_interval_length_seconds_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{interval}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Scrape Interval",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 76
              },
              "hiddenSeries": false,
              "id": 104,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": true,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_target_scrapes_exceeded_sample_limit_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "Exceeded Sample Limit",
                  "refId": "A"
                },
                {
                  "expr": "rate(prometheus_target_scrapes_sample_duplicate_timestamp_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "Duplicate Timestamp",
                  "refId": "C"
                },
                {
                  "expr": "rate(prometheus_target_scrapes_sample_out_of_bounds_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "Out Of Bounds ",
                  "refId": "D"
                },
                {
                  "expr": "rate(prometheus_target_scrapes_sample_out_of_order_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "Out of Order",
                  "refId": "E"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Scrape Problems/s",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 76
              },
              "hiddenSeries": false,
              "id": 95,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": true,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_target_metadata_cache_bytes{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{scrape_job}}",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Metadata Cache Size",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": "default-kubecost",
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 83
              },
              "id": 63,
              "panels": [],
              "title": "Query Engine",
              "type": "row"
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "Time spent in each mode, per second",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 84
              },
              "hiddenSeries": false,
              "id": 24,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": true,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_engine_query_duration_seconds_sum{job=\"prometheus\",}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "{{slice}}",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Query engine timings/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 84
              },
              "hiddenSeries": false,
              "id": 22,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_rule_group_iterations_missed_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])  ",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Rule group missed",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "B",
                  "step": 10
                },
                {
                  "expr": "rate(prometheus_rule_evaluation_failures_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Rule evals failed",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "C",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Rule group evaulation problems/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 84
              },
              "hiddenSeries": false,
              "id": 23,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_rule_group_duration_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "Rule evaluation duration",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Evaluation time of rule groups/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": true,
              "datasource": "default-kubecost",
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 91
              },
              "id": 77,
              "panels": [
                {
                  "aliasColors": {
                    "Chunks": "#1F78C1",
                    "Chunks to persist": "#508642",
                    "Max chunks": "#052B51",
                    "Max to persist": "#3F6833"
                  },
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "default-kubecost",
                  "editable": true,
                  "error": false,
                  "fieldConfig": {
                    "defaults": {
                      "custom": {},
                      "links": []
                    },
                    "overrides": []
                  },
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 0,
                    "y": 92
                  },
                  "hiddenSeries": false,
                  "id": 86,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "percentage": false,
                  "pluginVersion": "7.1.1",
                  "pointradius": 5,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "rate(prometheus_notifications_sent_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "{{alertmanager}}",
                      "metric": "prometheus_local_storage_memory_chunkdescs",
                      "refId": "A",
                      "step": 10
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Notification Sent/s",
                  "tooltip": {
                    "msResolution": false,
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": "0",
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {
                    "Chunks": "#1F78C1",
                    "Chunks to persist": "#508642",
                    "Max chunks": "#052B51",
                    "Max to persist": "#3F6833"
                  },
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "default-kubecost",
                  "editable": true,
                  "error": false,
                  "fieldConfig": {
                    "defaults": {
                      "custom": {},
                      "links": []
                    },
                    "overrides": []
                  },
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 8,
                    "y": 92
                  },
                  "hiddenSeries": false,
                  "id": 87,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "percentage": false,
                  "pluginVersion": "7.1.1",
                  "pointradius": 5,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "rate(prometheus_notifications_errors_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m]) / rate(prometheus_notifications_sent_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "{{alertmanager}}",
                      "metric": "prometheus_local_storage_memory_chunkdescs",
                      "refId": "A",
                      "step": 10
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Notification Error Ratio",
                  "tooltip": {
                    "msResolution": false,
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "none",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": "0",
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {
                    "Chunks": "#1F78C1",
                    "Chunks to persist": "#508642",
                    "Max chunks": "#052B51",
                    "Max to persist": "#3F6833"
                  },
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "default-kubecost",
                  "editable": true,
                  "error": false,
                  "fieldConfig": {
                    "defaults": {
                      "custom": {},
                      "links": []
                    },
                    "overrides": []
                  },
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 16,
                    "y": 92
                  },
                  "hiddenSeries": false,
                  "id": 81,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "percentage": false,
                  "pluginVersion": "7.1.1",
                  "pointradius": 5,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "rate(prometheus_notifications_latency_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m]) / rate(prometheus_notifications_latency_seconds_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "{{alertmanager}}",
                      "metric": "prometheus_local_storage_memory_chunkdescs",
                      "refId": "A",
                      "step": 10
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Notification Latency",
                  "tooltip": {
                    "msResolution": false,
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "s",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": "0",
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {
                    "Chunks": "#1F78C1",
                    "Chunks to persist": "#508642",
                    "Max chunks": "#052B51",
                    "Max to persist": "#3F6833"
                  },
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "default-kubecost",
                  "editable": true,
                  "error": false,
                  "fieldConfig": {
                    "defaults": {
                      "custom": {},
                      "links": []
                    },
                    "overrides": []
                  },
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 0,
                    "y": 99
                  },
                  "hiddenSeries": false,
                  "id": 85,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "percentage": false,
                  "pluginVersion": "7.1.1",
                  "pointradius": 5,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "prometheus_notifications_alertmanagers_discovered{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "Alertmanagers",
                      "metric": "prometheus_local_storage_memory_chunkdescs",
                      "refId": "A",
                      "step": 10
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Alertmanagers Discovered",
                  "tooltip": {
                    "msResolution": false,
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "none",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": "0",
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {
                    "Chunks": "#1F78C1",
                    "Chunks to persist": "#508642",
                    "Max chunks": "#052B51",
                    "Max to persist": "#3F6833"
                  },
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "default-kubecost",
                  "editable": true,
                  "error": false,
                  "fieldConfig": {
                    "defaults": {
                      "custom": {},
                      "links": []
                    },
                    "overrides": []
                  },
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 8,
                    "y": 99
                  },
                  "hiddenSeries": false,
                  "id": 89,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "percentage": false,
                  "pluginVersion": "7.1.1",
                  "pointradius": 5,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "rate(prometheus_notifications_dropped_total{job=\"prometheus\",instance=\"$Prometheus:9090\"}[1m])",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "Dropped",
                      "metric": "prometheus_local_storage_memory_chunkdescs",
                      "refId": "A",
                      "step": 10
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Notifications Dropped/s",
                  "tooltip": {
                    "msResolution": false,
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "none",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": "0",
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                },
                {
                  "aliasColors": {
                    "Chunks": "#1F78C1",
                    "Chunks to persist": "#508642",
                    "Max chunks": "#052B51",
                    "Max to persist": "#3F6833"
                  },
                  "bars": false,
                  "dashLength": 10,
                  "dashes": false,
                  "datasource": "default-kubecost",
                  "editable": true,
                  "error": false,
                  "fieldConfig": {
                    "defaults": {
                      "custom": {},
                      "links": []
                    },
                    "overrides": []
                  },
                  "fill": 1,
                  "fillGradient": 0,
                  "gridPos": {
                    "h": 7,
                    "w": 8,
                    "x": 16,
                    "y": 99
                  },
                  "hiddenSeries": false,
                  "id": 88,
                  "legend": {
                    "avg": false,
                    "current": false,
                    "max": false,
                    "min": false,
                    "show": true,
                    "total": false,
                    "values": false
                  },
                  "lines": true,
                  "linewidth": 1,
                  "links": [],
                  "nullPointMode": "null",
                  "percentage": false,
                  "pluginVersion": "7.1.1",
                  "pointradius": 5,
                  "points": false,
                  "renderer": "flot",
                  "seriesOverrides": [],
                  "spaceLength": 10,
                  "stack": false,
                  "steppedLine": false,
                  "targets": [
                    {
                      "expr": "prometheus_notifications_queue_length{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "Pending",
                      "metric": "prometheus_local_storage_memory_chunkdescs",
                      "refId": "A",
                      "step": 10
                    },
                    {
                      "expr": "prometheus_notifications_queue_capacity{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                      "format": "time_series",
                      "interval": "",
                      "intervalFactor": 2,
                      "legendFormat": "Max",
                      "metric": "prometheus_local_storage_memory_chunkdescs",
                      "refId": "B",
                      "step": 10
                    }
                  ],
                  "thresholds": [],
                  "timeFrom": null,
                  "timeRegions": [],
                  "timeShift": null,
                  "title": "Notification Queue",
                  "tooltip": {
                    "msResolution": false,
                    "shared": true,
                    "sort": 0,
                    "value_type": "individual"
                  },
                  "type": "graph",
                  "xaxis": {
                    "buckets": null,
                    "mode": "time",
                    "name": null,
                    "show": true,
                    "values": []
                  },
                  "yaxes": [
                    {
                      "format": "none",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": "0",
                      "show": true
                    },
                    {
                      "format": "short",
                      "label": null,
                      "logBase": 1,
                      "max": null,
                      "min": null,
                      "show": true
                    }
                  ],
                  "yaxis": {
                    "align": false,
                    "alignLevel": null
                  }
                }
              ],
              "title": "Notification",
              "type": "row"
            },
            {
              "collapsed": false,
              "datasource": "default-kubecost",
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 92
              },
              "id": 58,
              "panels": [],
              "title": "HTTP Server",
              "type": "row"
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 0,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 0,
                "y": 93
              },
              "hiddenSeries": false,
              "id": 38,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_http_request_duration_seconds_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "{{handler}}",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "HTTP requests/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 0,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 8,
                "y": 93
              },
              "hiddenSeries": false,
              "id": 37,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_http_request_duration_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m]) / rate(prometheus_http_request_duration_seconds_count{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "{{handler}}",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "HTTP request latency",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 1,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 93
              },
              "hiddenSeries": false,
              "id": 36,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": true,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "rate(prometheus_http_request_duration_seconds_sum{job=\"prometheus\",instance=\"$Prometheus:9090\"}[2m])",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 2,
                  "legendFormat": "{{handler}}",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "Time spent in HTTP requests/s",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": "default-kubecost",
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 100
              },
              "id": 61,
              "panels": [],
              "repeat": "RuleGroup",
              "scopedVars": {
                "RuleGroup": {
                  "selected": false,
                  "text": "/etc/config/rules;CPU",
                  "value": "/etc/config/rules;CPU"
                }
              },
              "title": "Rule Group: $RuleGroup",
              "type": "row"
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Interval": "#890f02",
                "Last Duration": "#f9934e",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 0,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 0,
                "y": 101
              },
              "hiddenSeries": false,
              "id": 43,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "repeat": null,
              "repeatDirection": "h",
              "scopedVars": {
                "RuleGroup": {
                  "selected": false,
                  "text": "/etc/config/rules;CPU",
                  "value": "/etc/config/rules;CPU"
                }
              },
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_rule_group_interval_seconds{job=\"prometheus\",instance=\"$Prometheus:9090\",rule_group=~\"$RuleGroup\"}\n",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Interval",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "prometheus_rule_group_last_duration_seconds{job=\"prometheus\",instance=\"$Prometheus:9090\",rule_group=~\"$RuleGroup\"}\n",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Last Duration",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "B",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "$RuleGroup: Duration",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Interval": "#890f02",
                "Last Duration": "#f9934e",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 0,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 12,
                "y": 101
              },
              "hiddenSeries": false,
              "id": 66,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "repeatDirection": "h",
              "scopedVars": {
                "RuleGroup": {
                  "selected": false,
                  "text": "/etc/config/rules;CPU",
                  "value": "/etc/config/rules;CPU"
                }
              },
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_rule_group_rules{job=\"prometheus\",instance=\"$Prometheus:9090\",rule_group=~\"$RuleGroup\"}\n",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Rules",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "$RuleGroup: Rules",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "decimals": 0,
                  "format": "none",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "collapsed": false,
              "datasource": "default-kubecost",
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 108
              },
              "id": 108,
              "panels": [],
              "repeat": null,
              "repeatIteration": 1603144824023,
              "repeatPanelId": 61,
              "scopedVars": {
                "RuleGroup": {
                  "selected": false,
                  "text": "/etc/config/rules;Savings",
                  "value": "/etc/config/rules;Savings"
                }
              },
              "title": "Rule Group: $RuleGroup",
              "type": "row"
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Interval": "#890f02",
                "Last Duration": "#f9934e",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 0,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 0,
                "y": 109
              },
              "hiddenSeries": false,
              "id": 109,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "repeat": null,
              "repeatDirection": "h",
              "repeatIteration": 1603144824023,
              "repeatPanelId": 43,
              "repeatedByRow": true,
              "scopedVars": {
                "RuleGroup": {
                  "selected": false,
                  "text": "/etc/config/rules;Savings",
                  "value": "/etc/config/rules;Savings"
                }
              },
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_rule_group_interval_seconds{job=\"prometheus\",instance=\"$Prometheus:9090\",rule_group=~\"$RuleGroup\"}\n",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Interval",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "prometheus_rule_group_last_duration_seconds{job=\"prometheus\",instance=\"$Prometheus:9090\",rule_group=~\"$RuleGroup\"}\n",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Last Duration",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "B",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "$RuleGroup: Duration",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "s",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {
                "Chunks": "#1F78C1",
                "Chunks to persist": "#508642",
                "Interval": "#890f02",
                "Last Duration": "#f9934e",
                "Max chunks": "#052B51",
                "Max to persist": "#3F6833"
              },
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "fieldConfig": {
                "defaults": {
                  "custom": {},
                  "links": []
                },
                "overrides": []
              },
              "fill": 0,
              "fillGradient": 0,
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 12,
                "y": 109
              },
              "hiddenSeries": false,
              "id": 110,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pluginVersion": "7.1.1",
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "repeatDirection": "h",
              "repeatIteration": 1603144824023,
              "repeatPanelId": 66,
              "repeatedByRow": true,
              "scopedVars": {
                "RuleGroup": {
                  "selected": false,
                  "text": "/etc/config/rules;Savings",
                  "value": "/etc/config/rules;Savings"
                }
              },
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "prometheus_rule_group_rules{job=\"prometheus\",instance=\"$Prometheus:9090\",rule_group=~\"$RuleGroup\"}\n",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "Rules",
                  "metric": "prometheus_local_storage_memory_chunkdescs",
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeRegions": [],
              "timeShift": null,
              "title": "$RuleGroup: Rules",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "decimals": 0,
                  "format": "none",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "refresh": false,
          "schemaVersion": 26,
          "style": "dark",
          "tags": [],
          "templating": {
            "list": [
              {
                "allValue": null,
                "current": {
                  "selected": false,
                  "text": "localhost",
                  "value": "localhost"
                },
                "datasource": "default-kubecost",
                "definition": "",
                "hide": 0,
                "includeAll": false,
                "label": null,
                "multi": false,
                "name": "Prometheus",
                "options": [],
                "query": "query_result(up{job=\"prometheus\"} == 1)",
                "refresh": 2,
                "regex": ".*instance=\"([^\"]+):9090\".*",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": null,
                "tags": [],
                "tagsQuery": null,
                "type": "query",
                "useTags": false
              },
              {
                "allValue": null,
                "current": {
                  "selected": false,
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "definition": "",
                "hide": 2,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "RuleGroup",
                "options": [],
                "query": "prometheus_rule_group_last_duration_seconds{job=\"prometheus\",instance=\"$Prometheus:9090\"}",
                "refresh": 2,
                "regex": ".*rule_group=\"(.*?)\".*",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-24h",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "utc",
          "title": "Prometheus Benchmark - 2.17.x",
          "uid": "L0HBvojWz",
          "version": 4
        }
---
# Source: cost-analyzer/templates/grafana-datasource-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-datasource
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    kubecost_grafana_datasource: "1"
data:
  datasource.yaml: |-
    apiVersion: 1
    datasources:
    - access: proxy
      name: "default-kubecost"
      isDefault: false
      type: prometheus
      url: http://kubecost-prometheus-server.kubecost
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: "2Gi"
---
# Source: cost-analyzer/charts/prometheus/templates/server-pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: "32Gi"
---
# Source: cost-analyzer/templates/cost-analyzer-pvc-template.yaml
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 32Gi
---
# Source: cost-analyzer/charts/grafana/templates/clusterrole.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
  name: kubecost-grafana-clusterrole
rules:
- apiGroups: [""] # "" indicates the core API group
  resources: ["configmaps"]
  verbs: ["get", "watch", "list"]
---
# Source: cost-analyzer/charts/prometheus/charts/kube-state-metrics/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: kube-state-metrics-2.7.2
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: kubecost
  name: kubecost-kube-state-metrics
rules:

- apiGroups: ["certificates.k8s.io"]
  resources:
  - certificatesigningrequests
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - configmaps
  verbs: ["list", "watch"]

- apiGroups: ["batch"]
  resources:
  - cronjobs
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "apps"]
  resources:
  - daemonsets
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "apps"]
  resources:
  - deployments
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - endpoints
  verbs: ["list", "watch"]

- apiGroups: ["autoscaling"]
  resources:
  - horizontalpodautoscalers
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "networking.k8s.io"]
  resources:
  - ingresses
  verbs: ["list", "watch"]

- apiGroups: ["batch"]
  resources:
  - jobs
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - limitranges
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - namespaces
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - nodes
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - persistentvolumeclaims
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - persistentvolumes
  verbs: ["list", "watch"]

- apiGroups: ["policy"]
  resources:
    - poddisruptionbudgets
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - pods
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "apps"]
  resources:
  - replicasets
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - replicationcontrollers
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - resourcequotas
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - services
  verbs: ["list", "watch"]

- apiGroups: ["apps"]
  resources:
  - statefulsets
  verbs: ["list", "watch"]

- apiGroups: ["storage.k8s.io"]
  resources:
    - storageclasses
  verbs: ["list", "watch"]
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRole
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
rules:
  []
---
# Source: cost-analyzer/charts/prometheus/templates/server-clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRole
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
rules:
  - apiGroups:
      - ""
    resources:
      - nodes
      - nodes/proxy
      - nodes/metrics
      - services
      - endpoints
      - pods
      - ingresses
      - configmaps
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - "extensions"
    resources:
      - ingresses/status
      - ingresses
    verbs:
      - get
      - list
      - watch
  - nonResourceURLs:
      - "/metrics"
    verbs:
      - get
---
# Source: cost-analyzer/templates/cost-analyzer-cluser-role-template.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
rules:
  - apiGroups:
      - ''
    resources:
      - configmaps
      - deployments
      - nodes
      - pods
      - events
      - services
      - resourcequotas
      - replicationcontrollers
      - limitranges
      - persistentvolumeclaims
      - persistentvolumes
      - namespaces
      - endpoints
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - extensions
    resources:
      - daemonsets
      - deployments
      - replicasets
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - apps
    resources:
      - statefulsets
      - deployments
      - daemonsets
      - replicasets
    verbs:
      - list
      - watch
  - apiGroups:
      - batch
    resources:
      - cronjobs
      - jobs
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - autoscaling
    resources:
      - horizontalpodautoscalers
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - policy
    resources:
      - poddisruptionbudgets
    verbs:
      - get
      - list
      - watch
  - apiGroups: 
      - storage.k8s.io
    resources: 
      - storageclasses
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - events.k8s.io
    resources:
      - events
    verbs:
      - get
      - list
      - watch
---
# Source: cost-analyzer/charts/grafana/templates/clusterrolebinding.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: kubecost-grafana-clusterrolebinding
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
subjects:
  - kind: ServiceAccount
    name: kubecost-grafana
    namespace: kubecost
roleRef:
  kind: ClusterRole
  name: kubecost-grafana-clusterrole
  apiGroup: rbac.authorization.k8s.io
---
# Source: cost-analyzer/charts/prometheus/charts/kube-state-metrics/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: kube-state-metrics-2.7.2
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: kubecost
  name: kubecost-kube-state-metrics
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kubecost-kube-state-metrics
subjects:
- kind: ServiceAccount
  name: kubecost-kube-state-metrics
  namespace: kubecost
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
subjects:
  - kind: ServiceAccount
    name: kubecost-prometheus-alertmanager
    namespace: kubecost
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kubecost-prometheus-alertmanager
---
# Source: cost-analyzer/charts/prometheus/templates/server-clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
subjects:
  - kind: ServiceAccount
    name: kubecost-prometheus-server
    namespace: kubecost
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kubecost-prometheus-server
---
# Source: cost-analyzer/templates/cost-analyzer-cluster-role-binding-template.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kubecost-cost-analyzer
subjects:
  - kind: ServiceAccount
    name: kubecost-cost-analyzer
    namespace: kubecost
---
# Source: cost-analyzer/charts/grafana/templates/role.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: Role
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    heritage: Helm
    release: kubecost
rules:
- apiGroups:      ['extensions']
  resources:      ['podsecuritypolicies']
  verbs:          ['use']
  resourceNames:  [kubecost-grafana]
---
# Source: cost-analyzer/templates/cost-analyzer-cluser-role-template.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: kubecost
  name: kubecost-cost-analyzer
rules:
- apiGroups: 
    - ''
  resources:
    - "pods/log"
  verbs:
    - get
    - list
    - watch
---
# Source: cost-analyzer/templates/cost-analyzer-psp-role.template.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: kubecost-cost-analyzer-psp
  annotations:
rules:
- apiGroups: ['extensions']
  resources: ['podsecuritypolicies']
  verbs: ['use']
  resourceNames:
  - kubecost-cost-analyzer-psp
---
# Source: cost-analyzer/charts/grafana/templates/rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: RoleBinding
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    heritage: Helm
    release: kubecost
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: kubecost-grafana
subjects:
- kind: ServiceAccount
  name: kubecost-grafana
---
# Source: cost-analyzer/templates/cost-analyzer-cluster-role-binding-template.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: kubecost-cost-analyzer
subjects:
  - kind: ServiceAccount
    name: kubecost-cost-analyzer
    namespace: kubecost
---
# Source: cost-analyzer/templates/cost-analyzer-psp-rolebinding.template.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
    name: kubecost-cost-analyzer-psp
roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: kubecost-cost-analyzer-psp
subjects:
- kind: ServiceAccount
  name: kubecost-cost-analyzer
  namespace: kubecost
---
# Source: cost-analyzer/charts/grafana/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
spec:
  type: ClusterIP
  ports:
    - name: service
      port: 80
      protocol: TCP
      targetPort: 3000

  selector:
    app: grafana
    release: kubecost
---
# Source: cost-analyzer/charts/prometheus/charts/kube-state-metrics/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: kubecost-kube-state-metrics
  namespace: kubecost
  labels:
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: "kube-state-metrics-2.7.2"
    app.kubernetes.io/instance: "kubecost"
    app.kubernetes.io/managed-by: "Helm"
  annotations:
    prometheus.io/scrape: 'true'
spec:
  type: "ClusterIP"
  ports:
  - name: "http"
    protocol: TCP
    port: 8080
    targetPort: 8080
  selector:
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/instance: kubecost
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
spec:
  ports:
    - name: http
      port: 80
      protocol: TCP
      targetPort: 9093
  selector:
    component: "alertmanager"
    app: prometheus
    release: kubecost
  sessionAffinity: None
  type: "ClusterIP"
---
# Source: cost-analyzer/charts/prometheus/templates/node-exporter-service.yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    prometheus.io/scrape: "true"
  labels:
    component: "node-exporter"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-node-exporter
spec:
  clusterIP: None
  ports:
    - name: metrics
      port: 9100
      protocol: TCP
      targetPort: 9100
  selector:
    component: "node-exporter"
    app: prometheus
    release: kubecost
  type: "ClusterIP"
---
# Source: cost-analyzer/charts/prometheus/templates/server-service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
spec:
  ports:
    - name: http
      port: 80
      protocol: TCP
      targetPort: 9090
  selector:
    component: "server"
    app: prometheus
    release: kubecost
  sessionAffinity: None
  type: "ClusterIP"
---
# Source: cost-analyzer/templates/cost-analyzer-service-template.yaml
kind: Service
apiVersion: v1
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
spec:
  selector:
    
    app.kubernetes.io/name: cost-analyzer
    app.kubernetes.io/instance: kubecost
    app: cost-analyzer
  type: "ClusterIP"
  ports:
    - name: server
      port: 9001
      targetPort: 9001
    - name: model
      port: 9003
      targetPort: 9003
    - name: frontend
      port: 9090
      targetPort: 9090
---
# Source: cost-analyzer/charts/prometheus/templates/node-exporter-daemonset.yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  labels:
    component: "node-exporter"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-node-exporter
spec:
  selector:
    matchLabels:
      component: "node-exporter"
      app: prometheus
      release: kubecost
  updateStrategy:
    type: RollingUpdate
  template:
    metadata:
      labels:
        component: "node-exporter"
        app: prometheus
        release: kubecost
        chart: prometheus-11.0.2
        heritage: Helm
    spec:
      serviceAccountName: kubecost-prometheus-node-exporter
      containers:
        - name: prometheus-node-exporter
          image: "prom/node-exporter:v0.18.1"
          imagePullPolicy: "IfNotPresent"
          args:
            - --path.procfs=/host/proc
            - --path.sysfs=/host/sys
            - --web.listen-address=:9100
          ports:
            - name: metrics
              containerPort: 9100
              hostPort: 9100
          resources:
            {}
          volumeMounts:
            - name: proc
              mountPath: /host/proc
              readOnly:  true
            - name: sys
              mountPath: /host/sys
              readOnly: true
      hostNetwork: true
      hostPID: true
      volumes:
        - name: proc
          hostPath:
            path: /proc
        - name: sys
          hostPath:
            path: /sys
---
# Source: cost-analyzer/charts/grafana/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: grafana
      release: kubecost
  strategy:
    type: RollingUpdate    
  template:
    metadata:
      labels:
        app: grafana
        release: kubecost
    spec:
      serviceAccountName: kubecost-grafana
      securityContext:
        fsGroup: 472
        runAsUser: 472
      containers:
        - name: grafana-sc-dashboard
          image: "kiwigrid/k8s-sidecar:0.1.144"
          imagePullPolicy: IfNotPresent
          env:
            - name: LABEL
              value: "grafana_dashboard"
            - name: FOLDER
              value: "/tmp/dashboards"
          resources:
            null
          volumeMounts:
            - name: sc-dashboard-volume
              mountPath: "/tmp/dashboards"
        - name: grafana-sc-datasources
          image: "kiwigrid/k8s-sidecar:0.1.144"
          imagePullPolicy: IfNotPresent
          env:
            - name: LABEL
              value: "kubecost_grafana_datasource"
            - name: FOLDER
              value: "/etc/grafana/provisioning/datasources"
          resources:
            null
          volumeMounts:
            - name: sc-datasources-volume
              mountPath: "/etc/grafana/provisioning/datasources"
        - name: grafana
          image: "grafana/grafana:7.1.1"
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: config
              mountPath: "/etc/grafana/grafana.ini"
              subPath: grafana.ini
            - name: ldap
              mountPath: "/etc/grafana/ldap.toml"
              subPath: ldap.toml
            - name: sc-dashboard-volume
              mountPath: "/tmp/dashboards"
            - name: sc-dashboard-provider
              mountPath: "/etc/grafana/provisioning/dashboards/sc-dashboardproviders.yaml"
              subPath: provider.yaml
            - name: sc-datasources-volume
              mountPath: "/etc/grafana/provisioning/datasources"
            - name: storage
              mountPath: "/var/lib/grafana"
              subPath: 
          ports:
            - name: service
              containerPort: 80
              protocol: TCP
            - name: grafana
              containerPort: 3000
              protocol: TCP
          env:
            - name: GF_SECURITY_ADMIN_USER
              valueFrom:
                secretKeyRef:
                  name: kubecost-grafana
                  key: admin-user
            - name: GF_SECURITY_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: kubecost-grafana
                  key: admin-password
          livenessProbe:
            failureThreshold: 10
            httpGet:
              path: /api/health
              port: 3000
            initialDelaySeconds: 60
            timeoutSeconds: 30
          readinessProbe:
            httpGet:
              path: /api/health
              port: 3000
          resources:
            {}
      volumes:
        - name: config
          configMap:
            name: kubecost-grafana
        - name: ldap
          secret:
            secretName: kubecost-grafana
            items:
              - key: ldap-toml
                path: ldap.toml
        - name: storage
          emptyDir: {}
        - name: sc-dashboard-volume
          emptyDir: {}
        - name: sc-dashboard-provider
          configMap:
            name: kubecost-grafana-config-dashboards
        - name: sc-datasources-volume
          emptyDir: {}
---
# Source: cost-analyzer/charts/prometheus/charts/kube-state-metrics/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kubecost-kube-state-metrics
  namespace: kubecost
  labels:
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: "kube-state-metrics-2.7.2"
    app.kubernetes.io/instance: "kubecost"
    app.kubernetes.io/managed-by: "Helm"
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: kube-state-metrics
  replicas: 1
  template:
    metadata:
      labels:
        app.kubernetes.io/name: kube-state-metrics
        app.kubernetes.io/instance: "kubecost"
    spec:
      hostNetwork: false
      serviceAccountName: kubecost-kube-state-metrics
      securityContext:
        fsGroup: 65534
        runAsUser: 65534
      containers:
      - name: kube-state-metrics
        args:

        - --collectors=certificatesigningrequests


        - --collectors=configmaps


        - --collectors=cronjobs


        - --collectors=daemonsets


        - --collectors=deployments


        - --collectors=endpoints


        - --collectors=horizontalpodautoscalers


        - --collectors=ingresses


        - --collectors=jobs


        - --collectors=limitranges



        - --collectors=namespaces



        - --collectors=nodes


        - --collectors=persistentvolumeclaims


        - --collectors=persistentvolumes


        - --collectors=poddisruptionbudgets


        - --collectors=pods


        - --collectors=replicasets


        - --collectors=replicationcontrollers


        - --collectors=resourcequotas



        - --collectors=services


        - --collectors=statefulsets


        - --collectors=storageclasses






        imagePullPolicy: IfNotPresent
        image: "quay.io/coreos/kube-state-metrics:v1.9.5"
        ports:
        - containerPort: 8080
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8080
          initialDelaySeconds: 5
          timeoutSeconds: 5
        readinessProbe:
          httpGet:
            path: /
            port: 8080
          initialDelaySeconds: 5
          timeoutSeconds: 5
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
spec:
  selector:
    matchLabels:
      component: "alertmanager"
      app: prometheus
      release: kubecost
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        component: "alertmanager"
        app: prometheus
        release: kubecost
        chart: prometheus-11.0.2
        heritage: Helm
    spec:
      serviceAccountName: kubecost-prometheus-alertmanager
      containers:
        - name: prometheus-alertmanager
          image: "prom/alertmanager:v0.20.0"
          imagePullPolicy: "IfNotPresent"
          env:
            - name: POD_IP
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: status.podIP
          args:
            - --config.file=/etc/config/alertmanager.yml
            - --storage.path=/data
            - --cluster.advertise-address=$(POD_IP):6783
            - --web.external-url=http://localhost:9093

          ports:
            - containerPort: 9093
          readinessProbe:
            httpGet:
              path: /-/ready
              port: 9093
            initialDelaySeconds: 30
            timeoutSeconds: 30
          resources:
            {}
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
            - name: storage-volume
              mountPath: "/data"
              subPath: ""
        - name: prometheus-alertmanager-configmap-reload
          image: "jimmidyson/configmap-reload:v0.3.0"
          imagePullPolicy: "IfNotPresent"
          args:
            - --volume-dir=/etc/config
            - --webhook-url=http://127.0.0.1:9093/-/reload
          resources:
            {}
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
              readOnly: true
      securityContext:
        fsGroup: 1001
        runAsGroup: 1001
        runAsNonRoot: true
        runAsUser: 1001
      volumes:
        - name: config-volume
          configMap:
            name: kubecost-prometheus-alertmanager
        - name: storage-volume
          persistentVolumeClaim:
            claimName: kubecost-prometheus-alertmanager
---
# Source: cost-analyzer/charts/prometheus/templates/server-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
spec:
  selector:
    matchLabels:
      component: "server"
      app: prometheus
      release: kubecost
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        component: "server"
        app: prometheus
        release: kubecost
        chart: prometheus-11.0.2
        heritage: Helm
    spec:
      serviceAccountName: kubecost-prometheus-server
      containers:
        - name: prometheus-server-configmap-reload
          image: "jimmidyson/configmap-reload:v0.3.0"
          imagePullPolicy: "IfNotPresent"
          args:
            - --volume-dir=/etc/config
            - --webhook-url=http://127.0.0.1:9090/-/reload
          resources:
            {}
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
              readOnly: true

        - name: prometheus-server
          image: "prom/prometheus:v2.17.2"
          imagePullPolicy: "IfNotPresent"
          args:
            - --storage.tsdb.retention.time=15d
            - --config.file=/etc/config/prometheus.yml
            - --storage.tsdb.path=/data
            - --web.console.libraries=/etc/prometheus/console_libraries
            - --web.console.templates=/etc/prometheus/consoles
            - --web.enable-lifecycle
            - --query.max-concurrency=1
            - --query.max-samples=1e+08
          ports:
            - containerPort: 9090
          readinessProbe:
            httpGet:
              path: /-/ready
              port: 9090
            initialDelaySeconds: 30
            timeoutSeconds: 30
            failureThreshold: 3
            successThreshold: 1
          livenessProbe:
            httpGet:
              path: /-/healthy
              port: 9090
            initialDelaySeconds: 30
            timeoutSeconds: 30
            failureThreshold: 3
            successThreshold: 1
          resources:
            {}
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
            - name: storage-volume
              mountPath: /data
              subPath: ""
      securityContext:
        fsGroup: 1001
        runAsGroup: 1001
        runAsNonRoot: true
        runAsUser: 1001
      terminationGracePeriodSeconds: 300
      volumes:
        - name: config-volume
          configMap:
            name: kubecost-prometheus-server
        - name: storage-volume
          persistentVolumeClaim:
            claimName: kubecost-prometheus-server
---
# Source: cost-analyzer/templates/cost-analyzer-deployment-template.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
spec:
  replicas: 1
  selector:
    matchLabels:

        app.kubernetes.io/name: cost-analyzer
        app.kubernetes.io/instance: kubecost
        app: cost-analyzer
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      labels:
        
        app.kubernetes.io/name: cost-analyzer
        app.kubernetes.io/instance: kubecost
        app: cost-analyzer
    spec:
      securityContext:
        runAsUser: 1001
        runAsGroup: 1001
        fsGroup: 1001
      restartPolicy: Always
      serviceAccountName: kubecost-cost-analyzer
      volumes:
        - name: nginx-conf
          configMap:
            name: nginx-conf
            items:
              - key: nginx.conf
                path: default.conf
        - name: persistent-configs
          persistentVolumeClaim:
            claimName: kubecost-cost-analyzer
      initContainers:
      containers:
        - image: gcr.io/kubecost1/cost-model:prod-1.74.0
        
          name: cost-model
          imagePullPolicy: Always
          resources:
            requests:
              cpu: 200m
              memory: 55Mi
          readinessProbe:
            httpGet:
              path: /healthz
              port: 9003
            initialDelaySeconds: 30
            periodSeconds: 10
            failureThreshold: 200
          volumeMounts:
            - name: persistent-configs
              mountPath: /var/configs
          env:
            - name: READ_ONLY
              value: "false"
            - name: PROMETHEUS_SERVER_ENDPOINT
              valueFrom:
                configMapKeyRef:
                  name: kubecost-cost-analyzer
                  key: prometheus-server-endpoint
            - name: CLOUD_PROVIDER_API_KEY
              value: "AIzaSyDXQPG_MHUEy9neR7stolq6l0ujXmjJlvk" # The GCP Pricing API requires a key.
            - name: GOOGLE_APPLICATION_CREDENTIALS
              value: /var/configs/key.json
            - name: CONFIG_PATH
              value: /var/configs/
            - name: DB_PATH
              value: /var/db/
            - name: CLUSTER_PROFILE
              value: production
            - name: REMOTE_WRITE_PASSWORD
              value: admin
            - name: GOGC
              value: "60"
            - name: GODEBUG
              value: "madvdontneed=1"
            - name: LOG_COLLECTION_ENABLED
              value: "true"
            - name: PRODUCT_ANALYTICS_ENABLED
              value: "true"
            - name: ERROR_REPORTING_ENABLED
              value: "true"
            - name: VALUES_REPORTING_ENABLED
              value: "true"
            - name: SENTRY_DSN
              value: "https://71964476292e4087af8d5072afe43abd@o394722.ingest.sentry.io/5245431"
            - name: OUT_OF_CLUSTER_PROM_METRICS_ENABLED
              value: "false"
            - name: CACHE_WARMING_ENABLED
              value: "true"
            - name: SAVINGS_CACHE_WARMING_ENABLED
              value: "true"
            - name: ETL_ENABLED
              value: "true"
            - name: ETL_TO_DISK_ENABLED
              value: "true"
            - name : ETL_CLOUD_ASSETS_ENABLED
              value: "true"
            - name: DIAGNOSTIC_ALERT_ENABLED
              value: "false"
            - name: ETL_STORE_DURATION_DAYS
              value: "90"
            - name: PV_ENABLED
              value: "true"
            - name: MAX_QUERY_CONCURRENCY
              value: "5"
            - name: UTC_OFFSET
              value: "+00:00"
            - name: CLUSTER_ID
              value: cluster-one
            - name: SQL_ADDRESS
              value: pgprometheus
            - name: RELEASE_NAME
              value: kubecost
            - name: KUBECOST_NAMESPACE
              value: kubecost
            - name: KUBECOST_TOKEN
              valueFrom:
                configMapKeyRef:
                  name: kubecost-cost-analyzer
                  key: kubecost-token
            - name: CUSTOM_ALERTS_ENABLED
              value: "false"
        - image: gcr.io/kubecost1/frontend:prod-1.74.0
        
          env:
            - name: GET_HOSTS_FROM
              value: dns
          name: cost-analyzer-frontend
          volumeMounts:
            - name: nginx-conf
              mountPath: /etc/nginx/conf.d/
          resources:
            requests:
              cpu: 10m
              memory: 55Mi
          imagePullPolicy: Always
          readinessProbe:
            httpGet:
              path: /healthz
              port: 9003
            initialDelaySeconds: 30
            periodSeconds: 10
            failureThreshold: 200
        - image: gcr.io/kubecost1/server:prod-1.74.0
        
          resources:
            requests:
              cpu: 100m
              memory: 55Mi
          name: cost-analyzer-server
          readinessProbe:
            httpGet:
              path: /healthz
              port: 9003
            initialDelaySeconds: 30
            periodSeconds: 10
            failureThreshold: 200
          volumeMounts:
            - name: persistent-configs
              mountPath: /var/configs
          env:
            - name: PROMETHEUS_SERVER_ENDPOINT
              valueFrom:
                configMapKeyRef:
                  name: kubecost-cost-analyzer
                  key: prometheus-server-endpoint
            - name: HELM_VALUES
              value: eyJhZmZpbml0eSI6e30sImdsb2JhbCI6eyJncmFmYW5hIjp7ImRvbWFpbk5hbWUiOiJjb3N0LWFuYWx5emVyLWdyYWZhbmEuZGVmYXVsdC5zdmMiLCJlbmFibGVkIjp0cnVlLCJwcm94eSI6dHJ1ZSwic2NoZW1lIjoiaHR0cCJ9LCJub3RpZmljYXRpb25zIjp7fSwicG9kQW5ub3RhdGlvbnMiOnt9LCJwcm9tZXRoZXVzIjp7ImVuYWJsZWQiOnRydWUsImZxZG4iOiJodHRwOi8vY29zdC1hbmFseXplci1wcm9tZXRoZXVzLXNlcnZlci5kZWZhdWx0LnN2YyJ9fSwiZ3JhZmFuYSI6eyJhZG1pblBhc3N3b3JkIjoic3Ryb25ncGFzc3dvcmQiLCJhZG1pblVzZXIiOiJhZG1pbiIsImFmZmluaXR5Ijp7fSwiZGFzaGJvYXJkUHJvdmlkZXJzIjp7fSwiZGFzaGJvYXJkcyI6e30sImRhc2hib2FyZHNDb25maWdNYXBzIjp7fSwiZGF0YXNvdXJjZXMiOnt9LCJkZXBsb3ltZW50U3RyYXRlZ3kiOiJSb2xsaW5nVXBkYXRlIiwiZG93bmxvYWREYXNoYm9hcmRzSW1hZ2UiOnsicHVsbFBvbGljeSI6IklmTm90UHJlc2VudCIsInJlcG9zaXRvcnkiOiJhcHByb3ByaWF0ZS9jdXJsIiwidGFnIjoibGF0ZXN0In0sImVudiI6e30sImVudkZyb21TZWNyZXQiOiIiLCJleHRyYVNlY3JldE1vdW50cyI6W10sImdsb2JhbCI6eyJncmFmYW5hIjp7ImRvbWFpbk5hbWUiOiJjb3N0LWFuYWx5emVyLWdyYWZhbmEuZGVmYXVsdC5zdmMiLCJlbmFibGVkIjp0cnVlLCJwcm94eSI6dHJ1ZSwic2NoZW1lIjoiaHR0cCJ9LCJub3RpZmljYXRpb25zIjp7fSwicG9kQW5ub3RhdGlvbnMiOnt9LCJwcm9tZXRoZXVzIjp7ImVuYWJsZWQiOnRydWUsImZxZG4iOiJodHRwOi8vY29zdC1hbmFseXplci1wcm9tZXRoZXVzLXNlcnZlci5kZWZhdWx0LnN2YyJ9fSwiZ3JhZmFuYS5pbmkiOnsiYW5hbHl0aWNzIjp7ImNoZWNrX2Zvcl91cGRhdGVzIjp0cnVlfSwiYXV0aC5hbm9ueW1vdXMiOnsiZW5hYmxlZCI6dHJ1ZSwib3JnX25hbWUiOiJNYWluIE9yZy4iLCJvcmdfcm9sZSI6IkVkaXRvciJ9LCJncmFmYW5hX25ldCI6eyJ1cmwiOiJodHRwczovL2dyYWZhbmEubmV0In0sImxvZyI6eyJtb2RlIjoiY29uc29sZSJ9LCJwYXRocyI6eyJkYXRhIjoiL3Zhci9saWIvZ3JhZmFuYS9kYXRhIiwibG9ncyI6Ii92YXIvbG9nL2dyYWZhbmEiLCJwbHVnaW5zIjoiL3Zhci9saWIvZ3JhZmFuYS9wbHVnaW5zIiwicHJvdmlzaW9uaW5nIjoiL2V0Yy9ncmFmYW5hL3Byb3Zpc2lvbmluZyJ9LCJzZXJ2ZXIiOnsicm9vdF91cmwiOiIlKHByb3RvY29sKXM6Ly8lKGRvbWFpbilzOiUoaHR0cF9wb3J0KXMvZ3JhZmFuYSJ9fSwiaW1hZ2UiOnsicHVsbFBvbGljeSI6IklmTm90UHJlc2VudCIsInJlcG9zaXRvcnkiOiJncmFmYW5hL2dyYWZhbmEiLCJ0YWciOiI3LjEuMSJ9LCJsZGFwIjp7ImNvbmZpZyI6IiIsImV4aXN0aW5nU2VjcmV0IjoiIn0sImxpdmVuZXNzUHJvYmUiOnsiZmFpbHVyZVRocmVzaG9sZCI6MTAsImh0dHBHZXQiOnsicGF0aCI6Ii9hcGkvaGVhbHRoIiwicG9ydCI6MzAwMH0sImluaXRpYWxEZWxheVNlY29uZHMiOjYwLCJ0aW1lb3V0U2Vjb25kcyI6MzB9LCJub2RlU2VsZWN0b3IiOnt9LCJwbHVnaW5zIjpbXSwicmJhYyI6eyJjcmVhdGUiOnRydWUsInBzcEVuYWJsZWQiOnRydWUsInBzcFVzZUFwcEFybW9yIjp0cnVlfSwicmVhZGluZXNzUHJvYmUiOnsiaHR0cEdldCI6eyJwYXRoIjoiL2FwaS9oZWFsdGgiLCJwb3J0IjozMDAwfX0sInJlcGxpY2FzIjoxLCJyZXNvdXJjZXMiOnt9LCJzZWN1cml0eUNvbnRleHQiOnsiZnNHcm91cCI6NDcyLCJydW5Bc1VzZXIiOjQ3Mn0sInNlcnZpY2UiOnsiYW5ub3RhdGlvbnMiOnt9LCJsYWJlbHMiOnt9LCJwb3J0Ijo4MCwidHlwZSI6IkNsdXN0ZXJJUCJ9LCJzZXJ2aWNlQWNjb3VudCI6eyJjcmVhdGUiOnRydWV9LCJzaWRlY2FyIjp7ImRhc2hib2FyZHMiOnsiZW5hYmxlZCI6dHJ1ZSwiZm9sZGVyIjoiL3RtcC9kYXNoYm9hcmRzIiwibGFiZWwiOiJncmFmYW5hX2Rhc2hib2FyZCJ9LCJkYXRhc291cmNlcyI6eyJkYXRhU291cmNlTmFtZSI6ImRlZmF1bHQta3ViZWNvc3QiLCJkZWZhdWx0RGF0YXNvdXJjZUVuYWJsZWQiOmZhbHNlLCJlbmFibGVkIjp0cnVlLCJsYWJlbCI6Imt1YmVjb3N0X2dyYWZhbmFfZGF0YXNvdXJjZSJ9LCJpbWFnZSI6Imtpd2lncmlkL2s4cy1zaWRlY2FyOjAuMS4xNDQiLCJpbWFnZVB1bGxQb2xpY3kiOiJJZk5vdFByZXNlbnQiLCJyZXNvdXJjZXMiOm51bGx9LCJzbXRwIjp7ImV4aXN0aW5nU2VjcmV0IjoiIn0sInRvbGVyYXRpb25zIjpbXX0sImluaXRDaG93bkRhdGEiOnsicmVzb3VyY2VzIjp7fX0sImluaXRDaG93bkRhdGFJbWFnZSI6ImJ1c3lib3giLCJrdWJlY29zdCI6eyJpbWFnZSI6Imdjci5pby9rdWJlY29zdDEvc2VydmVyIiwicmVzb3VyY2VzIjp7InJlcXVlc3RzIjp7ImNwdSI6IjEwMG0iLCJtZW1vcnkiOiI1NU1pIn19fSwia3ViZWNvc3RDaGVja3MiOnsiZW5hYmxlZCI6dHJ1ZSwiaW1hZ2UiOiJxdWF5LmlvL2t1YmVjb3N0MS9jaGVja3MiLCJyZXNvdXJjZXMiOnsibGltaXRzIjp7ImNwdSI6IjEwMG0iLCJtZW1vcnkiOiIyMDBNaSJ9LCJyZXF1ZXN0cyI6eyJjcHUiOiIyMG0iLCJtZW1vcnkiOiIxMDBNaSJ9fX0sImt1YmVjb3N0RGVwbG95bWVudCI6eyJyZXBsaWNhcyI6MX0sImt1YmVjb3N0RnJvbnRlbmQiOnsiaW1hZ2UiOiJnY3IuaW8va3ViZWNvc3QxL2Zyb250ZW5kIiwiaW1hZ2VQdWxsUG9saWN5IjoiQWx3YXlzIiwicmVzb3VyY2VzIjp7InJlcXVlc3RzIjp7ImNwdSI6IjEwbSIsIm1lbW9yeSI6IjU1TWkifX19LCJrdWJlY29zdE1vZGVsIjp7ImV0bCI6dHJ1ZSwiZXRsU3RvcmVEdXJhdGlvbkRheXMiOjkwLCJpbWFnZSI6Imdjci5pby9rdWJlY29zdDEvY29zdC1tb2RlbCIsImltYWdlUHVsbFBvbGljeSI6IkFsd2F5cyIsIm1heFF1ZXJ5Q29uY3VycmVuY3kiOjUsIm91dE9mQ2x1c3RlclByb21NZXRyaWNzRW5hYmxlZCI6ZmFsc2UsInJlc291cmNlcyI6eyJyZXF1ZXN0cyI6eyJjcHUiOiIyMDBtIiwibWVtb3J5IjoiNTVNaSJ9fSwidXRjT2Zmc2V0IjoiKzAwOjAwIiwid2FybUNhY2hlIjp0cnVlLCJ3YXJtU2F2aW5nc0NhY2hlIjp0cnVlfSwibm9kZVNlbGVjdG9yIjp7fSwicGVyc2lzdGVudFZvbHVtZSI6eyJkYlNpemUiOiIzMi4wR2kiLCJlbmFibGVkIjp0cnVlLCJzaXplIjoiMzJHaSJ9LCJwb2RTZWN1cml0eVBvbGljeSI6eyJlbmFibGVkIjp0cnVlfSwicHJvbWV0aGV1cyI6eyJhbGVydFJlbGFiZWxDb25maWdzIjpudWxsLCJhbGVydG1hbmFnZXIiOnsiYWZmaW5pdHkiOnt9LCJiYXNlVVJMIjoiaHR0cDovL2xvY2FsaG9zdDo5MDkzIiwiY29uZmlnRmlsZU5hbWUiOiJhbGVydG1hbmFnZXIueW1sIiwiY29uZmlnRnJvbVNlY3JldCI6IiIsImNvbmZpZ01hcE92ZXJyaWRlTmFtZSI6IiIsImVuYWJsZWQiOnRydWUsImV4dHJhQXJncyI6e30sImV4dHJhRW52Ijp7fSwiZXh0cmFTZWNyZXRNb3VudHMiOltdLCJpbWFnZSI6eyJwdWxsUG9saWN5IjoiSWZOb3RQcmVzZW50IiwicmVwb3NpdG9yeSI6InByb20vYWxlcnRtYW5hZ2VyIiwidGFnIjoidjAuMjAuMCJ9LCJuYW1lIjoiYWxlcnRtYW5hZ2VyIiwibm9kZVNlbGVjdG9yIjp7fSwicGVyc2lzdGVudFZvbHVtZSI6eyJhY2Nlc3NNb2RlcyI6WyJSZWFkV3JpdGVPbmNlIl0sImFubm90YXRpb25zIjp7fSwiZW5hYmxlZCI6dHJ1ZSwiZXhpc3RpbmdDbGFpbSI6IiIsIm1vdW50UGF0aCI6Ii9kYXRhIiwic2l6ZSI6IjJHaSIsInN1YlBhdGgiOiIifSwicG9kQW5ub3RhdGlvbnMiOnt9LCJwb2RMYWJlbHMiOnt9LCJwb2RTZWN1cml0eVBvbGljeSI6eyJhbm5vdGF0aW9ucyI6e319LCJwcmVmaXhVUkwiOiIiLCJwcmlvcml0eUNsYXNzTmFtZSI6IiIsInJlcGxpY2FDb3VudCI6MSwicmVzb3VyY2VzIjp7fSwic2VjdXJpdHlDb250ZXh0Ijp7ImZzR3JvdXAiOjEwMDEsInJ1bkFzR3JvdXAiOjEwMDEsInJ1bkFzTm9uUm9vdCI6dHJ1ZSwicnVuQXNVc2VyIjoxMDAxfSwic2VydmljZSI6eyJhbm5vdGF0aW9ucyI6e30sImNsdXN0ZXJJUCI6IiIsImV4dGVybmFsSVBzIjpbXSwibGFiZWxzIjp7fSwibG9hZEJhbGFuY2VySVAiOiIiLCJsb2FkQmFsYW5jZXJTb3VyY2VSYW5nZXMiOltdLCJzZXJ2aWNlUG9ydCI6ODAsInNlc3Npb25BZmZpbml0eSI6Ik5vbmUiLCJ0eXBlIjoiQ2x1c3RlcklQIn0sInN0cmF0ZWd5Ijp7InR5cGUiOiJSZWNyZWF0ZSJ9LCJ0b2xlcmF0aW9ucyI6W119LCJhbGVydG1hbmFnZXJGaWxlcyI6eyJhbGVydG1hbmFnZXIueW1sIjp7Imdsb2JhbCI6e30sInJlY2VpdmVycyI6W3sibmFtZSI6ImRlZmF1bHQtcmVjZWl2ZXIifV0sInJvdXRlIjp7Imdyb3VwX2ludGVydmFsIjoiNW0iLCJncm91cF93YWl0IjoiMTBzIiwicmVjZWl2ZXIiOiJkZWZhdWx0LXJlY2VpdmVyIiwicmVwZWF0X2ludGVydmFsIjoiM2gifX19LCJjb25maWdtYXBSZWxvYWQiOnsiYWxlcnRtYW5hZ2VyIjp7ImVuYWJsZWQiOnRydWUsImV4dHJhQXJncyI6e30sImV4dHJhQ29uZmlnbWFwTW91bnRzIjpbXSwiZXh0cmFWb2x1bWVEaXJzIjpbXSwiaW1hZ2UiOnsicHVsbFBvbGljeSI6IklmTm90UHJlc2VudCIsInJlcG9zaXRvcnkiOiJqaW1taWR5c29uL2NvbmZpZ21hcC1yZWxvYWQiLCJ0YWciOiJ2MC4zLjAifSwibmFtZSI6ImNvbmZpZ21hcC1yZWxvYWQiLCJyZXNvdXJjZXMiOnt9fSwicHJvbWV0aGV1cyI6eyJlbmFibGVkIjp0cnVlLCJleHRyYUFyZ3MiOnt9LCJleHRyYUNvbmZpZ21hcE1vdW50cyI6W10sImV4dHJhVm9sdW1lRGlycyI6W10sImltYWdlIjp7InB1bGxQb2xpY3kiOiJJZk5vdFByZXNlbnQiLCJyZXBvc2l0b3J5IjoiamltbWlkeXNvbi9jb25maWdtYXAtcmVsb2FkIiwidGFnIjoidjAuMy4wIn0sIm5hbWUiOiJjb25maWdtYXAtcmVsb2FkIiwicmVzb3VyY2VzIjp7fX19LCJleHRyYVNjcmFwZUNvbmZpZ3MiOiItIGpvYl9uYW1lOiBrdWJlY29zdFxuICBob25vcl9sYWJlbHM6IHRydWVcbiAgc2NyYXBlX2ludGVydmFsOiAxbVxuICBzY3JhcGVfdGltZW91dDogMTBzXG4gIG1ldHJpY3NfcGF0aDogL21ldHJpY3NcbiAgc2NoZW1lOiBodHRwXG4gIGRuc19zZF9jb25maWdzOlxuICAtIG5hbWVzOlxuICAgIC0ge3sgdGVtcGxhdGUgXCJjb3N0LWFuYWx5emVyLnNlcnZpY2VOYW1lXCIgLiB9fVxuICAgIHR5cGU6ICdBJ1xuICAgIHBvcnQ6IDkwMDNcbi0gam9iX25hbWU6IGt1YmVjb3N0LW5ldHdvcmtpbmdcbiAga3ViZXJuZXRlc19zZF9jb25maWdzOlxuICAgIC0gcm9sZTogcG9kXG4gIHJlbGFiZWxfY29uZmlnczpcbiAgIyBTY3JhcGUgb25seSB0aGUgdGhlIHRhcmdldHMgbWF0Y2hpbmcgdGhlIGZvbGxvd2luZyBtZXRhZGF0YVxuICAgIC0gc291cmNlX2xhYmVsczogW19fbWV0YV9rdWJlcm5ldGVzX3BvZF9sYWJlbF9hcHBdXG4gICAgICBhY3Rpb246IGtlZXBcbiAgICAgIHJlZ2V4OiAge3sgdGVtcGxhdGUgXCJjb3N0LWFuYWx5emVyLm5ldHdvcmtDb3N0c05hbWVcIiAuIH19XG4iLCJnbG9iYWwiOnsiZ3JhZmFuYSI6eyJkb21haW5OYW1lIjoiY29zdC1hbmFseXplci1ncmFmYW5hLmRlZmF1bHQuc3ZjIiwiZW5hYmxlZCI6dHJ1ZSwicHJveHkiOnRydWUsInNjaGVtZSI6Imh0dHAifSwibm90aWZpY2F0aW9ucyI6e30sInBvZEFubm90YXRpb25zIjp7fSwicHJvbWV0aGV1cyI6eyJlbmFibGVkIjp0cnVlLCJmcWRuIjoiaHR0cDovL2Nvc3QtYW5hbHl6ZXItcHJvbWV0aGV1cy1zZXJ2ZXIuZGVmYXVsdC5zdmMifX0sImltYWdlUHVsbFNlY3JldHMiOm51bGwsImt1YmUtc3RhdGUtbWV0cmljcyI6eyJhZmZpbml0eSI6e30sImNvbGxlY3RvcnMiOnsiY2VydGlmaWNhdGVzaWduaW5ncmVxdWVzdHMiOnRydWUsImNvbmZpZ21hcHMiOnRydWUsImNyb25qb2JzIjp0cnVlLCJkYWVtb25zZXRzIjp0cnVlLCJkZXBsb3ltZW50cyI6dHJ1ZSwiZW5kcG9pbnRzIjp0cnVlLCJob3Jpem9udGFscG9kYXV0b3NjYWxlcnMiOnRydWUsImluZ3Jlc3NlcyI6dHJ1ZSwiam9icyI6dHJ1ZSwibGltaXRyYW5nZXMiOnRydWUsIm11dGF0aW5nd2ViaG9va2NvbmZpZ3VyYXRpb25zIjpmYWxzZSwibmFtZXNwYWNlcyI6dHJ1ZSwibmV0d29ya3BvbGljaWVzIjpmYWxzZSwibm9kZXMiOnRydWUsInBlcnNpc3RlbnR2b2x1bWVjbGFpbXMiOnRydWUsInBlcnNpc3RlbnR2b2x1bWVzIjp0cnVlLCJwb2RkaXNydXB0aW9uYnVkZ2V0cyI6dHJ1ZSwicG9kcyI6dHJ1ZSwicmVwbGljYXNldHMiOnRydWUsInJlcGxpY2F0aW9uY29udHJvbGxlcnMiOnRydWUsInJlc291cmNlcXVvdGFzIjp0cnVlLCJzZWNyZXRzIjpmYWxzZSwic2VydmljZXMiOnRydWUsInN0YXRlZnVsc2V0cyI6dHJ1ZSwic3RvcmFnZWNsYXNzZXMiOnRydWUsInZhbGlkYXRpbmd3ZWJob29rY29uZmlndXJhdGlvbnMiOmZhbHNlLCJ2ZXJ0aWNhbHBvZGF1dG9zY2FsZXJzIjpmYWxzZSwidm9sdW1lYXR0YWNobWVudHMiOmZhbHNlfSwiY3VzdG9tTGFiZWxzIjp7fSwiZ2xvYmFsIjp7ImdyYWZhbmEiOnsiZG9tYWluTmFtZSI6ImNvc3QtYW5hbHl6ZXItZ3JhZmFuYS5kZWZhdWx0LnN2YyIsImVuYWJsZWQiOnRydWUsInByb3h5Ijp0cnVlLCJzY2hlbWUiOiJodHRwIn0sIm5vdGlmaWNhdGlvbnMiOnt9LCJwb2RBbm5vdGF0aW9ucyI6e30sInByb21ldGhldXMiOnsiZW5hYmxlZCI6dHJ1ZSwiZnFkbiI6Imh0dHA6Ly9jb3N0LWFuYWx5emVyLXByb21ldGhldXMtc2VydmVyLmRlZmF1bHQuc3ZjIn19LCJob3N0TmV0d29yayI6ZmFsc2UsImltYWdlIjp7InB1bGxQb2xpY3kiOiJJZk5vdFByZXNlbnQiLCJyZXBvc2l0b3J5IjoicXVheS5pby9jb3Jlb3Mva3ViZS1zdGF0ZS1tZXRyaWNzIiwidGFnIjoidjEuOS41In0sIm5hbWVzcGFjZU92ZXJyaWRlIjoiIiwibm9kZVNlbGVjdG9yIjp7fSwicG9kQW5ub3RhdGlvbnMiOnt9LCJwcm9tZXRoZXVzIjp7fSwicHJvbWV0aGV1c1NjcmFwZSI6dHJ1ZSwicmJhYyI6eyJjcmVhdGUiOnRydWV9LCJyZXBsaWNhcyI6MSwic2VjdXJpdHlDb250ZXh0Ijp7ImVuYWJsZWQiOnRydWUsImZzR3JvdXAiOjY1NTM0LCJydW5Bc1VzZXIiOjY1NTM0fSwic2VydmljZSI6eyJhbm5vdGF0aW9ucyI6e30sImxvYWRCYWxhbmNlcklQIjoiIiwibm9kZVBvcnQiOjAsInBvcnQiOjgwODAsInR5cGUiOiJDbHVzdGVySVAifSwic2VydmljZUFjY291bnQiOnsiY3JlYXRlIjp0cnVlLCJpbWFnZVB1bGxTZWNyZXRzIjpbXX0sInRvbGVyYXRpb25zIjpbXX0sImt1YmVTdGF0ZU1ldHJpY3MiOnsiZW5hYmxlZCI6dHJ1ZX0sIm5vZGVFeHBvcnRlciI6eyJlbmFibGVkIjp0cnVlLCJleHRyYUFyZ3MiOnt9LCJleHRyYUNvbmZpZ21hcE1vdW50cyI6W10sImV4dHJhSG9zdFBhdGhNb3VudHMiOltdLCJob3N0TmV0d29yayI6dHJ1ZSwiaG9zdFBJRCI6dHJ1ZSwiaW1hZ2UiOnsicHVsbFBvbGljeSI6IklmTm90UHJlc2VudCIsInJlcG9zaXRvcnkiOiJwcm9tL25vZGUtZXhwb3J0ZXIiLCJ0YWciOiJ2MC4xOC4xIn0sIm5hbWUiOiJub2RlLWV4cG9ydGVyIiwibm9kZVNlbGVjdG9yIjp7fSwicG9kIjp7ImxhYmVscyI6e319LCJwb2RBbm5vdGF0aW9ucyI6e30sInBvZFNlY3VyaXR5UG9saWN5Ijp7ImFubm90YXRpb25zIjp7fX0sInByaW9yaXR5Q2xhc3NOYW1lIjoiIiwicmVzb3VyY2VzIjp7fSwic2VjdXJpdHlDb250ZXh0Ijp7fSwic2VydmljZSI6eyJhbm5vdGF0aW9ucyI6eyJwcm9tZXRoZXVzLmlvL3NjcmFwZSI6InRydWUifSwiY2x1c3RlcklQIjoiTm9uZSIsImV4dGVybmFsSVBzIjpbXSwiaG9zdFBvcnQiOjkxMDAsImxhYmVscyI6e30sImxvYWRCYWxhbmNlcklQIjoiIiwibG9hZEJhbGFuY2VyU291cmNlUmFuZ2VzIjpbXSwic2VydmljZVBvcnQiOjkxMDAsInR5cGUiOiJDbHVzdGVySVAifSwidG9sZXJhdGlvbnMiOltdLCJ1cGRhdGVTdHJhdGVneSI6eyJ0eXBlIjoiUm9sbGluZ1VwZGF0ZSJ9fSwicmJhYyI6eyJjcmVhdGUiOnRydWV9LCJzZXJ2ZXIiOnsiYWZmaW5pdHkiOnt9LCJhbGVydG1hbmFnZXJzIjpbXSwiYmFzZVVSTCI6IiIsImNvbmZpZ01hcE92ZXJyaWRlTmFtZSI6IiIsImNvbmZpZ1BhdGgiOiIvZXRjL2NvbmZpZy9wcm9tZXRoZXVzLnltbCIsImVtcHR5RGlyIjp7InNpemVMaW1pdCI6IiJ9LCJlbmFibGVkIjp0cnVlLCJlbnYiOltdLCJleHRyYUFyZ3MiOnsicXVlcnkubWF4LWNvbmN1cnJlbmN5IjoxLCJxdWVyeS5tYXgtc2FtcGxlcyI6MTAwMDAwMDAwfSwiZXh0cmFDb25maWdtYXBNb3VudHMiOltdLCJleHRyYUZsYWdzIjpbIndlYi5lbmFibGUtbGlmZWN5Y2xlIl0sImV4dHJhSG9zdFBhdGhNb3VudHMiOltdLCJleHRyYUluaXRDb250YWluZXJzIjpbXSwiZXh0cmFTZWNyZXRNb3VudHMiOltdLCJleHRyYVZvbHVtZU1vdW50cyI6W10sImV4dHJhVm9sdW1lcyI6W10sImdsb2JhbCI6eyJldmFsdWF0aW9uX2ludGVydmFsIjoiMW0iLCJleHRlcm5hbF9sYWJlbHMiOnsiY2x1c3Rlcl9pZCI6ImNsdXN0ZXItb25lIn0sInNjcmFwZV9pbnRlcnZhbCI6IjFtIiwic2NyYXBlX3RpbWVvdXQiOiIxMHMifSwiaW1hZ2UiOnsicHVsbFBvbGljeSI6IklmTm90UHJlc2VudCIsInJlcG9zaXRvcnkiOiJwcm9tL3Byb21ldGhldXMiLCJ0YWciOiJ2Mi4xNy4yIn0sImxpdmVuZXNzUHJvYmVGYWlsdXJlVGhyZXNob2xkIjozLCJsaXZlbmVzc1Byb2JlSW5pdGlhbERlbGF5IjozMCwibGl2ZW5lc3NQcm9iZVN1Y2Nlc3NUaHJlc2hvbGQiOjEsImxpdmVuZXNzUHJvYmVUaW1lb3V0IjozMCwibmFtZSI6InNlcnZlciIsIm5vZGVTZWxlY3RvciI6e30sInBlcnNpc3RlbnRWb2x1bWUiOnsiYWNjZXNzTW9kZXMiOlsiUmVhZFdyaXRlT25jZSJdLCJhbm5vdGF0aW9ucyI6e30sImVuYWJsZWQiOnRydWUsImV4aXN0aW5nQ2xhaW0iOiIiLCJtb3VudFBhdGgiOiIvZGF0YSIsInNpemUiOiIzMkdpIiwic3ViUGF0aCI6IiJ9LCJwb2RBbm5vdGF0aW9ucyI6e30sInBvZExhYmVscyI6e30sInBvZFNlY3VyaXR5UG9saWN5Ijp7ImFubm90YXRpb25zIjp7fX0sInByZWZpeFVSTCI6IiIsInByaW9yaXR5Q2xhc3NOYW1lIjoiIiwicmVhZGluZXNzUHJvYmVGYWlsdXJlVGhyZXNob2xkIjozLCJyZWFkaW5lc3NQcm9iZUluaXRpYWxEZWxheSI6MzAsInJlYWRpbmVzc1Byb2JlU3VjY2Vzc1RocmVzaG9sZCI6MSwicmVhZGluZXNzUHJvYmVUaW1lb3V0IjozMCwicmVtb3RlUmVhZCI6e30sInJlbW90ZVdyaXRlIjp7fSwicmVwbGljYUNvdW50IjoxLCJyZXNvdXJjZXMiOnt9LCJyZXRlbnRpb24iOiIxNWQiLCJzZWN1cml0eUNvbnRleHQiOnsiZnNHcm91cCI6MTAwMSwicnVuQXNHcm91cCI6MTAwMSwicnVuQXNOb25Sb290Ijp0cnVlLCJydW5Bc1VzZXIiOjEwMDF9LCJzZXJ2aWNlIjp7ImFubm90YXRpb25zIjp7fSwiY2x1c3RlcklQIjoiIiwiZXh0ZXJuYWxJUHMiOltdLCJsYWJlbHMiOnt9LCJsb2FkQmFsYW5jZXJJUCI6IiIsImxvYWRCYWxhbmNlclNvdXJjZVJhbmdlcyI6W10sInNlcnZpY2VQb3J0Ijo4MCwic2Vzc2lvbkFmZmluaXR5IjoiTm9uZSIsInR5cGUiOiJDbHVzdGVySVAifSwic2lkZWNhckNvbnRhaW5lcnMiOm51bGwsInN0cmF0ZWd5Ijp7InR5cGUiOiJSZWNyZWF0ZSJ9LCJ0ZXJtaW5hdGlvbkdyYWNlUGVyaW9kU2Vjb25kcyI6MzAwLCJ0b2xlcmF0aW9ucyI6W119LCJzZXJ2ZXJGaWxlcyI6eyJhbGVydGluZ19ydWxlcy55bWwiOnt9LCJhbGVydHMiOnt9LCJwcm9tZXRoZXVzLnltbCI6eyJydWxlX2ZpbGVzIjpbIi9ldGMvY29uZmlnL3JlY29yZGluZ19ydWxlcy55bWwiLCIvZXRjL2NvbmZpZy9hbGVydGluZ19ydWxlcy55bWwiLCIvZXRjL2NvbmZpZy9ydWxlcyIsIi9ldGMvY29uZmlnL2FsZXJ0cyJdLCJzY3JhcGVfY29uZmlncyI6W3siam9iX25hbWUiOiJwcm9tZXRoZXVzIiwic3RhdGljX2NvbmZpZ3MiOlt7InRhcmdldHMiOlsibG9jYWxob3N0OjkwOTAiXX1dfSx7ImJlYXJlcl90b2tlbl9maWxlIjoiL3Zhci9ydW4vc2VjcmV0cy9rdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3Rva2VuIiwiam9iX25hbWUiOiJrdWJlcm5ldGVzLW5vZGVzLWNhZHZpc29yIiwia3ViZXJuZXRlc19zZF9jb25maWdzIjpbeyJyb2xlIjoibm9kZSJ9XSwibWV0cmljX3JlbGFiZWxfY29uZmlncyI6W3siYWN0aW9uIjoia2VlcCIsInJlZ2V4IjoiKGNvbnRhaW5lcl9jcHVfdXNhZ2Vfc2Vjb25kc190b3RhbHxjb250YWluZXJfbWVtb3J5X3dvcmtpbmdfc2V0X2J5dGVzfGNvbnRhaW5lcl9uZXR3b3JrX3JlY2VpdmVfZXJyb3JzX3RvdGFsfGNvbnRhaW5lcl9uZXR3b3JrX3RyYW5zbWl0X2Vycm9yc190b3RhbHxjb250YWluZXJfbmV0d29ya19yZWNlaXZlX3BhY2tldHNfZHJvcHBlZF90b3RhbHxjb250YWluZXJfbmV0d29ya190cmFuc21pdF9wYWNrZXRzX2Ryb3BwZWRfdG90YWx8Y29udGFpbmVyX21lbW9yeV91c2FnZV9ieXRlc3xjb250YWluZXJfY3B1X2Nmc190aHJvdHRsZWRfcGVyaW9kc190b3RhbHxjb250YWluZXJfY3B1X2Nmc19wZXJpb2RzX3RvdGFsfGNvbnRhaW5lcl9mc191c2FnZV9ieXRlc3xjb250YWluZXJfZnNfbGltaXRfYnl0ZXN8Y29udGFpbmVyX2NwdV9jZnNfcGVyaW9kc190b3RhbHxjb250YWluZXJfZnNfaW5vZGVzX2ZyZWV8Y29udGFpbmVyX2ZzX2lub2Rlc190b3RhbHxjb250YWluZXJfZnNfdXNhZ2VfYnl0ZXN8Y29udGFpbmVyX2ZzX2xpbWl0X2J5dGVzfGNvbnRhaW5lcl9jcHVfY2ZzX3Rocm90dGxlZF9wZXJpb2RzX3RvdGFsfGNvbnRhaW5lcl9jcHVfY2ZzX3BlcmlvZHNfdG90YWx8Y29udGFpbmVyX25ldHdvcmtfcmVjZWl2ZV9ieXRlc190b3RhbHxjb250YWluZXJfbmV0d29ya190cmFuc21pdF9ieXRlc190b3RhbHxjb250YWluZXJfZnNfaW5vZGVzX2ZyZWV8Y29udGFpbmVyX2ZzX2lub2Rlc190b3RhbHxjb250YWluZXJfZnNfdXNhZ2VfYnl0ZXN8Y29udGFpbmVyX2ZzX2xpbWl0X2J5dGVzfGNvbnRhaW5lcl9zcGVjX2NwdV9zaGFyZXN8Y29udGFpbmVyX3NwZWNfbWVtb3J5X2xpbWl0X2J5dGVzfGNvbnRhaW5lcl9uZXR3b3JrX3JlY2VpdmVfYnl0ZXNfdG90YWx8Y29udGFpbmVyX25ldHdvcmtfdHJhbnNtaXRfYnl0ZXNfdG90YWx8Y29udGFpbmVyX2ZzX3JlYWRzX2J5dGVzX3RvdGFsfGNvbnRhaW5lcl9uZXR3b3JrX3JlY2VpdmVfYnl0ZXNfdG90YWx8Y29udGFpbmVyX2ZzX3dyaXRlc19ieXRlc190b3RhbHxjb250YWluZXJfZnNfcmVhZHNfYnl0ZXNfdG90YWx8Y2Fkdmlzb3JfdmVyc2lvbl9pbmZvKSIsInNvdXJjZV9sYWJlbHMiOlsiX19uYW1lX18iXX0seyJhY3Rpb24iOiJyZXBsYWNlIiwicmVnZXgiOiIoLispIiwic291cmNlX2xhYmVscyI6WyJjb250YWluZXIiXSwidGFyZ2V0X2xhYmVsIjoiY29udGFpbmVyX25hbWUifSx7ImFjdGlvbiI6InJlcGxhY2UiLCJyZWdleCI6IiguKykiLCJzb3VyY2VfbGFiZWxzIjpbInBvZCJdLCJ0YXJnZXRfbGFiZWwiOiJwb2RfbmFtZSJ9XSwicmVsYWJlbF9jb25maWdzIjpbeyJhY3Rpb24iOiJsYWJlbG1hcCIsInJlZ2V4IjoiX19tZXRhX2t1YmVybmV0ZXNfbm9kZV9sYWJlbF8oLispIn0seyJyZXBsYWNlbWVudCI6Imt1YmVybmV0ZXMuZGVmYXVsdC5zdmM6NDQzIiwidGFyZ2V0X2xhYmVsIjoiX19hZGRyZXNzX18ifSx7InJlZ2V4IjoiKC4rKSIsInJlcGxhY2VtZW50IjoiL2FwaS92MS9ub2Rlcy8kMS9wcm94eS9tZXRyaWNzL2NhZHZpc29yIiwic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19ub2RlX25hbWUiXSwidGFyZ2V0X2xhYmVsIjoiX19tZXRyaWNzX3BhdGhfXyJ9XSwic2NoZW1lIjoiaHR0cHMiLCJ0bHNfY29uZmlnIjp7ImNhX2ZpbGUiOiIvdmFyL3J1bi9zZWNyZXRzL2t1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvY2EuY3J0IiwiaW5zZWN1cmVfc2tpcF92ZXJpZnkiOnRydWV9fSx7ImpvYl9uYW1lIjoia3ViZXJuZXRlcy1zZXJ2aWNlLWVuZHBvaW50cyIsImt1YmVybmV0ZXNfc2RfY29uZmlncyI6W3sicm9sZSI6ImVuZHBvaW50cyJ9XSwibWV0cmljX3JlbGFiZWxfY29uZmlncyI6W3siYWN0aW9uIjoia2VlcCIsInJlZ2V4IjoiKGNvbnRhaW5lcl9jcHVfYWxsb2NhdGlvbnxjb250YWluZXJfY3B1X3VzYWdlX3NlY29uZHNfdG90YWx8Y29udGFpbmVyX2ZzX2xpbWl0X2J5dGVzfGNvbnRhaW5lcl9tZW1vcnlfYWxsb2NhdGlvbl9ieXRlc3xjb250YWluZXJfbWVtb3J5X3VzYWdlX2J5dGVzfGNvbnRhaW5lcl9tZW1vcnlfd29ya2luZ19zZXRfYnl0ZXN8Y29udGFpbmVyX25ldHdvcmtfcmVjZWl2ZV9ieXRlc190b3RhbHxjb250YWluZXJfbmV0d29ya190cmFuc21pdF9ieXRlc190b3RhbHxkZXBsb3ltZW50X21hdGNoX2xhYmVsc3xrdWJlX2RlcGxveW1lbnRfc3BlY19yZXBsaWNhc3xrdWJlX2RlcGxveW1lbnRfc3RhdHVzX3JlcGxpY2FzX2F2YWlsYWJsZXxrdWJlX2pvYl9zdGF0dXNfZmFpbGVkfGt1YmVfbmFtZXNwYWNlX2Fubm90YXRpb25zfGt1YmVfbmFtZXNwYWNlX2xhYmVsc3xrdWJlX25vZGVfaW5mb3xrdWJlX25vZGVfbGFiZWxzfGt1YmVfbm9kZV9zdGF0dXNfY2FwYWNpdHlfY3B1X2NvcmVzfGt1YmVfbm9kZV9zdGF0dXNfY2FwYWNpdHlfbWVtb3J5X2J5dGVzfGt1YmVfbm9kZV9zdGF0dXNfY29uZGl0aW9ufGt1YmVfcGVyc2lzdGVudHZvbHVtZV9jYXBhY2l0eV9ieXRlc3xrdWJlX3BlcnNpc3RlbnR2b2x1bWVfc3RhdHVzX3BoYXNlfGt1YmVfcGVyc2lzdGVudHZvbHVtZWNsYWltX2luZm98a3ViZV9wZXJzaXN0ZW50dm9sdW1lY2xhaW1fcmVzb3VyY2VfcmVxdWVzdHNfc3RvcmFnZV9ieXRlc3xrdWJlX3BlcnNpc3RlbnR2b2x1bWVjbGFpbV9yZXNvdXJjZV9yZXF1ZXN0c19zdG9yYWdlX2J5dGVzfGNvbnRhaW5lcl9tZW1vcnlfYWxsb2NhdGlvbl9ieXRlc3xrdWJlX3BvZF9jb250YWluZXJfcmVzb3VyY2VfbGltaXRzX2NwdV9jb3Jlc3xrdWJlX3BvZF9jb250YWluZXJfcmVzb3VyY2VfbGltaXRzX21lbW9yeV9ieXRlc3xrdWJlX3BvZF9jb250YWluZXJfcmVzb3VyY2VfcmVxdWVzdHNfY3B1X2NvcmVzfGt1YmVfcG9kX2NvbnRhaW5lcl9yZXNvdXJjZV9yZXF1ZXN0c19jcHVfY29yZXN8Y29udGFpbmVyX2NwdV91c2FnZV9zZWNvbmRzX3RvdGFsfGt1YmVfcG9kX2NvbnRhaW5lcl9yZXNvdXJjZV9yZXF1ZXN0c19tZW1vcnlfYnl0ZXN8a3ViZV9wb2RfY29udGFpbmVyX3Jlc291cmNlX3JlcXVlc3RzX21lbW9yeV9ieXRlc3xrdWJlX25vZGVfc3RhdHVzX2NhcGFjaXR5X21lbW9yeV9ieXRlc3xrdWJlX3BvZF9jb250YWluZXJfcmVzb3VyY2VfcmVxdWVzdHN8a3ViZV9wb2RfY29udGFpbmVyX3N0YXR1c19yZXN0YXJ0c190b3RhbHxrdWJlX3BvZF9jb250YWluZXJfc3RhdHVzX3J1bm5pbmd8a3ViZV9wb2RfY29udGFpbmVyX3N0YXR1c190ZXJtaW5hdGVkX3JlYXNvbnxrdWJlX3BvZF9sYWJlbHN8a3ViZV9wb2Rfb3duZXJ8a3ViZV9wb2Rfc3RhdHVzX3BoYXNlfGt1YmVjb3N0X2NsdXN0ZXJfbWVtb3J5X3dvcmtpbmdfc2V0X2J5dGVzfGt1YmVjb3N0X3BvZF9uZXR3b3JrX2VncmVzc19ieXRlc190b3RhbHxub2RlX2NwdV9ob3VybHlfY29zdHxub2RlX2NwdV9zZWNvbmRzX3RvdGFsfG5vZGVfZGlza19yZWFkc19jb21wbGV0ZWR8bm9kZV9kaXNrX3JlYWRzX2NvbXBsZXRlZF90b3RhbHxub2RlX2Rpc2tfd3JpdGVzX2NvbXBsZXRlZHxub2RlX2Rpc2tfd3JpdGVzX2NvbXBsZXRlZF90b3RhbHxub2RlX2ZpbGVzeXN0ZW1fZGV2aWNlX2Vycm9yfG5vZGVfZ3B1X2hvdXJseV9jb3N0fG5vZGVfbWVtb3J5X0J1ZmZlcnNfYnl0ZXN8bm9kZV9tZW1vcnlfQ2FjaGVkX2J5dGVzfG5vZGVfbWVtb3J5X01lbUF2YWlsYWJsZV9ieXRlc3xub2RlX21lbW9yeV9NZW1GcmVlX2J5dGVzfG5vZGVfbWVtb3J5X01lbVRvdGFsX2J5dGVzfG5vZGVfbmV0d29ya190cmFuc21pdF9ieXRlc190b3RhbHxub2RlX3JhbV9ob3VybHlfY29zdHxwb2RfcHZjX2FsbG9jYXRpb258cHZfaG91cmx5X2Nvc3R8c2VydmljZV9zZWxlY3Rvcl9sYWJlbHN8c3RhdGVmdWxTZXRfbWF0Y2hfbGFiZWxzfHVwfGt1YmVfbm9kZV9zdGF0dXNfYWxsb2NhdGFibGVfY3B1X2NvcmVzfGt1YmVfbm9kZV9zdGF0dXNfYWxsb2NhdGFibGVfbWVtb3J5X2J5dGVzfGNvbnRhaW5lcl9mc193cml0ZXNfYnl0ZXNfdG90YWx8a3ViZV9kZXBsb3ltZW50X3N0YXR1c19yZXBsaWNhc3xrdWJlX3N0YXRlZnVsc2V0X3JlcGxpY2FzfGt1YmVfZGFlbW9uc2V0X3N0YXR1c19kZXNpcmVkX251bWJlcl9zY2hlZHVsZWR8a3ViZV9kZXBsb3ltZW50X3N0YXR1c19yZXBsaWNhc19hdmFpbGFibGV8a3ViZV9zdGF0ZWZ1bHNldF9zdGF0dXNfcmVwbGljYXN8a3ViZV9kYWVtb25zZXRfc3RhdHVzX251bWJlcl9yZWFkeXxrdWJlX2RlcGxveW1lbnRfc3RhdHVzX3JlcGxpY2FzfGt1YmVfc3RhdGVmdWxzZXRfcmVwbGljYXN8a3ViZV9kYWVtb25zZXRfc3RhdHVzX2Rlc2lyZWRfbnVtYmVyX3NjaGVkdWxlZHxrdWJlX3JlcGxpY2FzZXRfb3duZXJ8a3ViZV9wb2RfY29udGFpbmVyX2luZm8pIiwic291cmNlX2xhYmVscyI6WyJfX25hbWVfXyJdfV0sInJlbGFiZWxfY29uZmlncyI6W3siYWN0aW9uIjoia2VlcCIsInJlZ2V4Ijp0cnVlLCJzb3VyY2VfbGFiZWxzIjpbIl9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfYW5ub3RhdGlvbl9wcm9tZXRoZXVzX2lvX3NjcmFwZSJdfSx7ImFjdGlvbiI6InJlcGxhY2UiLCJyZWdleCI6IihodHRwcz8pIiwic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19zY2hlbWUiXSwidGFyZ2V0X2xhYmVsIjoiX19zY2hlbWVfXyJ9LHsiYWN0aW9uIjoicmVwbGFjZSIsInJlZ2V4IjoiKC4rKSIsInNvdXJjZV9sYWJlbHMiOlsiX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9hbm5vdGF0aW9uX3Byb21ldGhldXNfaW9fcGF0aCJdLCJ0YXJnZXRfbGFiZWwiOiJfX21ldHJpY3NfcGF0aF9fIn0seyJhY3Rpb24iOiJyZXBsYWNlIiwicmVnZXgiOiIoW146XSspKD86OlxcZCspPzsoXFxkKykiLCJyZXBsYWNlbWVudCI6IiQxOiQyIiwic291cmNlX2xhYmVscyI6WyJfX2FkZHJlc3NfXyIsIl9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfYW5ub3RhdGlvbl9wcm9tZXRoZXVzX2lvX3BvcnQiXSwidGFyZ2V0X2xhYmVsIjoiX19hZGRyZXNzX18ifSx7ImFjdGlvbiI6ImxhYmVsbWFwIiwicmVnZXgiOiJfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2xhYmVsXyguKykifSx7ImFjdGlvbiI6InJlcGxhY2UiLCJzb3VyY2VfbGFiZWxzIjpbIl9fbWV0YV9rdWJlcm5ldGVzX25hbWVzcGFjZSJdLCJ0YXJnZXRfbGFiZWwiOiJrdWJlcm5ldGVzX25hbWVzcGFjZSJ9LHsiYWN0aW9uIjoicmVwbGFjZSIsInNvdXJjZV9sYWJlbHMiOlsiX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9uYW1lIl0sInRhcmdldF9sYWJlbCI6Imt1YmVybmV0ZXNfbmFtZSJ9LHsiYWN0aW9uIjoicmVwbGFjZSIsInNvdXJjZV9sYWJlbHMiOlsiX19tZXRhX2t1YmVybmV0ZXNfcG9kX25vZGVfbmFtZSJdLCJ0YXJnZXRfbGFiZWwiOiJrdWJlcm5ldGVzX25vZGUifV19LHsiam9iX25hbWUiOiJrdWJlcm5ldGVzLXNlcnZpY2UtZW5kcG9pbnRzLXNsb3ciLCJrdWJlcm5ldGVzX3NkX2NvbmZpZ3MiOlt7InJvbGUiOiJlbmRwb2ludHMifV0sInJlbGFiZWxfY29uZmlncyI6W3siYWN0aW9uIjoia2VlcCIsInJlZ2V4Ijp0cnVlLCJzb3VyY2VfbGFiZWxzIjpbIl9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfYW5ub3RhdGlvbl9wcm9tZXRoZXVzX2lvX3NjcmFwZV9zbG93Il19LHsiYWN0aW9uIjoicmVwbGFjZSIsInJlZ2V4IjoiKGh0dHBzPykiLCJzb3VyY2VfbGFiZWxzIjpbIl9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfYW5ub3RhdGlvbl9wcm9tZXRoZXVzX2lvX3NjaGVtZSJdLCJ0YXJnZXRfbGFiZWwiOiJfX3NjaGVtZV9fIn0seyJhY3Rpb24iOiJyZXBsYWNlIiwicmVnZXgiOiIoLispIiwic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19wYXRoIl0sInRhcmdldF9sYWJlbCI6Il9fbWV0cmljc19wYXRoX18ifSx7ImFjdGlvbiI6InJlcGxhY2UiLCJyZWdleCI6IihbXjpdKykoPzo6XFxkKyk/OyhcXGQrKSIsInJlcGxhY2VtZW50IjoiJDE6JDIiLCJzb3VyY2VfbGFiZWxzIjpbIl9fYWRkcmVzc19fIiwiX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9hbm5vdGF0aW9uX3Byb21ldGhldXNfaW9fcG9ydCJdLCJ0YXJnZXRfbGFiZWwiOiJfX2FkZHJlc3NfXyJ9LHsiYWN0aW9uIjoibGFiZWxtYXAiLCJyZWdleCI6Il9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbGFiZWxfKC4rKSJ9LHsiYWN0aW9uIjoicmVwbGFjZSIsInNvdXJjZV9sYWJlbHMiOlsiX19tZXRhX2t1YmVybmV0ZXNfbmFtZXNwYWNlIl0sInRhcmdldF9sYWJlbCI6Imt1YmVybmV0ZXNfbmFtZXNwYWNlIn0seyJhY3Rpb24iOiJyZXBsYWNlIiwic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX25hbWUiXSwidGFyZ2V0X2xhYmVsIjoia3ViZXJuZXRlc19uYW1lIn0seyJhY3Rpb24iOiJyZXBsYWNlIiwic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19wb2Rfbm9kZV9uYW1lIl0sInRhcmdldF9sYWJlbCI6Imt1YmVybmV0ZXNfbm9kZSJ9XSwic2NyYXBlX2ludGVydmFsIjoiNW0iLCJzY3JhcGVfdGltZW91dCI6IjMwcyJ9LHsiaG9ub3JfbGFiZWxzIjp0cnVlLCJqb2JfbmFtZSI6InByb21ldGhldXMtcHVzaGdhdGV3YXkiLCJrdWJlcm5ldGVzX3NkX2NvbmZpZ3MiOlt7InJvbGUiOiJzZXJ2aWNlIn1dLCJyZWxhYmVsX2NvbmZpZ3MiOlt7ImFjdGlvbiI6ImtlZXAiLCJyZWdleCI6InB1c2hnYXRld2F5Iiwic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19wcm9iZSJdfV19LHsiam9iX25hbWUiOiJrdWJlcm5ldGVzLXNlcnZpY2VzIiwia3ViZXJuZXRlc19zZF9jb25maWdzIjpbeyJyb2xlIjoic2VydmljZSJ9XSwibWV0cmljc19wYXRoIjoiL3Byb2JlIiwicGFyYW1zIjp7Im1vZHVsZSI6WyJodHRwXzJ4eCJdfSwicmVsYWJlbF9jb25maWdzIjpbeyJhY3Rpb24iOiJrZWVwIiwicmVnZXgiOnRydWUsInNvdXJjZV9sYWJlbHMiOlsiX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9hbm5vdGF0aW9uX3Byb21ldGhldXNfaW9fcHJvYmUiXX0seyJzb3VyY2VfbGFiZWxzIjpbIl9fYWRkcmVzc19fIl0sInRhcmdldF9sYWJlbCI6Il9fcGFyYW1fdGFyZ2V0In0seyJyZXBsYWNlbWVudCI6ImJsYWNrYm94IiwidGFyZ2V0X2xhYmVsIjoiX19hZGRyZXNzX18ifSx7InNvdXJjZV9sYWJlbHMiOlsiX19wYXJhbV90YXJnZXQiXSwidGFyZ2V0X2xhYmVsIjoiaW5zdGFuY2UifSx7ImFjdGlvbiI6ImxhYmVsbWFwIiwicmVnZXgiOiJfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2xhYmVsXyguKykifSx7InNvdXJjZV9sYWJlbHMiOlsiX19tZXRhX2t1YmVybmV0ZXNfbmFtZXNwYWNlIl0sInRhcmdldF9sYWJlbCI6Imt1YmVybmV0ZXNfbmFtZXNwYWNlIn0seyJzb3VyY2VfbGFiZWxzIjpbIl9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbmFtZSJdLCJ0YXJnZXRfbGFiZWwiOiJrdWJlcm5ldGVzX25hbWUifV19XX0sInJlY29yZGluZ19ydWxlcy55bWwiOnt9LCJydWxlcyI6eyJncm91cHMiOlt7Im5hbWUiOiJDUFUiLCJydWxlcyI6W3siZXhwciI6InN1bShyYXRlKGNvbnRhaW5lcl9jcHVfdXNhZ2Vfc2Vjb25kc190b3RhbHtjb250YWluZXJfbmFtZSE9XCJcIn1bNW1dKSkiLCJyZWNvcmQiOiJjbHVzdGVyOmNwdV91c2FnZTpyYXRlNW0ifSx7ImV4cHIiOiJyYXRlKGNvbnRhaW5lcl9jcHVfdXNhZ2Vfc2Vjb25kc190b3RhbHtjb250YWluZXJfbmFtZSE9XCJcIn1bNW1dKSIsInJlY29yZCI6ImNsdXN0ZXI6Y3B1X3VzYWdlX25vc3VtOnJhdGU1bSJ9LHsiZXhwciI6ImF2ZyhpcmF0ZShjb250YWluZXJfY3B1X3VzYWdlX3NlY29uZHNfdG90YWx7Y29udGFpbmVyX25hbWUhPVwiUE9EXCIsIGNvbnRhaW5lcl9uYW1lIT1cIlwifVs1bV0pKSBieSAoY29udGFpbmVyX25hbWUscG9kX25hbWUsbmFtZXNwYWNlKSIsInJlY29yZCI6Imt1YmVjb3N0X2NvbnRhaW5lcl9jcHVfdXNhZ2VfaXJhdGUifSx7ImV4cHIiOiJzdW0oY29udGFpbmVyX21lbW9yeV93b3JraW5nX3NldF9ieXRlc3tjb250YWluZXJfbmFtZSE9XCJQT0RcIixjb250YWluZXJfbmFtZSE9XCJcIn0pIGJ5IChjb250YWluZXJfbmFtZSxwb2RfbmFtZSxuYW1lc3BhY2UpIiwicmVjb3JkIjoia3ViZWNvc3RfY29udGFpbmVyX21lbW9yeV93b3JraW5nX3NldF9ieXRlcyJ9LHsiZXhwciI6InN1bShjb250YWluZXJfbWVtb3J5X3dvcmtpbmdfc2V0X2J5dGVze2NvbnRhaW5lcl9uYW1lIT1cIlBPRFwiLGNvbnRhaW5lcl9uYW1lIT1cIlwifSkiLCJyZWNvcmQiOiJrdWJlY29zdF9jbHVzdGVyX21lbW9yeV93b3JraW5nX3NldF9ieXRlcyJ9XX0seyJuYW1lIjoiU2F2aW5ncyIsInJ1bGVzIjpbeyJleHByIjoic3VtKGF2ZyhrdWJlX3BvZF9vd25lcntvd25lcl9raW5kIT1cIkRhZW1vblNldFwifSkgYnkgKHBvZCkgKiBzdW0oY29udGFpbmVyX2NwdV9hbGxvY2F0aW9uKSBieSAocG9kKSkiLCJsYWJlbHMiOnsiZGFlbW9uc2V0IjoiZmFsc2UifSwicmVjb3JkIjoia3ViZWNvc3Rfc2F2aW5nc19jcHVfYWxsb2NhdGlvbiJ9LHsiZXhwciI6InN1bShhdmcoa3ViZV9wb2Rfb3duZXJ7b3duZXJfa2luZD1cIkRhZW1vblNldFwifSkgYnkgKHBvZCkgKiBzdW0oY29udGFpbmVyX2NwdV9hbGxvY2F0aW9uKSBieSAocG9kKSkgLyBzdW0oa3ViZV9ub2RlX2luZm8pIiwibGFiZWxzIjp7ImRhZW1vbnNldCI6InRydWUifSwicmVjb3JkIjoia3ViZWNvc3Rfc2F2aW5nc19jcHVfYWxsb2NhdGlvbiJ9LHsiZXhwciI6InN1bShhdmcoa3ViZV9wb2Rfb3duZXJ7b3duZXJfa2luZCE9XCJEYWVtb25TZXRcIn0pIGJ5IChwb2QpICogc3VtKGNvbnRhaW5lcl9tZW1vcnlfYWxsb2NhdGlvbl9ieXRlcykgYnkgKHBvZCkpIiwibGFiZWxzIjp7ImRhZW1vbnNldCI6ImZhbHNlIn0sInJlY29yZCI6Imt1YmVjb3N0X3NhdmluZ3NfbWVtb3J5X2FsbG9jYXRpb25fYnl0ZXMifSx7ImV4cHIiOiJzdW0oYXZnKGt1YmVfcG9kX293bmVye293bmVyX2tpbmQ9XCJEYWVtb25TZXRcIn0pIGJ5IChwb2QpICogc3VtKGNvbnRhaW5lcl9tZW1vcnlfYWxsb2NhdGlvbl9ieXRlcykgYnkgKHBvZCkpIC8gc3VtKGt1YmVfbm9kZV9pbmZvKSIsImxhYmVscyI6eyJkYWVtb25zZXQiOiJ0cnVlIn0sInJlY29yZCI6Imt1YmVjb3N0X3NhdmluZ3NfbWVtb3J5X2FsbG9jYXRpb25fYnl0ZXMifSx7ImV4cHIiOiJsYWJlbF9yZXBsYWNlKHN1bShrdWJlX3BvZF9zdGF0dXNfcGhhc2V7cGhhc2U9XCJSdW5uaW5nXCIsbmFtZXNwYWNlIT1cImt1YmUtc3lzdGVtXCJ9IFx1MDAzZSAwKSBieSAocG9kLCBuYW1lc3BhY2UpLCBcInBvZF9uYW1lXCIsIFwiJDFcIiwgXCJwb2RcIiwgXCIoLispXCIpIiwicmVjb3JkIjoia3ViZWNvc3Rfc2F2aW5nc19ydW5uaW5nX3BvZHMifSx7ImV4cHIiOiJzdW0ocmF0ZShjb250YWluZXJfY3B1X3VzYWdlX3NlY29uZHNfdG90YWx7Y29udGFpbmVyX25hbWUhPVwiXCIsY29udGFpbmVyX25hbWUhPVwiUE9EXCIsaW5zdGFuY2UhPVwiXCJ9WzVtXSkpIGJ5IChuYW1lc3BhY2UsIHBvZF9uYW1lLCBjb250YWluZXJfbmFtZSwgaW5zdGFuY2UpIiwicmVjb3JkIjoia3ViZWNvc3Rfc2F2aW5nc19jb250YWluZXJfY3B1X3VzYWdlX3NlY29uZHMifSx7ImV4cHIiOiJzdW0oY29udGFpbmVyX21lbW9yeV93b3JraW5nX3NldF9ieXRlc3tjb250YWluZXJfbmFtZSE9XCJcIixjb250YWluZXJfbmFtZSE9XCJQT0RcIixpbnN0YW5jZSE9XCJcIn0pIGJ5IChuYW1lc3BhY2UsIHBvZF9uYW1lLCBjb250YWluZXJfbmFtZSwgaW5zdGFuY2UpIiwicmVjb3JkIjoia3ViZWNvc3Rfc2F2aW5nc19jb250YWluZXJfbWVtb3J5X3VzYWdlX2J5dGVzIn0seyJleHByIjoiYXZnKHN1bShrdWJlX3BvZF9jb250YWluZXJfcmVzb3VyY2VfcmVxdWVzdHNfY3B1X2NvcmVze25hbWVzcGFjZSE9XCJrdWJlLXN5c3RlbVwifSkgYnkgKHBvZCwgbmFtZXNwYWNlLCBpbnN0YW5jZSkpIGJ5IChwb2QsIG5hbWVzcGFjZSkiLCJyZWNvcmQiOiJrdWJlY29zdF9zYXZpbmdzX3BvZF9yZXF1ZXN0c19jcHVfY29yZXMifSx7ImV4cHIiOiJhdmcoc3VtKGt1YmVfcG9kX2NvbnRhaW5lcl9yZXNvdXJjZV9yZXF1ZXN0c19tZW1vcnlfYnl0ZXN7bmFtZXNwYWNlIT1cImt1YmUtc3lzdGVtXCJ9KSBieSAocG9kLCBuYW1lc3BhY2UsIGluc3RhbmNlKSkgYnkgKHBvZCwgbmFtZXNwYWNlKSIsInJlY29yZCI6Imt1YmVjb3N0X3NhdmluZ3NfcG9kX3JlcXVlc3RzX21lbW9yeV9ieXRlcyJ9XX1dfX0sInNlcnZpY2VBY2NvdW50cyI6eyJhbGVydG1hbmFnZXIiOnsiY3JlYXRlIjp0cnVlfSwibm9kZUV4cG9ydGVyIjp7ImNyZWF0ZSI6dHJ1ZX0sInB1c2hnYXRld2F5Ijp7ImNyZWF0ZSI6dHJ1ZX0sInNlcnZlciI6eyJjcmVhdGUiOnRydWV9fX0sInJlbW90ZVdyaXRlIjp7fSwicmVwb3J0aW5nIjp7ImVycm9yUmVwb3J0aW5nIjp0cnVlLCJsb2dDb2xsZWN0aW9uIjp0cnVlLCJwcm9kdWN0QW5hbHl0aWNzIjp0cnVlLCJ2YWx1ZXNSZXBvcnRpbmciOnRydWV9LCJzZXJ2aWNlIjp7ImFubm90YXRpb25zIjp7fSwibGFiZWxzIjp7fSwicG9ydCI6OTA5MCwidGFyZ2V0UG9ydCI6OTA5MCwidHlwZSI6IkNsdXN0ZXJJUCJ9LCJzZXJ2aWNlQWNjb3VudCI6eyJhbm5vdGF0aW9ucyI6e30sImNyZWF0ZSI6dHJ1ZX0sInN1cHBvcnRORlMiOmZhbHNlLCJ0b2xlcmF0aW9ucyI6W119
            - name: KUBECOST_NAMESPACE
              value: kubecost
            - name: GOOGLE_APPLICATION_CREDENTIALS
              value: /var/configs/key.json
            - name: KUBECOST_TOKEN
              valueFrom:
                configMapKeyRef:
                  name: kubecost-cost-analyzer
                  key: kubecost-token
---
# Source: cost-analyzer/templates/cost-analyzer-checks-template.yaml
apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: cost-analyzer-checks
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.74.0
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
spec:
  schedule: "*/10 * * * *"
  jobTemplate:
    metadata:
      labels:
        
        app.kubernetes.io/name: cost-analyzer
        helm.sh/chart: cost-analyzer-1.74.0
        app.kubernetes.io/instance: kubecost
        app.kubernetes.io/managed-by: Helm
        app: cost-analyzer
    spec:
      template:
        spec:
          containers:
          - name: cost-analyzer-checks
            image: quay.io/kubecost1/checks:prod-1.74.0
            imagePullPolicy: Always
            args:
            - node
            - ./node/cron.js
            resources:
              limits:
                cpu: 100m
                memory: 200Mi
              requests:
                cpu: 20m
                memory: 100Mi
            env:
            - name: COST_ANALYZER_SERVER_ENDPOINT
              value: kubecost-cost-analyzer.kubecost:9001
            - name: COST_ANALYZER_MODEL_ENDPOINT
              value: kubecost-cost-analyzer.kubecost:9003
              
            - name: PROMETHEUS_ALERTMANAGER_ENDPOINT
              valueFrom:
                configMapKeyRef:
                  name: kubecost-cost-analyzer
                  key: prometheus-alertmanager-endpoint
          restartPolicy: OnFailure
          securityContext:
            runAsNonRoot: true
            runAsUser: 1001
