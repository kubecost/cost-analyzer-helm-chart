---
# Source: cost-analyzer/charts/grafana/templates/podsecuritypolicy.yaml
apiVersion: policy/v1beta1
kind: PodSecurityPolicy
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    heritage: Helm
    release: kubecost
  annotations:
    seccomp.security.alpha.kubernetes.io/allowedProfileNames: 'docker/default'
    apparmor.security.beta.kubernetes.io/allowedProfileNames: 'runtime/default'
    seccomp.security.alpha.kubernetes.io/defaultProfileName:  'docker/default'
    apparmor.security.beta.kubernetes.io/defaultProfileName:  'runtime/default'
spec:
  privileged: false
  allowPrivilegeEscalation: false
  requiredDropCapabilities:
    - ALL
  volumes:
    - 'configMap'
    - 'emptyDir'
    - 'projected'
    - 'secret'
    - 'downwardAPI'
    - 'persistentVolumeClaim'
  hostNetwork: false
  hostIPC: false
  hostPID: false
  runAsUser:
    rule: 'RunAsAny'
  seLinux:
    rule: 'RunAsAny'
  supplementalGroups:
    rule: 'RunAsAny'
  fsGroup:
    rule: 'RunAsAny'
  readOnlyRootFilesystem: false
---
# Source: cost-analyzer/charts/grafana/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: grafana
    chart: grafana-1.17.2
    heritage: Helm
    release: kubecost
  name: kubecost-grafana
---
# Source: cost-analyzer/charts/prometheus/charts/kube-state-metrics/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: kube-state-metrics-2.7.2
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: kubecost
  name: kubecost-kube-state-metrics
  namespace: kubecost
imagePullSecrets:
  []
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
---
# Source: cost-analyzer/charts/prometheus/templates/node-exporter-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    component: "node-exporter"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-node-exporter
---
# Source: cost-analyzer/charts/prometheus/templates/server-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
---
# Source: cost-analyzer/templates/cost-analyzer-service-account-template.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
---
# Source: cost-analyzer/charts/grafana/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
type: Opaque
data:
  admin-user: "YWRtaW4="
  admin-password: "c3Ryb25ncGFzc3dvcmQ="
  ldap-toml: ""
---
# Source: cost-analyzer/charts/grafana/templates/configmap-dashboard-provider.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
  name: kubecost-grafana-config-dashboards
data:
  provider.yaml: |-
    apiVersion: 1
    providers:
    - name: 'default'
      orgId: 1
      folder: ''
      type: file
      disableDeletion: false
      options:
        path: /tmp/dashboards
---
# Source: cost-analyzer/charts/grafana/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
data:
  grafana.ini: |
    [analytics]
    check_for_updates = true
    [auth.anonymous]
    enabled = true
    org_name = Main Org.
    org_role = Admin
    [grafana_net]
    url = https://grafana.net
    [log]
    mode = console
    [paths]
    data = /var/lib/grafana/data
    logs = /var/log/grafana
    plugins = /var/lib/grafana/plugins
    provisioning = /etc/grafana/provisioning
    [server]
    root_url = %(protocol)s://%(domain)s:%(http_port)s/grafana
    - access: proxy
      isDefault: true
      name: Prometheus
      type: prometheus
      url: http://kubecost-prometheus-server.kubecost.svc
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
data:
  alertmanager.yml: |
    global: {}
    receivers:
    - name: default-receiver
    route:
      group_interval: 5m
      group_wait: 10s
      receiver: default-receiver
      repeat_interval: 3h
---
# Source: cost-analyzer/charts/prometheus/templates/server-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
data:
  alerting_rules.yml: |
    {}
  alerts: |
    {}
  prometheus.yml: |
    global:
      evaluation_interval: 1m
      external_labels:
        cluster_id: cluster-one
      scrape_interval: 1m
      scrape_timeout: 10s
    rule_files:
    - /etc/config/recording_rules.yml
    - /etc/config/alerting_rules.yml
    - /etc/config/rules
    - /etc/config/alerts
    scrape_configs:
    - job_name: prometheus
      static_configs:
      - targets:
        - localhost:9090
    - bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
      job_name: kubernetes-nodes-cadvisor
      kubernetes_sd_configs:
      - role: node
      metric_relabel_configs:
      - action: keep
        regex: (container_cpu_usage_seconds_total|container_memory_working_set_bytes|container_network_receive_errors_total|container_network_transmit_errors_total|container_network_receive_packets_dropped_total|container_network_transmit_packets_dropped_total|container_memory_usage_bytes|container_cpu_cfs_throttled_periods_total|container_cpu_cfs_periods_total|container_fs_usage_bytes|container_fs_limit_bytes|container_cpu_cfs_periods_total|container_fs_inodes_free|container_fs_inodes_total|container_fs_usage_bytes|container_fs_limit_bytes|container_cpu_cfs_throttled_periods_total|container_cpu_cfs_periods_total|container_network_receive_bytes_total|container_network_transmit_bytes_total|container_fs_inodes_free|container_fs_inodes_total|container_fs_usage_bytes|container_fs_limit_bytes|container_spec_cpu_shares|container_spec_memory_limit_bytes|container_network_receive_bytes_total|container_network_transmit_bytes_total|container_fs_reads_bytes_total|container_network_receive_bytes_total|container_fs_writes_bytes_total|container_fs_reads_bytes_total|cadvisor_version_info)
        source_labels:
        - __name__
      - action: replace
        regex: (.+)
        source_labels:
        - container
        target_label: container_name
      - action: replace
        regex: (.+)
        source_labels:
        - pod
        target_label: pod_name
      relabel_configs:
      - action: labelmap
        regex: __meta_kubernetes_node_label_(.+)
      - replacement: kubernetes.default.svc:443
        target_label: __address__
      - regex: (.+)
        replacement: /api/v1/nodes/$1/proxy/metrics/cadvisor
        source_labels:
        - __meta_kubernetes_node_name
        target_label: __metrics_path__
      scheme: https
      tls_config:
        ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
        insecure_skip_verify: true
    - job_name: kubernetes-service-endpoints
      kubernetes_sd_configs:
      - role: endpoints
      metric_relabel_configs:
      - action: keep
        regex: (container_cpu_allocation|container_cpu_usage_seconds_total|container_fs_limit_bytes|container_memory_allocation_bytes|container_memory_usage_bytes|container_memory_working_set_bytes|container_network_receive_bytes_total|container_network_transmit_bytes_total|deployment_match_labels|kube_deployment_spec_replicas|kube_deployment_status_replicas_available|kube_job_status_failed|kube_namespace_annotations|kube_namespace_labels|kube_node_info|kube_node_labels|kube_node_status_capacity_cpu_cores|kube_node_status_capacity_memory_bytes|kube_node_status_condition|kube_persistentvolume_capacity_bytes|kube_persistentvolume_status_phase|kube_persistentvolumeclaim_info|kube_persistentvolumeclaim_resource_requests_storage_bytes|kube_persistentvolumeclaim_resource_requests_storage_bytes|container_memory_allocation_bytes|kube_pod_container_resource_limits_cpu_cores|kube_pod_container_resource_limits_memory_bytes|kube_pod_container_resource_requests_cpu_cores|kube_pod_container_resource_requests_cpu_cores|container_cpu_usage_seconds_total|kube_pod_container_resource_requests_memory_bytes|kube_pod_container_resource_requests_memory_bytes|kube_node_status_capacity_memory_bytes|kube_pod_container_resource_requests|kube_pod_container_status_restarts_total|kube_pod_container_status_running|kube_pod_container_status_terminated_reason|kube_pod_labels|kube_pod_owner|kube_pod_status_phase|kubecost_cluster_memory_working_set_bytes|kubecost_pod_network_egress_bytes_total|node_cpu_hourly_cost|node_cpu_seconds_total|node_disk_reads_completed|node_disk_reads_completed_total|node_disk_writes_completed|node_disk_writes_completed_total|node_filesystem_device_error|node_gpu_hourly_cost|node_memory_Buffers_bytes|node_memory_Cached_bytes|node_memory_MemAvailable_bytes|node_memory_MemFree_bytes|node_memory_MemTotal_bytes|node_network_transmit_bytes_total|node_ram_hourly_cost|pod_pvc_allocation|pv_hourly_cost|service_selector_labels|statefulSet_match_labels|up|kube_node_status_allocatable_cpu_cores|kube_node_status_allocatable_memory_bytes|container_fs_writes_bytes_total|kube_deployment_status_replicas|kube_statefulset_replicas|kube_daemonset_status_desired_number_scheduled|kube_deployment_status_replicas_available|kube_statefulset_status_replicas|kube_daemonset_status_number_ready|kube_deployment_status_replicas|kube_statefulset_replicas|kube_daemonset_status_desired_number_scheduled|kube_replicaset_owner|kube_pod_container_info)
        source_labels:
        - __name__
      relabel_configs:
      - action: keep
        regex: true
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_scrape
      - action: replace
        regex: (https?)
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_scheme
        target_label: __scheme__
      - action: replace
        regex: (.+)
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_path
        target_label: __metrics_path__
      - action: replace
        regex: ([^:]+)(?::\d+)?;(\d+)
        replacement: $1:$2
        source_labels:
        - __address__
        - __meta_kubernetes_service_annotation_prometheus_io_port
        target_label: __address__
      - action: labelmap
        regex: __meta_kubernetes_service_label_(.+)
      - action: replace
        source_labels:
        - __meta_kubernetes_namespace
        target_label: kubernetes_namespace
      - action: replace
        source_labels:
        - __meta_kubernetes_service_name
        target_label: kubernetes_name
      - action: replace
        source_labels:
        - __meta_kubernetes_pod_node_name
        target_label: kubernetes_node
    - job_name: kubernetes-service-endpoints-slow
      kubernetes_sd_configs:
      - role: endpoints
      relabel_configs:
      - action: keep
        regex: true
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_scrape_slow
      - action: replace
        regex: (https?)
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_scheme
        target_label: __scheme__
      - action: replace
        regex: (.+)
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_path
        target_label: __metrics_path__
      - action: replace
        regex: ([^:]+)(?::\d+)?;(\d+)
        replacement: $1:$2
        source_labels:
        - __address__
        - __meta_kubernetes_service_annotation_prometheus_io_port
        target_label: __address__
      - action: labelmap
        regex: __meta_kubernetes_service_label_(.+)
      - action: replace
        source_labels:
        - __meta_kubernetes_namespace
        target_label: kubernetes_namespace
      - action: replace
        source_labels:
        - __meta_kubernetes_service_name
        target_label: kubernetes_name
      - action: replace
        source_labels:
        - __meta_kubernetes_pod_node_name
        target_label: kubernetes_node
      scrape_interval: 5m
      scrape_timeout: 30s
    - honor_labels: true
      job_name: prometheus-pushgateway
      kubernetes_sd_configs:
      - role: service
      relabel_configs:
      - action: keep
        regex: pushgateway
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_probe
    - job_name: kubernetes-services
      kubernetes_sd_configs:
      - role: service
      metrics_path: /probe
      params:
        module:
        - http_2xx
      relabel_configs:
      - action: keep
        regex: true
        source_labels:
        - __meta_kubernetes_service_annotation_prometheus_io_probe
      - source_labels:
        - __address__
        target_label: __param_target
      - replacement: blackbox
        target_label: __address__
      - source_labels:
        - __param_target
        target_label: instance
      - action: labelmap
        regex: __meta_kubernetes_service_label_(.+)
      - source_labels:
        - __meta_kubernetes_namespace
        target_label: kubernetes_namespace
      - source_labels:
        - __meta_kubernetes_service_name
        target_label: kubernetes_name
    - job_name: kubecost
      honor_labels: true
      scrape_interval: 1m
      scrape_timeout: 10s
      metrics_path: /metrics
      scheme: http
      dns_sd_configs:
      - names:
        - kubecost-cost-analyzer
        type: 'A'
        port: 9003
    - job_name: kubecost-networking
      kubernetes_sd_configs:
        - role: pod
      relabel_configs:
      # Scrape only the the targets matching the following metadata
        - source_labels: [__meta_kubernetes_pod_label_app]
          action: keep
          regex:  kubecost-network-costs
    
    alerting:
      alertmanagers:
      - kubernetes_sd_configs:
          - role: pod
        tls_config:
          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
        relabel_configs:
        - source_labels: [__meta_kubernetes_namespace]
          regex: kubecost
          action: keep
        - source_labels: [__meta_kubernetes_pod_label_app]
          regex: prometheus
          action: keep
        - source_labels: [__meta_kubernetes_pod_label_component]
          regex: alertmanager
          action: keep
        - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_probe]
          regex: .*
          action: keep
        - source_labels: [__meta_kubernetes_pod_container_port_number]
          regex:
          action: drop
  recording_rules.yml: |
    {}
  rules: |
    groups:
    - name: CPU
      rules:
      - expr: sum(rate(container_cpu_usage_seconds_total{container_name!=""}[5m]))
        record: cluster:cpu_usage:rate5m
      - expr: rate(container_cpu_usage_seconds_total{container_name!=""}[5m])
        record: cluster:cpu_usage_nosum:rate5m
      - expr: avg(irate(container_cpu_usage_seconds_total{container_name!="POD", container_name!=""}[5m]))
          by (container_name,pod_name,namespace)
        record: kubecost_container_cpu_usage_irate
      - expr: sum(container_memory_working_set_bytes{container_name!="POD",container_name!=""})
          by (container_name,pod_name,namespace)
        record: kubecost_container_memory_working_set_bytes
      - expr: sum(container_memory_working_set_bytes{container_name!="POD",container_name!=""})
        record: kubecost_cluster_memory_working_set_bytes
    - name: Savings
      rules:
      - expr: sum(avg(kube_pod_owner{owner_kind!="DaemonSet"}) by (pod) * sum(container_cpu_allocation)
          by (pod))
        labels:
          daemonset: "false"
        record: kubecost_savings_cpu_allocation
      - expr: sum(avg(kube_pod_owner{owner_kind="DaemonSet"}) by (pod) * sum(container_cpu_allocation)
          by (pod)) / sum(kube_node_info)
        labels:
          daemonset: "true"
        record: kubecost_savings_cpu_allocation
      - expr: sum(avg(kube_pod_owner{owner_kind!="DaemonSet"}) by (pod) * sum(container_memory_allocation_bytes)
          by (pod))
        labels:
          daemonset: "false"
        record: kubecost_savings_memory_allocation_bytes
      - expr: sum(avg(kube_pod_owner{owner_kind="DaemonSet"}) by (pod) * sum(container_memory_allocation_bytes)
          by (pod)) / sum(kube_node_info)
        labels:
          daemonset: "true"
        record: kubecost_savings_memory_allocation_bytes
      - expr: label_replace(sum(kube_pod_status_phase{phase="Running",namespace!="kube-system"}
          > 0) by (pod, namespace), "pod_name", "$1", "pod", "(.+)")
        record: kubecost_savings_running_pods
      - expr: sum(rate(container_cpu_usage_seconds_total{container_name!="",container_name!="POD",instance!=""}[5m]))
          by (namespace, pod_name, container_name, instance)
        record: kubecost_savings_container_cpu_usage_seconds
      - expr: sum(container_memory_working_set_bytes{container_name!="",container_name!="POD",instance!=""})
          by (namespace, pod_name, container_name, instance)
        record: kubecost_savings_container_memory_usage_bytes
      - expr: avg(sum(kube_pod_container_resource_requests_cpu_cores{namespace!="kube-system"})
          by (pod, namespace, instance)) by (pod, namespace)
        record: kubecost_savings_pod_requests_cpu_cores
      - expr: avg(sum(kube_pod_container_resource_requests_memory_bytes{namespace!="kube-system"})
          by (pod, namespace, instance)) by (pod, namespace)
        record: kubecost_savings_pod_requests_memory_bytes
---
# Source: cost-analyzer/templates/cost-analyzer-config-map-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
data:
    prometheus-alertmanager-endpoint: http://kubecost-prometheus-alertmanager.kubecost
    prometheus-server-endpoint: http://kubecost-prometheus-server.kubecost
    kubecost-token: not-applied
---
# Source: cost-analyzer/templates/cost-analyzer-frontend-config-map-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-conf
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
data:
  nginx.conf: |
    gzip_static  on;

    # Enable gzip encoding for content of the provided types of 50kb and higher.
    gzip on;
    gzip_min_length 50000; 
    gzip_proxied expired no-cache no-store private auth;
    gzip_types 
        text/plain 
        text/css 
        text/xml 
        text/javascript 
        application/x-javascript 
        application/xml 
        application/json;

    upstream api {
        server kubecost-cost-analyzer.kubecost:9001;
    }

    upstream model {
        server kubecost-cost-analyzer.kubecost:9003;
    }
    upstream grafana {
        server kubecost-grafana.kubecost;

    }


    server {
        server_name _;
        root /var/www;
        index index.html;
        add_header Cache-Control "max-age=300";
        add_header Cache-Control "must-revalidate";
        add_header ETag "1.67.1";
        listen 9090;
        location /api/ {
            proxy_pass http://api/;
            proxy_redirect off;
            proxy_http_version 1.1;
            proxy_set_header Connection "";
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        location /model/ {
            proxy_connect_timeout       180;
            proxy_send_timeout          180;
            proxy_read_timeout          180;
            proxy_pass http://model/;
            proxy_redirect off;
            proxy_http_version 1.1;
            proxy_set_header Connection "";
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        
        location ~ ^/(turndown|cluster)/ {

            add_header 'Access-Control-Allow-Origin' '*' always;
            return 404;
        }
        location /saml/ {
            proxy_connect_timeout       180;
            proxy_send_timeout          180;
            proxy_read_timeout          180;
            proxy_pass http://model/saml/;
            proxy_redirect off;
            proxy_http_version 1.1;
            proxy_set_header Connection "";
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        location /login {
            proxy_connect_timeout       180;
            proxy_send_timeout          180;
            proxy_read_timeout          180;
            proxy_pass http://model/login;
            proxy_redirect off;
            proxy_http_version 1.1;
            proxy_set_header Connection "";
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        location /grafana/ {
            proxy_pass http://grafana/;
            proxy_redirect off;
            proxy_http_version 1.1;
            proxy_set_header Connection "";
            proxy_set_header  X-Real-IP  $remote_addr;
            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
        }
    
    }
---
# Source: cost-analyzer/templates/grafana-attached-disk-metrics-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: attached-disk-metrics-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    attached-disks.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "id": 10,
          "iteration": 1589748792557,
          "links": [],
          "panels": [
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 0,
                "y": 0
              },
              "id": 2,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(container_fs_limit_bytes{instance=~'$disk', device!=\"tmpfs\", id=\"/\"}) by (instance)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Disk Size",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "decbytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 12,
                "y": 0
              },
              "id": 4,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(container_fs_usage_bytes{instance=~'$disk',id=\"/\"}) by (instance) / sum(container_fs_limit_bytes{instance=~'$disk',device!=\"tmpfs\", id=\"/\"}) by (instance)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Disk Utilization",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "decimals": 1,
                  "format": "percentunit",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 0,
                "y": 9
              },
              "id": 5,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "1 - sum(container_fs_inodes_free{instance=~'$disk',id=\"/\"}) by (instance) / sum(container_fs_inodes_total{instance=~'$disk',id=\"/\"}) by (instance)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "iNode Utilization",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "decimals": 1,
                  "format": "percentunit",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 12,
                "y": 9
              },
              "id": 3,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(container_fs_usage_bytes{instance=~'$disk',id=\"/\"}) by (instance)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Disk Usage",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "decbytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "schemaVersion": 16,
          "style": "dark",
          "tags": [
            "cost",
            "utilization",
            "metrics"
          ],
          "templating": {
            "list": [
              {
                "allValue": null,
                "current": {
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "disk",
                "options": [],
                "query": "query_result(sum(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance))",
                "refresh": 1,
                "regex": "/instance=\\\"(.*?)(\\\")/",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-7d",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "",
          "title": "Attached disk metrics",
          "uid": "nBH7qBgMk",
          "version": 2
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-cluster-metrics-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-metrics-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    cluster-metrics.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "description": "Cost metrics from the Kubecost product",
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "id": 7,
          "iteration": 1558062099204,
          "links": [],
          "panels": [
            {
              "content": "Note: this dashboard requires Kubecost metrics to be available in your Prometheus deployment. [Learn more](https://github.com/kubecost/cost-model/blob/master/PROMETHEUS.md)",
              "gridPos": {
                "h": 2,
                "w": 24,
                "x": 0,
                "y": 0
              },
              "id": 27,
              "links": [],
              "mode": "markdown",
              "title": "",
              "transparent": true,
              "type": "text"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Monthly run rate of CPU + GPU costs based on currently provisioned resources.",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 6,
                "x": 0,
                "y": 2
              },
              "hideTimeOverride": true,
              "id": 2,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": true,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100) +\n  avg(node_gpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n)",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "CPU Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Monthly run rate of memory costs based on currently provisioned expenses.",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 6,
                "x": 6,
                "y": 2
              },
              "hideTimeOverride": true,
              "id": 3,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n)",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Memory Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Monthly run rate of attached storage and PV costs based on currently provisioned resources.",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 6,
                "x": 12,
                "y": 2
              },
              "hideTimeOverride": true,
              "id": 4,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(avg(pv_hourly_cost) by (persistentvolume) * 730 * avg(kube_persistentvolume_capacity_bytes) by (persistentvolume) / 1024 / 1024 / 1024) \n+\nsum(sum(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance) / 1024 / 1024 / 1024) * $localStorageGBCost",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Storage Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Sum of compute, memory, storage and network costs.",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 7,
                "w": 6,
                "x": 18,
                "y": 2
              },
              "hideTimeOverride": true,
              "id": 11,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "# Compute\nsum(\n  avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100) +\n  avg(node_gpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n) +\n\n\n# Memory\nsum(\n  avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n) +\n\n# Storage \n\nsum(avg(pv_hourly_cost) by (persistentvolume) * 730 * avg(kube_persistentvolume_capacity_bytes) by (persistentvolume) / 1024 / 1024 / 1024) \n+\nsum(sum(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance) / 1024 / 1024 / 1024) * $localStorageGBCost",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Total Cost",
              "type": "singlestat",
              "valueFontSize": "120%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(50, 172, 45, 0.97)",
                "#c15c17"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Current CPU use from applications divided by allocatable CPUs",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 0,
                "y": 5
              },
              "height": "180px",
              "hideTimeOverride": true,
              "id": 13,
              "interval": null,
              "isNew": true,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "(\n sum(\n   count(irate(container_cpu_usage_seconds_total{id=\"/\"}[10m])) by (instance)\n   * on (instance) \n   sum(irate(container_cpu_usage_seconds_total{id=\"/\"}[10m])) by (instance)\n ) \n / \n (sum (kube_node_status_allocatable_cpu_cores))\n) * 100",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": "30, 80",
              "timeFrom": "",
              "title": "CPU Utilization",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(50, 172, 45, 0.97)",
                "#c15c17"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Current CPU reservation requests from applications vs allocatable CPU",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 3,
                "y": 5
              },
              "height": "180px",
              "id": 15,
              "interval": null,
              "isNew": true,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "SUM(kube_pod_container_resource_requests_cpu_cores) / SUM(kube_node_status_allocatable_cpu_cores) * 100",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": "30, 80",
              "title": "CPU Requests",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(50, 172, 45, 0.97)",
                "#c15c17"
              ],
              "datasource": "default-kubecost",
              "description": "Current RAM use vs RAM available",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 6,
                "y": 5
              },
              "height": "180px",
              "hideTimeOverride": true,
              "id": 17,
              "interval": null,
              "isNew": true,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "SUM(container_memory_usage_bytes{namespace!=\"\"}) / SUM(kube_node_status_allocatable_memory_bytes) * 100",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "B"
                }
              ],
              "thresholds": "30,80",
              "timeFrom": "",
              "title": "RAM Utilization",
              "transparent": false,
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(50, 172, 45, 0.97)",
                "#c15c17"
              ],
              "datasource": "default-kubecost",
              "description": "Current RAM requests vs RAM available",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 9,
                "y": 5
              },
              "height": "180px",
              "id": 19,
              "interval": null,
              "isNew": true,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\"})\n /\n sum(kube_node_status_allocatable_memory_bytes)\n) * 100",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": "30,80",
              "title": "RAM Requests",
              "transparent": false,
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(50, 172, 45, 0.97)",
                "#c15c17"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "This gauge shows the current standard storage use, including cluster storage, vs storage available",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 6,
                "x": 12,
                "y": 5
              },
              "height": "180px",
              "hideTimeOverride": true,
              "id": 21,
              "interval": null,
              "isNew": true,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (\n sum(kube_persistentvolumeclaim_info) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kubelet_volume_stats_used_bytes) by (persistentvolumeclaim, namespace) or up * 0\n + sum(container_fs_usage_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"})\n) /\nsum (\n sum(kube_persistentvolumeclaim_info) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n + sum(container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"})\n) * 100",
                  "format": "time_series",
                  "interval": "",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 10
                }
              ],
              "thresholds": "30, 80",
              "timeFrom": "",
              "title": "Storage Utilization",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "Monthly run rate of CPU + GPU costs",
              "fill": 1,
              "gridPos": {
                "h": 7,
                "w": 6,
                "x": 0,
                "y": 9
              },
              "id": 6,
              "interval": "1m",
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost) by (node) * 730 +\n  avg(node_gpu_hourly_cost) by (node) * 730\n)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "compute cost",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Compute Cost",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "currencyUSD",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "Monthly run rate of memory costs",
              "fill": 1,
              "gridPos": {
                "h": 7,
                "w": 6,
                "x": 6,
                "y": 9
              },
              "id": 9,
              "interval": "1m",
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730\n)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "memory cost",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Memory Cost",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "currencyUSD",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "Monthly run rate of attached disk + PV storage costs",
              "fill": 1,
              "gridPos": {
                "h": 7,
                "w": 6,
                "x": 12,
                "y": 9
              },
              "id": 10,
              "interval": "1m",
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n  avg(avg_over_time(pv_hourly_cost[$timeRange] offset 1m)) by (persistentvolume) * 730 \n  * avg(avg_over_time(kube_persistentvolume_capacity_bytes[$timeRange] offset 1m)) by (persistentvolume) / 1024 / 1024 / 1024\n) +\nsum(avg(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance) / 1024 / 1024 / 1024) * $localStorageGBCost",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "storage cost",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Storage Cost",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "Sum of compute, memory, and storage costs",
              "fill": 1,
              "gridPos": {
                "h": 7,
                "w": 6,
                "x": 18,
                "y": 9
              },
              "id": 22,
              "interval": "1m",
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": false,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "# Compute\nsum(\n  avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100) +\n  avg(node_gpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n) +\n\n\n# Memory\nsum(\n  avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n) +\n\n# Storage \n\nsum(avg(pv_hourly_cost) by (persistentvolume) * 730 * avg(kube_persistentvolume_capacity_bytes) by (persistentvolume) / 1024 / 1024 / 1024) \n+\nsum(sum(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance) / 1024 / 1024 / 1024) * $localStorageGBCost",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "total cost",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Total Cost",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "columns": [],
              "datasource": "default-kubecost",
              "description": "Cost of by resource class of currently provisioned nodes",
              "fontSize": "100%",
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 0,
                "y": 16
              },
              "id": 8,
              "links": [],
              "pageSize": null,
              "scroll": true,
              "showHeader": true,
              "sort": {
                "col": 4,
                "desc": false
              },
              "styles": [
                {
                  "alias": "",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Time",
                  "thresholds": [],
                  "type": "hidden",
                  "unit": "short"
                },
                {
                  "alias": "Compute Cost",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "CPU Cost",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #A",
                  "thresholds": [],
                  "type": "number",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "Mem Cost",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #B",
                  "thresholds": [],
                  "type": "number",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "Total",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #C",
                  "thresholds": [],
                  "type": "number",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "instance",
                  "thresholds": [],
                  "type": "hidden",
                  "unit": "short"
                },
                {
                  "alias": "GPU",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #D",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                },
                {
                  "alias": "",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "decimals": 2,
                  "pattern": "/.*/",
                  "thresholds": [],
                  "type": "number",
                  "unit": "short"
                }
              ],
              "targets": [
                {
                  "expr": "avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost or up * 0) by (node) * 730 * (1-$useDiscount/100)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 1,
                  "legendFormat": "",
                  "refId": "A"
                },
                {
                  "expr": "avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730 * (1-$useDiscount/100)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 1,
                  "legendFormat": "",
                  "refId": "B"
                },
                {
                  "expr": "avg(node_gpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "D"
                },
                {
                  "expr": "# CPU  \navg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost or up * 0) by (node) * 730 * (1-$useDiscount/100) +\n# GPU\navg(node_gpu_hourly_cost) by (node) * 730 * (1-$useDiscount/100) +\n# Memory\navg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730 * (1-$useDiscount/100)\n",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "C"
                }
              ],
              "title": "Cost by node",
              "transform": "table",
              "type": "table"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "description": "Monthly run rate of attached disk + PV storage costs based on currently provisioned resources.",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 12,
                "x": 12,
                "y": 16
              },
              "id": 25,
              "interval": "1m",
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": true,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_cpu_cores) by (node) * avg(node_cpu_hourly_cost) by (node) * 730 +\n  avg(node_gpu_hourly_cost) by (node) * 730\n)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "cpu",
                  "refId": "B"
                },
                {
                  "expr": "sum(\n  avg(kube_node_status_capacity_memory_bytes) by (node) / 1024 / 1024 / 1024 * avg(node_ram_hourly_cost) by (node) * 730\n)",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "memory",
                  "refId": "A"
                },
                {
                  "expr": "sum(\n  avg(avg_over_time(pv_hourly_cost[$timeRange] offset 1m)) by (persistentvolume) * 730 \n  * avg(avg_over_time(kube_persistentvolume_capacity_bytes[$timeRange] offset 1m)) by (persistentvolume) / 1024 / 1024 / 1024\n) +\nsum(avg(container_fs_limit_bytes{device!=\"tmpfs\", id=\"/\"}) by (instance) / 1024 / 1024 / 1024) * $localStorageGBCost",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "storage",
                  "refId": "C"
                },
                {
                  "expr": "SUM(rate(node_network_transmit_bytes_total{device=\"eth0\"}[60m]) / 1024 / 1024 / 1024 ) * (60 * 60 * 24 * 30) * $percentEgress * $egressCost ",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "network",
                  "refId": "D"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Cost by Resource",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "currencyUSD",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "refresh": false,
          "schemaVersion": 16,
          "style": "dark",
          "tags": [
            "cost",
            "utilization",
            "metrics"
          ],
          "templating": {
            "list": [
              {
                "auto": true,
                "auto_count": 1,
                "auto_min": "1m",
                "current": {
                  "text": "auto",
                  "value": "$__auto_interval_timeRange"
                },
                "hide": 2,
                "label": null,
                "name": "timeRange",
                "options": [
                  {
                    "selected": true,
                    "text": "auto",
                    "value": "$__auto_interval_timeRange"
                  },
                  {
                    "selected": false,
                    "text": "1h",
                    "value": "1h"
                  },
                  {
                    "selected": false,
                    "text": "6h",
                    "value": "6h"
                  },
                  {
                    "selected": false,
                    "text": "12h",
                    "value": "12h"
                  },
                  {
                    "selected": false,
                    "text": "1d",
                    "value": "1d"
                  },
                  {
                    "selected": false,
                    "text": "7d",
                    "value": "7d"
                  },
                  {
                    "selected": false,
                    "text": "14d",
                    "value": "14d"
                  },
                  {
                    "selected": false,
                    "text": "30d",
                    "value": "30d"
                  },
                  {
                    "selected": false,
                    "text": "90d",
                    "value": "90d"
                  }
                ],
                "query": "1h,6h,12h,1d,7d,14d,30d,90d",
                "refresh": 2,
                "skipUrlSync": false,
                "type": "interval"
              },
              {
                "current": {
                  "text": ".04",
                  "value": ".04"
                },
                "hide": 2,
                "label": "Cost per Gb hour for attached disks",
                "name": "localStorageGBCost",
                "options": [
                  {
                    "selected": true,
                    "text": ".04",
                    "value": ".04"
                  }
                ],
                "query": ".04",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "current": {
                  "tags": [],
                  "text": "0",
                  "value": "0"
                },
                "hide": 0,
                "label": "Sustained Use Discount %",
                "name": "useDiscount",
                "options": [
                  {
                    "selected": true,
                    "text": "0",
                    "value": "0"
                  }
                ],
                "query": "0",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "current": {
                  "text": ".1",
                  "value": ".1"
                },
                "hide": 2,
                "label": null,
                "name": "percentEgress",
                "options": [
                  {
                    "selected": true,
                    "text": ".1",
                    "value": ".1"
                  }
                ],
                "query": ".1",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "current": {
                  "text": ".12",
                  "value": ".12"
                },
                "hide": 2,
                "label": null,
                "name": "egressCost",
                "options": [
                  {
                    "selected": true,
                    "text": ".12",
                    "value": ".12"
                  }
                ],
                "query": ".12",
                "skipUrlSync": false,
                "type": "constant"
              }
            ]
          },
          "time": {
            "from": "now-7d",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "",
          "title": "Kubecost cluster metrics",
          "uid": "JOUdHGZZz",
          "version": 20
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-cluster-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-utilization-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    cluster-utilization.json: |-
        {
            "annotations":{
                "list":[
                    {
                        "builtIn":1,
                        "datasource":"-- Grafana --",
                        "enable":true,
                        "hide":true,
                        "iconColor":"rgba(0, 211, 255, 1)",
                        "name":"Annotations & Alerts",
                        "type":"dashboard"
                    }
                ]
            },
            "description":"A dashboard to help manage Kubernetes cluster costs and resources",
            "editable":true,
            "gnetId":6873,
            "graphTooltip":0,
            "id":4,
            "iteration":1556759633456,
            "links":[
        
            ],
            "panels":[
                {
                    "content":"This dashboard shows monthly cost estimates for the cluster, based on **current** CPU, RAM and storage provisioned.",
                    "gridPos":{
                        "h":2,
                        "w":24,
                        "x":0,
                        "y":0
                    },
                    "id":86,
                    "links":[
        
                    ],
                    "mode":"markdown",
                    "title":"",
                    "transparent":true,
                    "type":"text"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":false,
                    "colors":[
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "format":"currencyUSD",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":false,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":6,
                        "x":0,
                        "y":2
                    },
                    "hideTimeOverride":true,
                    "id":75,
                    "interval":null,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"label_cloud_google_com_gke_preemptible",
                    "targets":[
                        {
                            "expr":"sum(\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) * $costpcpu\n )\n or\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) * ($costcpu - ($costcpu / 100 * $costDiscount))\n )\n) ",
                            "format":"time_series",
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":" {{ node }}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":"",
                    "timeFrom":"15m",
                    "timeShift":null,
                    "title":"CPU Cost",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":false,
                    "colors":[
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "format":"currencyUSD",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":false,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":6,
                        "x":6,
                        "y":2
                    },
                    "hideTimeOverride":true,
                    "id":77,
                    "interval":null,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"label_cloud_google_com_gke_preemptible",
                    "targets":[
                        {
                            "expr":"sum(\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) /1024/1024/1024 * $costpram\n )\n or\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) /1024/1024/1024 * ($costram - ($costram / 100 * $costDiscount))\n)\n) ",
                            "format":"time_series",
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":" {{ node }}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":"",
                    "timeFrom":"15m",
                    "timeShift":null,
                    "title":"RAM Cost",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":false,
                    "colors":[
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "format":"currencyUSD",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":false,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":6,
                        "x":12,
                        "y":2
                    },
                    "hideTimeOverride":true,
                    "id":78,
                    "interval":null,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"label_cloud_google_com_gke_preemptible",
                    "targets":[
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageSSD\n\n+\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageStandard\n\n+ \n\nsum(container_fs_limit_bytes{id=\"/\"}) / 1024 / 1024 / 1024 * 1.03 * $costStorageStandard",
                            "format":"time_series",
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":" {{ node }}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":"",
                    "timeFrom":"15m",
                    "timeShift":null,
                    "title":"Storage Cost (Cluster and PVC)",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":false,
                    "colors":[
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"Represents a near worst-case approximation of network costs.",
                    "format":"currencyUSD",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":false,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":6,
                        "x":18,
                        "y":2
                    },
                    "hideTimeOverride":true,
                    "id":129,
                    "interval":null,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"label_cloud_google_com_gke_preemptible",
                    "targets":[
                        {
                            "expr":"SUM(rate(node_network_transmit_bytes_total{device=\"eth0\"}[60m]) / 1024 / 1024 / 1024 ) * (60 * 60 * 24 * 30) * $costEgress",
                            "format":"time_series",
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":" {{ node }}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":"",
                    "timeFrom":"15m",
                    "timeShift":null,
                    "title":"Network Egress Cost",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"Current CPU use from applications divided by allocatable CPUs",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":0,
                        "y":6
                    },
                    "height":"180px",
                    "hideTimeOverride":true,
                    "id":82,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"(\n sum(\n count(irate(container_cpu_usage_seconds_total{id=\"/\"}[10m])) by (instance)\n * on (instance) \n sum(irate(container_cpu_usage_seconds_total{id=\"/\"}[10m])) by (instance)\n ) \n / \n (sum (kube_node_status_allocatable_cpu_cores))\n) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        }
                    ],
                    "thresholds":"30, 80",
                    "timeFrom":"",
                    "title":"CPU Utilization",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"Current CPU reservation requests from applications vs allocatable CPU",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":3,
                        "y":6
                    },
                    "height":"180px",
                    "id":91,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"SUM(kube_pod_container_resource_requests_cpu_cores) / SUM(kube_node_status_allocatable_cpu_cores) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        }
                    ],
                    "thresholds":"30, 80",
                    "title":"CPU Requests",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "description":"Current RAM use vs RAM available",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":6,
                        "y":6
                    },
                    "height":"180px",
                    "hideTimeOverride":true,
                    "id":80,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"SUM(container_memory_usage_bytes{namespace!=\"\"}) / SUM(kube_node_status_allocatable_memory_bytes) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        },
                        {
                            "expr":"",
                            "format":"time_series",
                            "intervalFactor":1,
                            "refId":"B"
                        }
                    ],
                    "thresholds":"30,80",
                    "timeFrom":"",
                    "title":"RAM Utilization",
                    "transparent":false,
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "description":"Current RAM requests vs RAM available",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":9,
                        "y":6
                    },
                    "height":"180px",
                    "id":92,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\"})\n /\n sum(kube_node_status_allocatable_memory_bytes)\n) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        }
                    ],
                    "thresholds":"30,80",
                    "title":"RAM Requests",
                    "transparent":false,
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"This gauge shows the current standard storage use, including cluster storage, vs storage available",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":12,
                        "y":6
                    },
                    "height":"180px",
                    "hideTimeOverride":true,
                    "id":95,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kubelet_volume_stats_used_bytes) by (persistentvolumeclaim, namespace) or up * 0\n + sum(container_fs_usage_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"})\n) /\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n + sum(container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"})\n) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        }
                    ],
                    "thresholds":"30, 80",
                    "timeFrom":"",
                    "title":"Storage Utilization",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":true,
                    "colors":[
                        "rgba(245, 54, 54, 0.9)",
                        "rgba(50, 172, 45, 0.97)",
                        "#c15c17"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"This gauge shows the current SSD use vs SSD available",
                    "editable":true,
                    "error":false,
                    "format":"percent",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":true,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":3,
                        "x":15,
                        "y":6
                    },
                    "height":"180px",
                    "hideTimeOverride":true,
                    "id":96,
                    "interval":null,
                    "isNew":true,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"",
                    "targets":[
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kubelet_volume_stats_used_bytes) by (persistentvolumeclaim, namespace)\n) /\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace)\n) * 100",
                            "format":"time_series",
                            "interval":"",
                            "intervalFactor":1,
                            "refId":"A",
                            "step":10
                        }
                    ],
                    "thresholds":"30, 80",
                    "timeFrom":"",
                    "title":"SSD Utilization",
                    "type":"singlestat",
                    "valueFontSize":"80%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "cacheTimeout":null,
                    "colorBackground":false,
                    "colorValue":false,
                    "colors":[
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                    ],
                    "datasource":"default-kubecost",
                    "decimals":2,
                    "description":"Expected monthly cost given current CPU, memory storage, and network resource consumption",
                    "format":"currencyUSD",
                    "gauge":{
                        "maxValue":100,
                        "minValue":0,
                        "show":false,
                        "thresholdLabels":false,
                        "thresholdMarkers":true
                    },
                    "gridPos":{
                        "h":4,
                        "w":6,
                        "x":18,
                        "y":6
                    },
                    "hideTimeOverride":true,
                    "id":93,
                    "interval":null,
                    "links":[
        
                    ],
                    "mappingType":1,
                    "mappingTypes":[
                        {
                            "name":"value to text",
                            "value":1
                        },
                        {
                            "name":"range to text",
                            "value":2
                        }
                    ],
                    "maxDataPoints":100,
                    "nullPointMode":"connected",
                    "nullText":null,
                    "postfix":"",
                    "postfixFontSize":"50%",
                    "prefix":"",
                    "prefixFontSize":"50%",
                    "rangeMaps":[
                        {
                            "from":"null",
                            "text":"N/A",
                            "to":"null"
                        }
                    ],
                    "sparkline":{
                        "fillColor":"rgba(31, 118, 189, 0.18)",
                        "full":false,
                        "lineColor":"rgb(31, 120, 193)",
                        "show":false
                    },
                    "tableColumn":"label_cloud_google_com_gke_preemptible",
                    "targets":[
                        {
                            "expr":"# CPU\nsum(\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) * $costpcpu\n )\n or\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) * ($costcpu - ($costcpu / 100 * $costDiscount))\n )\n) \n\n+ \n\n# Storage\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageSSD\n\n+\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageStandard\n\n+ \n\nsum(container_fs_limit_bytes{id=\"/\"}) / 1024 / 1024 / 1024 * 1.03 * $costStorageStandard \n\n+\n\n# END STORAGE\n# RAM \nsum(\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) /1024/1024/1024 * $costpram\n )\n or\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) /1024/1024/1024 * ($costram - ($costram / 100 * $costDiscount))\n)\n)\n\n+\n\n#Network \nSUM(rate(node_network_transmit_bytes_total{device=\"eth0\"}[60m]) / 1024 / 1024 / 1024 ) * (60 * 60 * 24 * 30) * $costEgress",
                            "format":"time_series",
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":" {{ node }}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":"",
                    "timeFrom":"15m",
                    "timeShift":null,
                    "title":"Total Monthly Cost",
                    "type":"singlestat",
                    "valueFontSize":"120%",
                    "valueMaps":[
                        {
                            "op":"=",
                            "text":"N/A",
                            "value":"null"
                        }
                    ],
                    "valueName":"current"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "description":"Expected monthly CPU, memory and storage costs given provisioned resources",
                    "fill":1,
                    "gridPos":{
                        "h":8,
                        "w":12,
                        "x":0,
                        "y":10
                    },
                    "id":120,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":false,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"# CPU\nsum(\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) * $costpcpu\n )\n or\n (\n (\n sum(kube_node_status_capacity_cpu_cores) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) * ($costcpu - ($costcpu / 100 * $costDiscount))\n )\n) \n\n+ \n\n# Storage\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageSSD\n\n+\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) or up * 0\n) / 1024 / 1024 /1024 * $costStorageStandard\n\n+ \n\nsum(container_fs_limit_bytes{id=\"/\"}) / 1024 / 1024 / 1024 * 1.03 * $costStorageStandard \n\n+\n\n# END STORAGE\n# RAM \nsum(\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible=\"true\"}) by (node)\n ) /1024/1024/1024 * $costpram\n )\n or\n (\n (\n sum(kube_node_status_capacity_memory_bytes) by (node)\n * on (node) group_left (label_cloud_google_com_gke_preemptible)\n avg(kube_node_labels{label_cloud_google_com_gke_preemptible!=\"true\"}) by (node)\n ) /1024/1024/1024 * ($costram - ($costram / 100 * $costDiscount))\n)\n) \n\n+\n\n#Network \nSUM(rate(node_network_transmit_bytes_total{device=\"eth0\"}[60m]) / 1024 / 1024 / 1024 ) * (60 * 60 * 24 * 30) * $costEgress",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"cluster cost",
                            "refId":"A"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Total monthly cost",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"currencyUSD",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "description":"Resources allocated to namespace based on container requests",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":8,
                        "w":12,
                        "x":12,
                        "y":10
                    },
                    "hideTimeOverride":false,
                    "id":73,
                    "links":[
        
                    ],
                    "pageSize":10,
                    "repeat":null,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":7,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"Namespace",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(50, 172, 45, 0.97)",
                                "#c15c17"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "link":true,
                            "linkTooltip":"View namespace cost metrics",
                            "linkUrl":"d/at-cost-analysis-namespace2/namespace-cost-metrics?&var-namespace=$__cell",
                            "pattern":"namespace",
                            "thresholds":[
                                "30",
                                "80"
                            ],
                            "type":"string",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"RAM",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "pattern":"Value #B",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"CPU",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"PV Storage",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #C",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"Total",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #D",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"CPU Utilization",
                            "colorMode":"value",
                            "colors":[
                                "#bf1b00",
                                "rgba(50, 172, 45, 0.97)",
                                "#ef843c"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #E",
                            "thresholds":[
                                "30",
                                "80"
                            ],
                            "type":"number",
                            "unit":"percent"
                        },
                        {
                            "alias":"RAM Utilization",
                            "colorMode":"value",
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(50, 172, 45, 0.97)",
                                "#ef843c"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #F",
                            "thresholds":[
                                "30",
                                "80"
                            ],
                            "type":"number",
                            "unit":"percent"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"(\n sum(kube_pod_container_resource_requests_cpu_cores{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible!=\"true\"}*($costcpu - ($costcpu / 100 * $costDiscount))) by(namespace)\n or\n count(\n count(container_spec_cpu_shares{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n(\n sum(kube_pod_container_resource_requests_cpu_cores{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible=\"true\"}*$costpcpu) by(namespace)\n or\n count(\n count(container_spec_cpu_shares{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)",
                            "format":"table",
                            "hide":false,
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":"{{ namespace }}",
                            "refId":"A"
                        },
                        {
                            "expr":"(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible!=\"true\"} / 1024 / 1024 / 1024*($costram- ($costram / 100 * $costDiscount))) by (namespace) \n or\n count(\n count(container_spec_memory_limit_bytes{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible=\"true\"} / 1024 / 1024 / 1024 * $costpram ) by (namespace) \n or\n count(\n count(container_spec_memory_limit_bytes{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "legendFormat":"{{ namespace }}",
                            "refId":"B"
                        },
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) \n) by (namespace) / 1024 / 1024 /1024 * $costStorageSSD \n\nor\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) \n) by (namespace) / 1024 / 1024 /1024 * $costStorageStandard",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "legendFormat":"{{ namespace }}",
                            "refId":"C"
                        },
                        {
                            "expr":"# CPU \n(\n sum(kube_pod_container_resource_requests_cpu_cores{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible!=\"true\"}*($costcpu - ($costcpu / 100 * $costDiscount))) by(namespace)\n or\n count(\n count(container_spec_cpu_shares{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n(\n sum(kube_pod_container_resource_requests_cpu_cores{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible=\"true\"}*$costpcpu) by(namespace)\n or\n count(\n count(container_spec_cpu_shares{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n#END CPU \n# Memory \n\n(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible!=\"true\"} / 1024 / 1024 / 1024*($costram- ($costram / 100 * $costDiscount))) by (namespace) \n or\n count(\n count(container_spec_memory_limit_bytes{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n(\n sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\",namespace!=\"kube-system\",cloud_google_com_gke_preemptible=\"true\"} / 1024 / 1024 / 1024 * $costpram ) by (namespace) \n or\n count(\n count(container_spec_memory_limit_bytes{namespace!=\"\",namespace!=\"kube-system\"}) by(namespace)\n ) by(namespace) -1\n)\n\n+\n\n# PV storage\n\n(\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) \n) by (namespace) / 1024 / 1024 /1024 * $costStorageSSD \n\nor\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim, namespace) \n) by (namespace) / 1024 / 1024 /1024 * $costStorageStandard \n)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "legendFormat":"Total",
                            "refId":"D"
                        }
                    ],
                    "timeFrom":"",
                    "timeShift":null,
                    "title":"Namespace cost allocation",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "collapsed":false,
                    "gridPos":{
                        "h":1,
                        "w":24,
                        "x":0,
                        "y":18
                    },
                    "id":108,
                    "panels":[
        
                    ],
                    "title":"CPU Metrics",
                    "type":"row"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":8,
                        "w":24,
                        "x":0,
                        "y":19
                    },
                    "id":116,
                    "legend":{
                        "alignAsTable":false,
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "rightSide":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"SUM(kube_node_status_capacity_cpu_cores)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"capacity",
                            "refId":"A"
                        },
                        {
                            "expr":"SUM(kube_pod_container_resource_requests_cpu_cores)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"requests",
                            "refId":"C"
                        },
                        {
                            "expr":"SUM(irate(container_cpu_usage_seconds_total{id=\"/\"}[5m]))",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"usage",
                            "refId":"B"
                        },
                        {
                            "expr":"SUM(kube_pod_container_resource_limits_cpu_cores) ",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"limits",
                            "refId":"D"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Cluster CPUs",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "decimals":1,
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":8,
                        "w":24,
                        "x":0,
                        "y":27
                    },
                    "id":130,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"avg(irate(node_cpu_seconds_total{mode!=\"idle\"}[5m])) by (mode) * 100",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"{{mode}}",
                            "refId":"A"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"CPU Mode",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"percent",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"percent",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":false
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "description":"This table shows the comparison of CPU requests and usage by namespace",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":0,
                        "y":35
                    },
                    "hideTimeOverride":true,
                    "id":104,
                    "links":[
        
                    ],
                    "pageSize":8,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":1,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"CPU Requests",
                            "colorMode":null,
                            "colors":[
                                "#fceaca",
                                "#fce2de",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
                                ""
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Node",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"node",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"CPU Requests",
                            "colorMode":"value",
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(50, 172, 45, 0.97)",
                                "#cffaff"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
                                ""
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"24h CPU Usage",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #C",
                            "thresholds":[
                                "30"
                            ],
                            "type":"number",
                            "unit":"none"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "link":true,
                            "linkTooltip":"View namespace cost metrics",
                            "linkUrl":"d/at-cost-analysis-namespace2/namespace-cost-metrics?&var-namespace=$__cell",
                            "mappingType":1,
                            "pattern":"namespace",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"sum(kube_pod_container_resource_requests_cpu_cores{namespace!=\"\"}) by (namespace) ",
                            "format":"table",
                            "hide":false,
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":"",
                            "refId":"A"
                        },
                        {
                            "expr":"sum (rate (container_cpu_usage_seconds_total{image!=\"\",namespace!=\"\"}[24h])) by (namespace)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "legendFormat":"{{ namespace }}",
                            "refId":"C"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"CPU request utilization by namespace",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "description":"This table shows the comparison of application CPU usage vs the capacity of the node (measured over last 60 minutes)",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":12,
                        "y":35
                    },
                    "hideTimeOverride":true,
                    "id":90,
                    "links":[
        
                    ],
                    "pageSize":8,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":2,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"CPU Request Utilization",
                            "colorMode":"value",
                            "colors":[
                                "#ef843c",
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
                                ".30",
                                " .80"
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        },
                        {
                            "alias":"Node",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"node",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"CPU Utilization",
                            "colorMode":"value",
                            "colors":[
                                "#ef843c",
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
                                ".20",
                                " .80"
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        },
                        {
                            "alias":"24h Utilization ",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"SUM(\nSUM(rate(container_cpu_usage_seconds_total[24h])) by (pod_name)\n* on (pod_name) group_left (node) \nlabel_replace(\n avg(kube_pod_info{}),\n \"pod_name\", \n \"$1\", \n \"pod\", \n \"(.+)\"\n)\n) by (node) \n/ \nsum(kube_node_status_capacity_cpu_cores) by (node)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"B"
                        },
                        {
                            "expr":"sum(kube_pod_container_resource_requests_cpu_cores) by (node) / sum(kube_node_status_capacity_cpu_cores) by (node)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"A"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Cluster cost & utilization by node",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "collapsed":false,
                    "gridPos":{
                        "h":1,
                        "w":24,
                        "x":0,
                        "y":45
                    },
                    "id":113,
                    "panels":[
        
                    ],
                    "title":"Memory Metrics",
                    "type":"row"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":8,
                        "w":24,
                        "x":0,
                        "y":46
                    },
                    "id":117,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":false,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"SUM(kube_node_status_capacity_memory_bytes / 1024 / 1024 / 1024)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"capacity",
                            "refId":"A"
                        },
                        {
                            "expr":"SUM(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\"} / 1024 / 1024 / 1024)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"requests",
                            "refId":"C"
                        },
                        {
                            "expr":"SUM(container_memory_usage_bytes{image!=\"\"} / 1024 / 1024 / 1024)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"usage",
                            "refId":"B"
                        },
                        {
                            "expr":"SUM(kube_pod_container_resource_limits_memory_bytes {namespace!=\"\"} / 1024 / 1024 / 1024)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"limits",
                            "refId":"D"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Cluster memory (GB)",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"decgbytes",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":8,
                        "w":24,
                        "x":0,
                        "y":54
                    },
                    "id":131,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":false,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"1 - sum(node_memory_MemAvailable_bytes) by (node) / sum(node_memory_MemTotal_bytes) by (node)",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"usage",
                            "refId":"A"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Cluster Memory Utilization",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"percentunit",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "description":"Comparison of memory requests and current usage by namespace",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":0,
                        "y":62
                    },
                    "hideTimeOverride":true,
                    "id":109,
                    "links":[
        
                    ],
                    "pageSize":7,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":1,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"Mem Requests (GB)",
                            "colorMode":null,
                            "colors":[
                                "#fceaca",
                                "#fce2de",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
                                ""
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Node",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"node",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"CPU Requests",
                            "colorMode":"value",
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(50, 172, 45, 0.97)",
                                "#cffaff"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
                                ""
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"24h Mem Usage",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "#508642",
                                "#e5ac0e"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #C",
                            "thresholds":[
                                ".30",
                                ".75"
                            ],
                            "type":"number",
                            "unit":"none"
                        },
                        {
                            "alias":"Namespace",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "link":true,
                            "linkTooltip":"View namespace cost metrics",
                            "linkUrl":"d/at-cost-analysis-namespace2/namespace-cost-metrics?&var-namespace=$__cell",
                            "mappingType":1,
                            "pattern":"namespace",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\"} / 1024 / 1024 / 1024) by (namespace) ",
                            "format":"table",
                            "hide":false,
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":"",
                            "refId":"A"
                        },
                        {
                            "expr":"SUM(container_memory_usage_bytes{image!=\"\",namespace!=\"\"} / 1024 / 1024 / 1024) by (namespace)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "legendFormat":"",
                            "refId":"C"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Memory requests & utilization by namespace",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "description":"Container RAM usage vs node capacity",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":12,
                        "y":62
                    },
                    "hideTimeOverride":true,
                    "id":114,
                    "links":[
        
                    ],
                    "pageSize":8,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":1,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"RAM Requests",
                            "colorMode":"value",
                            "colors":[
                                "#ef843c",
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
                                "30",
                                " 80"
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        },
                        {
                            "alias":"Node",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"node",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"RAM Usage",
                            "colorMode":"value",
                            "colors":[
                                "#ef843c",
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
                                "25",
                                " 80"
                            ],
                            "type":"number",
                            "unit":"percent"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"SUM(label_replace(container_memory_usage_bytes{namespace!=\"\"}, \"node\", \"$1\", \"instance\",\"(.+)\")) by (node) * 100\n/\nSUM(kube_node_status_capacity_memory_bytes) by (node)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"B"
                        },
                        {
                            "expr":"sum(kube_pod_container_resource_requests_memory_bytes{namespace!=\"\"}) by (node) / SUM(kube_node_status_capacity_memory_bytes) by (node)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"A"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Node utilization of allocatable RAM",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "collapsed":false,
                    "gridPos":{
                        "h":1,
                        "w":24,
                        "x":0,
                        "y":72
                    },
                    "id":101,
                    "panels":[
        
                    ],
                    "title":"Storage Metrics",
                    "type":"row"
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":9,
                        "w":12,
                        "x":0,
                        "y":73
                    },
                    "hideTimeOverride":true,
                    "id":97,
                    "links":[
        
                    ],
                    "pageSize":8,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":4,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"Node",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"instance",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"PVC Name",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"persistentvolumeclaim",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Storage Class",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"storageclass",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Cost",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"Cost",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"Size (GB)",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Usage",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #C",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"SUM(container_fs_limit_bytes{id=\"/\"}) by (instance) / 1024 / 1024 / 1024 * 1.03",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"B"
                        },
                        {
                            "expr":"SUM(container_fs_limit_bytes{id=\"/\"}) by (instance) / 1024 / 1024 / 1024 * 1.03 * $costStorageStandard\n",
                            "format":"table",
                            "hide":false,
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":"{{ persistentvolumeclaim }}",
                            "refId":"A"
                        },
                        {
                            "expr":"sum(container_fs_usage_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"} / container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\"}) by (instance) \n",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"C"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Local Storage",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":9,
                        "w":12,
                        "x":12,
                        "y":73
                    },
                    "id":128,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"SUM(container_fs_usage_bytes{id=\"/\"}) / SUM(container_fs_limit_bytes{id=\"/\"})",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"reads",
                            "refId":"D"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Local storage utilization",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"percent",
                            "label":"IOPS",
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "columns":[
                        {
                            "text":"Avg",
                            "value":"avg"
                        }
                    ],
                    "datasource":"default-kubecost",
                    "fontSize":"100%",
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":0,
                        "y":82
                    },
                    "hideTimeOverride":true,
                    "id":94,
                    "links":[
        
                    ],
                    "pageSize":10,
                    "repeatDirection":"v",
                    "scroll":true,
                    "showHeader":true,
                    "sort":{
                        "col":2,
                        "desc":true
                    },
                    "styles":[
                        {
                            "alias":"Namespace",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "link":true,
                            "linkTooltip":"View namespace cost metrics",
                            "linkUrl":"d/at-cost-analysis-namespace2/namespace-cost-metrics?&var-namespace=$__cell",
                            "mappingType":1,
                            "pattern":"namespace",
                            "thresholds":[
        
                            ],
                            "type":"string",
                            "unit":"short"
                        },
                        {
                            "alias":"PVC Name",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"persistentvolumeclaim",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Storage Class",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"storageclass",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        },
                        {
                            "alias":"Cost",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Time",
                            "thresholds":[
        
                            ],
                            "type":"hidden",
                            "unit":"short"
                        },
                        {
                            "alias":"Cost",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #A",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"currencyUSD"
                        },
                        {
                            "alias":"Usage",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #B",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"percentunit"
                        },
                        {
                            "alias":"Size (GB)",
                            "colorMode":null,
                            "colors":[
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "dateFormat":"YYYY-MM-DD HH:mm:ss",
                            "decimals":2,
                            "mappingType":1,
                            "pattern":"Value #C",
                            "thresholds":[
        
                            ],
                            "type":"number",
                            "unit":"short"
                        }
                    ],
                    "targets":[
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n * on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim,storageclass) / 1024 / 1024 /1024\n\nor\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n * on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim,storageclass) / 1024 / 1024 /1024\n\n\n",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"C"
                        },
                        {
                            "expr":"sum (\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n * on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim,storageclass) / 1024 / 1024 /1024 * $costStorageSSD\n\nor\n\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n * on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim,storageclass) / 1024 / 1024 /1024 * $costStorageStandard\n",
                            "format":"table",
                            "hide":false,
                            "instant":true,
                            "interval":"",
                            "intervalFactor":1,
                            "legendFormat":"{{ persistentvolumeclaim }}",
                            "refId":"A"
                        },
                        {
                            "expr":"sum(kubelet_volume_stats_used_bytes) by (persistentvolumeclaim, namespace) \n/\nsum (\n sum(kube_persistentvolumeclaim_info{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace, storageclass)\n * on (persistentvolumeclaim, namespace) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{storageclass!~\".*ssd.*\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim)",
                            "format":"table",
                            "instant":true,
                            "intervalFactor":1,
                            "refId":"B"
                        }
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Persistent Volume Claims",
                    "transform":"table",
                    "transparent":false,
                    "type":"table"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":10,
                        "w":12,
                        "x":12,
                        "y":82
                    },
                    "id":132,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"SUM(rate(node_disk_reads_completed_total[10m])) or SUM(rate(node_disk_reads_completed[10m]))\n",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"reads",
                            "refId":"D"
                        },
                        {
                            "expr":"SUM(rate(node_disk_writes_completed_total[10m])) or SUM(rate(node_disk_writes_completed[10m]))",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"writes",
                            "refId":"A"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Disk IOPS",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"none",
                            "label":"IOPS",
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":9,
                        "w":24,
                        "x":0,
                        "y":92
                    },
                    "id":122,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"SUM( kubelet_volume_stats_inodes_used / kubelet_volume_stats_inodes) by (persistentvolumeclaim) * 100",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"",
                            "refId":"D"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Inode usage",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"percent",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                },
                {
                    "collapsed":false,
                    "gridPos":{
                        "h":1,
                        "w":24,
                        "x":0,
                        "y":101
                    },
                    "id":127,
                    "panels":[
        
                    ],
                    "title":"Network",
                    "type":"row"
                },
                {
                    "aliasColors":{
        
                    },
                    "bars":false,
                    "dashLength":10,
                    "dashes":false,
                    "datasource":"default-kubecost",
                    "fill":1,
                    "gridPos":{
                        "h":9,
                        "w":24,
                        "x":0,
                        "y":102
                    },
                    "id":123,
                    "legend":{
                        "avg":false,
                        "current":false,
                        "max":false,
                        "min":false,
                        "show":true,
                        "total":false,
                        "values":false
                    },
                    "lines":true,
                    "linewidth":1,
                    "links":[
        
                    ],
                    "nullPointMode":"null",
                    "percentage":false,
                    "pointradius":5,
                    "points":false,
                    "renderer":"flot",
                    "seriesOverrides":[
        
                    ],
                    "spaceLength":10,
                    "stack":false,
                    "steppedLine":false,
                    "targets":[
                        {
                            "expr":"sum (rate (node_network_transmit_bytes_total{}[60m]))\n",
                            "format":"time_series",
                            "intervalFactor":1,
                            "legendFormat":"node_out",
                            "refId":"B"
                        },
                        {
                            "expr":"SUM ( rate(node_network_transmit_bytes_total{device=\"eth0\"}[60m]))",
                            "format":"time_series",
                            "instant":false,
                            "intervalFactor":1,
                            "legendFormat":"eth0 out",
                            "refId":"C"
                        }
                    ],
                    "thresholds":[
        
                    ],
                    "timeFrom":null,
                    "timeShift":null,
                    "title":"Node network transmit",
                    "tooltip":{
                        "shared":true,
                        "sort":0,
                        "value_type":"individual"
                    },
                    "type":"graph",
                    "xaxis":{
                        "buckets":null,
                        "mode":"time",
                        "name":null,
                        "show":true,
                        "values":[
        
                        ]
                    },
                    "yaxes":[
                        {
                            "format":"decbytes",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        },
                        {
                            "format":"short",
                            "label":null,
                            "logBase":1,
                            "max":null,
                            "min":null,
                            "show":true
                        }
                    ],
                    "yaxis":{
                        "align":false,
                        "alignLevel":null
                    }
                }
            ],
            "refresh":"15m",
            "schemaVersion":16,
            "style":"dark",
            "tags":[
                "cost",
                "utilization",
                "metrics"
            ],
            "templating":{
                "list":[
                    {
                        "current":{
                            "text":"23.076",
                            "value":"23.076"
                        },
                        "hide":0,
                        "label":"CPU",
                        "name":"costcpu",
                        "options":[
                            {
                                "text":"23.076",
                                "value":"23.076"
                            }
                        ],
                        "query":"23.076",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":"5.10",
                            "value":"5.10"
                        },
                        "hide":0,
                        "label":"PE CPU",
                        "name":"costpcpu",
                        "options":[
                            {
                                "text":"5.10",
                                "value":"5.10"
                            }
                        ],
                        "query":"5.10",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":"3.25",
                            "value":"3.25"
                        },
                        "hide":0,
                        "label":"RAM",
                        "name":"costram",
                        "options":[
                            {
                                "text":"3.25",
                                "value":"3.25"
                            }
                        ],
                        "query":"3.25",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":"0.6862",
                            "value":"0.6862"
                        },
                        "hide":0,
                        "label":"PE RAM",
                        "name":"costpram",
                        "options":[
                            {
                                "text":"0.6862",
                                "value":"0.6862"
                            }
                        ],
                        "query":"0.6862",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":"0.040",
                            "value":"0.040"
                        },
                        "hide":0,
                        "label":"Storage",
                        "name":"costStorageStandard",
                        "options":[
                            {
                                "text":"0.040",
                                "value":"0.040"
                            }
                        ],
                        "query":"0.040",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":".17",
                            "value":".17"
                        },
                        "hide":0,
                        "label":"SSD",
                        "name":"costStorageSSD",
                        "options":[
                            {
                                "text":".17",
                                "value":".17"
                            }
                        ],
                        "query":".17",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":".12",
                            "value":".12"
                        },
                        "hide":0,
                        "label":"Egress",
                        "name":"costEgress",
                        "options":[
                            {
                                "selected":true,
                                "text":".12",
                                "value":".12"
                            }
                        ],
                        "query":".12",
                        "skipUrlSync":false,
                        "type":"constant"
                    },
                    {
                        "current":{
                            "text":"30",
                            "value":"30"
                        },
                        "hide":0,
                        "label":"Discount",
                        "name":"costDiscount",
                        "options":[
                            {
                                "text":"30",
                                "value":"30"
                            }
                        ],
                        "query":"30",
                        "skipUrlSync":false,
                        "type":"constant"
                    }
                ]
            },
            "time":{
                "from":"now-24h",
                "to":"now"
            },
            "timepicker":{
                "hidden":false,
                "refresh_intervals":[
                    "5s",
                    "10s",
                    "30s",
                    "1m",
                    "5m",
                    "15m",
                    "30m",
                    "1h",
                    "2h",
                    "1d"
                ],
                "time_options":[
                    "5m",
                    "15m",
                    "1h",
                    "6h",
                    "12h",
                    "24h",
                    "2d",
                    "7d",
                    "30d"
                ]
            },
            "timezone":"browser",
            "title":"Cluster cost & utilization metrics",
            "uid":"cluster-costs",
            "version":1
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-deployment-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: deployment-utilization-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    deployment-utilization.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "description": "Monitors Kubernetes deployments in cluster using Prometheus and kube-state-metrics. Shows resource utilization of deployments, daemonsets, and statefulsets.",
          "editable": true,
          "gnetId": 8588,
          "graphTooltip": 0,
          "id": 2,
          "iteration": 1586200623748,
          "links": [],
          "panels": [
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(50, 172, 45, 0.97)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(245, 54, 54, 0.9)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 8,
                "x": 0,
                "y": 0
              },
              "height": "180px",
              "id": 1,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (container_memory_working_set_bytes{container!=\"\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", kubernetes_io_hostname=~\"^$Node$\", pod_name!=\"\"}) / sum (kube_node_status_allocatable_memory_bytes{node=~\"^$Node.*$\"}) * 100",
                  "format": "time_series",
                  "interval": "10s",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 900
                }
              ],
              "thresholds": "65, 90",
              "title": "Deployment memory usage",
              "transparent": false,
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(50, 172, 45, 0.97)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(245, 54, 54, 0.9)"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 8,
                "x": 8,
                "y": 0
              },
              "height": "180px",
              "id": 2,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (rate (container_cpu_usage_seconds_total{pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", kubernetes_io_hostname=~\"^$Node$\"}[2m])) / sum (machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"}) * 100",
                  "format": "time_series",
                  "interval": "10s",
                  "intervalFactor": 1,
                  "refId": "A",
                  "step": 900
                }
              ],
              "thresholds": "65, 90",
              "title": "Deployment CPU usage",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": true,
              "colors": [
                "rgba(50, 172, 45, 0.97)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(245, 54, 54, 0.9)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "percent",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": true,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 8,
                "x": 16,
                "y": 0
              },
              "height": "180px",
              "id": 3,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "(((sum(kube_deployment_status_replicas{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_desired_number_scheduled{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))) - ((sum(kube_deployment_status_replicas_available{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_status_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_number_ready{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)))) / ((sum(kube_deployment_status_replicas{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_desired_number_scheduled{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))) * 100",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "1,30",
              "title": "Unavailable Replicas",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "bytes",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 0,
                "y": 5
              },
              "height": "100px",
              "id": 4,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(container_memory_working_set_bytes{container!=\"\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", kubernetes_io_hostname=~\"^$Node$\", pod_name!=\"\"})",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Used",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "bytes",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 4,
                "y": 5
              },
              "height": "100px",
              "id": 5,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (kube_node_status_allocatable_memory_bytes{node=~\"^$Node.*$\"})",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Total",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 8,
                "y": 5
              },
              "height": "100px",
              "id": 6,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": " cores",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (rate (container_cpu_usage_seconds_total{pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\", kubernetes_io_hostname=~\"^$Node$\"}[5m]))",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Used",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 12,
                "y": 5
              },
              "height": "100px",
              "id": 7,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": " cores",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum (machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"})",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Total",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "avg"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 16,
                "y": 5
              },
              "height": "100px",
              "id": 8,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "(sum(kube_deployment_status_replicas_available{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_status_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_number_ready{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Available (cluster)",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "rgba(245, 54, 54, 0.9)",
                "rgba(237, 129, 40, 0.89)",
                "rgba(50, 172, 45, 0.97)"
              ],
              "datasource": "default-kubecost",
              "editable": true,
              "error": false,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 3,
                "w": 4,
                "x": 20,
                "y": 5
              },
              "height": "100px",
              "id": 9,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "(sum(kube_deployment_status_replicas{deployment=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_statefulset_replicas{statefulset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0)) + (sum(kube_daemonset_status_desired_number_scheduled{daemonset=~\".*$Deployment$Statefulset$Daemonset\"}) or vector(0))",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "{{ $Daemonset }}",
                  "refId": "A",
                  "step": 1800
                }
              ],
              "thresholds": "",
              "title": "Total (cluster)",
              "type": "singlestat",
              "valueFontSize": "50%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 3,
              "editable": true,
              "error": false,
              "fill": 0,
              "grid": {},
              "gridPos": {
                "h": 11,
                "w": 24,
                "x": 0,
                "y": 8
              },
              "height": "",
              "id": 10,
              "legend": {
                "alignAsTable": true,
                "avg": false,
                "current": true,
                "hideEmpty": false,
                "hideZero": false,
                "max": true,
                "min": false,
                "rightSide": true,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [
                {
                  "alias": "/avlbl.*/",
                  "yaxis": 2
                }
              ],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum (irate (container_cpu_usage_seconds_total{container!=\"\",image!=\"\",name=~\"^k8s_.*\",io_kubernetes_container_name!=\"POD\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",kubernetes_io_hostname=~\"^$Node$\"}[5m])) by (pod_name,kubernetes_io_hostname)",
                  "format": "time_series",
                  "hide": false,
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "usage: {{ kubernetes_io_hostname }} | {{ pod_name }} ",
                  "metric": "container_cpu",
                  "refId": "A",
                  "step": 60
                },
                {
                  "expr": "sum (kube_pod_container_resource_requests_cpu_cores{pod=~\"^$Deployment$Statefulset$Daemonset.*$\",node=~\"^$Node$\"}) by (pod,node)",
                  "format": "time_series",
                  "hide": false,
                  "intervalFactor": 2,
                  "legendFormat": "rqst: {{ node }} | {{ pod }}",
                  "refId": "B",
                  "step": 120
                },
                {
                  "expr": "sum ((kube_node_status_allocatable_cpu_cores{node=~\"^$Node$\"})) by (node)",
                  "format": "time_series",
                  "hide": true,
                  "intervalFactor": 2,
                  "legendFormat": "avlbl: {{ node }}",
                  "refId": "C",
                  "step": 30
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "CPU usage & requests",
              "tooltip": {
                "msResolution": true,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": "cores",
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 2,
              "editable": true,
              "error": false,
              "fill": 0,
              "grid": {},
              "gridPos": {
                "h": 13,
                "w": 24,
                "x": 0,
                "y": 19
              },
              "id": 11,
              "legend": {
                "alignAsTable": true,
                "avg": false,
                "current": true,
                "max": true,
                "min": false,
                "rightSide": true,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [
                {
                  "alias": "/^avlbl.*$/",
                  "yaxis": 2
                }
              ],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "max (container_memory_working_set_bytes{container!=\"POD\",container!=\"\",id!=\"/\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",kubernetes_io_hostname=~\"^$Node$\"}) by (pod_name,kubernetes_io_hostname)",
                  "format": "time_series",
                  "hide": false,
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "usage: {{kubernetes_io_hostname }} | {{ pod_name }}",
                  "metric": "container_memory_usage:sort_desc",
                  "refId": "A",
                  "step": 60
                },
                {
                  "expr": "sum ((kube_pod_container_resource_requests_memory_bytes{pod=~\"^$Deployment$Statefulset$Daemonset.*$\",node=~\"^$Node$\"})) by (pod,node)",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "rqst: {{ node }} | {{ pod }}",
                  "refId": "B",
                  "step": 120
                },
                {
                  "expr": "sum ((kube_node_status_allocatable_memory_bytes{node=~\"^$Node$\"})) by (node)",
                  "format": "time_series",
                  "hide": true,
                  "intervalFactor": 2,
                  "legendFormat": "avlbl: {{ node }}",
                  "refId": "C",
                  "step": 30
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Memory usage & requests",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 9,
                "w": 24,
                "x": 0,
                "y": 32
              },
              "id": 12,
              "legend": {
                "alignAsTable": true,
                "avg": false,
                "current": true,
                "max": false,
                "min": false,
                "rightSide": true,
                "show": true,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "100 * (kubelet_volume_stats_used_bytes{kubernetes_io_hostname=~\"^$Node$\", persistentvolumeclaim=~\".*$Deployment$Statefulset$Daemonset.*$\"} / kubelet_volume_stats_capacity_bytes{kubernetes_io_hostname=~\"^$Node$\", persistentvolumeclaim=~\".*$Deployment$Statefulset$Daemonset.*$\"})",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "legendFormat": "{{ persistentvolumeclaim }} | {{ kubernetes_io_hostname }}",
                  "refId": "A",
                  "step": 120
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Disk Usage",
              "tooltip": {
                "shared": true,
                "sort": 2,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "percent",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 2,
              "editable": true,
              "error": false,
              "fill": 1,
              "grid": {},
              "gridPos": {
                "h": 13,
                "w": 24,
                "x": 0,
                "y": 41
              },
              "id": 13,
              "legend": {
                "alignAsTable": true,
                "avg": true,
                "current": true,
                "max": true,
                "min": false,
                "rightSide": true,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum (rate (container_network_receive_bytes_total{id!=\"/\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",kubernetes_io_hostname=~\"^$Node$\"}[2m])) by (pod_name, kubernetes_io_hostname)",
                  "format": "time_series",
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "-> {{ kubernetes_io_hostname }} | {{ pod_name }}",
                  "metric": "network",
                  "refId": "A",
                  "step": 60
                },
                {
                  "expr": "- sum( rate (container_network_transmit_bytes_total{id!=\"/\",pod_name=~\"^$Deployment$Statefulset$Daemonset.*$\",kubernetes_io_hostname=~\"^$Node$\"}[2m])) by (pod_name, kubernetes_io_hostname)",
                  "format": "time_series",
                  "interval": "10s",
                  "intervalFactor": 1,
                  "legendFormat": "<- {{ kubernetes_io_hostname }} | {{ pod_name }}",
                  "metric": "network",
                  "refId": "B",
                  "step": 60
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "All processes network I/O",
              "tooltip": {
                "msResolution": false,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "Bps",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "refresh": false,
          "schemaVersion": 16,
          "style": "dark",
          "tags": [
            "kubernetes",
            "deployment"
          ],
          "templating": {
            "list": [
              {
                "allValue": "()",
                "current": {
                  "selected": false,
                  "tags": [],
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "Deployment",
                "options": [],
                "query": "label_values(deployment)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": "()",
                "current": {
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "Statefulset",
                "options": [],
                "query": "label_values(statefulset)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": "()",
                "current": {
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "Daemonset",
                "options": [],
                "query": "label_values(daemonset)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": ".*",
                "current": {
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "Node",
                "options": [],
                "query": "label_values(kubernetes_io_hostname)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-24h",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "browser",
          "title": "Deployment/Statefulset/Daemonset utilization metrics",
          "uid": "deployment-metrics",
          "version": 1
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-label-cost-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: label-cost-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    label-cost-utilization.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "editable": true,
          "gnetId": null,
          "graphTooltip": 0,
          "id": 7,
          "iteration": 1586214000479,
          "links": [],
          "panels": [
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Monthly projected CPU cost given last 10m",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 6,
                "x": 0,
                "y": 0
              },
              "hideTimeOverride": true,
              "id": 15,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(\n  avg(container_cpu_allocation) by (pod,node)\n\n  * on (node) group_left()\n  avg(avg_over_time(node_cpu_hourly_cost[10m])) by (node)\n\n  * on (pod) group_left()\n  label_replace(\n    max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod),\n    \"pod_name\",\n    \"$1\", \n    \"pod\", \n    \"(.+)\"\n  )\n) * 730",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "CPU Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Based on CPU usage over last 24 hours",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 6,
                "x": 6,
                "y": 0
              },
              "hideTimeOverride": true,
              "id": 16,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(\n  avg(container_memory_allocation_bytes) by (pod,node) / 1024 / 1024 / 1024\n\n  * on (node) group_left()\n  avg(avg_over_time(node_ram_hourly_cost[10m])) by (node)\n\n  * on (pod) group_left()\n  label_replace(\n    max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod),\n    \"pod_name\",\n    \"$1\", \n    \"pod\", \n    \"(.+)\"\n  )\n) * 730",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Memory Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 6,
                "x": 12,
                "y": 0
              },
              "hideTimeOverride": true,
              "id": 21,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "sum(\n sum(kube_persistentvolumeclaim_info{storageclass!=\".*ssd.*\"}) by (persistentvolumeclaim, storageclass)\n * on (persistentvolumeclaim) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim)\n * on (persistentvolumeclaim) group_left(label_app)\n max(kube_persistentvolumeclaim_labels{label_$label=~\"$label_value\"}) by (persistentvolumeclaim) or up * 0\n) / 1024 / 1024 /1024 * .04 \n\n+\n\nsum(\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, storageclass)\n * on (persistentvolumeclaim) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim)\n * on (persistentvolumeclaim) group_left(label_app)\n max(kube_persistentvolumeclaim_labels{label_$label=~\"$label_value\"}) by (persistentvolumeclaim) or up * 0\n) / 1024 / 1024 /1024 * .17 \n",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Storage Cost",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Cost of memory + CPU usage",
              "format": "currencyUSD",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 5,
                "w": 6,
                "x": 18,
                "y": 0
              },
              "hideTimeOverride": true,
              "id": 20,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "label_cloud_google_com_gke_preemptible",
              "targets": [
                {
                  "expr": "# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ CPU ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nsum(\n  avg(container_cpu_allocation) by (pod,node)\n\n  * on (node) group_left()\n  avg(avg_over_time(node_cpu_hourly_cost[10m])) by (node)\n\n  * on (pod) group_left()\n  label_replace(\n    max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod),\n    \"pod_name\",\n    \"$1\", \n    \"pod\", \n    \"(.+)\"\n  )\n) * 730\n\n#END CPU\n+\n\n# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Memory ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nsum(\n  avg(container_memory_allocation_bytes) by (pod,node) / 1024 / 1024 / 1024\n\n  * on (node) group_left()\n  avg(avg_over_time(node_ram_hourly_cost[10m])) by (node)\n\n  * on (pod) group_left()\n  label_replace(\n    max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod),\n    \"pod_name\",\n    \"$1\", \n    \"pod\", \n    \"(.+)\"\n  )\n) * 730\n\n# END MEMORY\n\n+\n\n# ~~~~~~~~~~~~~~~~~~~~~~~~~~~ STORAGE ~~~~~~~~~~~~~~~~~~~~~~~~~\n\nsum(\n sum(kube_persistentvolumeclaim_info{storageclass!=\".*ssd.*\"}) by (persistentvolumeclaim, storageclass)\n * on (persistentvolumeclaim) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim)\n * on (persistentvolumeclaim) group_left(label_app)\n max(kube_persistentvolumeclaim_labels{label_$label=~\"$label_value\"}) by (persistentvolumeclaim) or up * 0\n) / 1024 / 1024 /1024 * .04 \n\n+\n\nsum(\n sum(kube_persistentvolumeclaim_info{storageclass=~\".*ssd.*\"}) by (persistentvolumeclaim, storageclass)\n * on (persistentvolumeclaim) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim)\n * on (persistentvolumeclaim) group_left(label_app)\n max(kube_persistentvolumeclaim_labels{label_$label=~\"$label_value\"}) by (persistentvolumeclaim) or up * 0\n) / 1024 / 1024 /1024 * .17 \n\n\n# END STORAGE\n",
                  "format": "time_series",
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": " {{ node }}",
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "timeFrom": "15m",
              "timeShift": null,
              "title": "Total Cost",
              "type": "singlestat",
              "valueFontSize": "110%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 0,
                "y": 5
              },
              "id": 10,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": " cores",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(\n sum (kube_pod_container_resource_requests_cpu_cores) by (pod)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod)\n or up * 0\n) ",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "title": "CPU Request",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 2,
              "format": "none",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 3,
                "y": 5
              },
              "id": 17,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": " cores",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(\n label_replace(\n sum(rate(container_cpu_usage_seconds_total{image!=\"\",container_name!=\"POD\"}[1h])) by (kubernetes_io_hostname,pod_name),\n \"node\",\n \"$1\", \n \"kubernetes_io_hostname\", \n \"(.+)\"\n ) \n * on (pod_name) group_left()\n label_replace(\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod),\n \"pod_name\",\n \"$1\", \n \"pod\", \n \"(.+)\"\n ) or up * 0\n) ",
                  "format": "time_series",
                  "intervalFactor": 2,
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "title": "CPU Used",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 0,
              "format": "bytes",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 6,
                "y": 5
              },
              "id": 11,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": true,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(\n sum (kube_pod_container_resource_requests_memory_bytes) by (pod)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod)\n or up * 0\n) ",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "title": "Memory Request",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "format": "bytes",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 3,
                "x": 9,
                "y": 5
              },
              "id": 18,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(\n label_replace(\n sum (container_memory_working_set_bytes{pod_name!=\"\",container!=\"POD\",container!=\"\"}) by (pod_name),\n \"pod\",\n \"$1\", \n \"pod_name\", \n \"(.+)\")\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod)\n or up * 0\n)",
                  "format": "time_series",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "title": "Memory Usage",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "cacheTimeout": null,
              "colorBackground": false,
              "colorValue": false,
              "colors": [
                "#299c46",
                "rgba(237, 129, 40, 0.89)",
                "#d44a3a"
              ],
              "datasource": "default-kubecost",
              "decimals": 0,
              "format": "bytes",
              "gauge": {
                "maxValue": 100,
                "minValue": 0,
                "show": false,
                "thresholdLabels": false,
                "thresholdMarkers": true
              },
              "gridPos": {
                "h": 4,
                "w": 6,
                "x": 12,
                "y": 5
              },
              "id": 22,
              "interval": null,
              "links": [],
              "mappingType": 1,
              "mappingTypes": [
                {
                  "name": "value to text",
                  "value": 1
                },
                {
                  "name": "range to text",
                  "value": 2
                }
              ],
              "maxDataPoints": 100,
              "nullPointMode": "connected",
              "nullText": null,
              "postfix": "",
              "postfixFontSize": "50%",
              "prefix": "",
              "prefixFontSize": "50%",
              "rangeMaps": [
                {
                  "from": "null",
                  "text": "N/A",
                  "to": "null"
                }
              ],
              "sparkline": {
                "fillColor": "rgba(31, 118, 189, 0.18)",
                "full": false,
                "lineColor": "rgb(31, 120, 193)",
                "show": false
              },
              "tableColumn": "",
              "targets": [
                {
                  "expr": "sum(\n max(kube_persistentvolumeclaim_info) by (persistentvolumeclaim, storageclass)\n * on (persistentvolumeclaim) group_right(storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (persistentvolumeclaim)\n * on (persistentvolumeclaim) group_left(label_app)\n max(kube_persistentvolumeclaim_labels{label_$label=~\"$label_value\"}) by (persistentvolumeclaim) or up * 0\n) \n",
                  "format": "time_series",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "A"
                }
              ],
              "thresholds": "",
              "title": "Storage Request",
              "type": "singlestat",
              "valueFontSize": "80%",
              "valueMaps": [
                {
                  "op": "=",
                  "text": "N/A",
                  "value": "null"
                }
              ],
              "valueName": "current"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 9
              },
              "id": 8,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n label_replace(\n sum (kube_pod_container_resource_limits_cpu_cores) by (pod, container)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container),\n \"container_name\",\n \"$1\", \n \"container\", \n \"(.+)\"\n )\n) \n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "limit",
                  "refId": "C"
                },
                {
                  "expr": "sum(\n label_replace(\n sum (kube_pod_container_resource_requests_cpu_cores) by (pod, container)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container),\n \"container_name\",\n \"$1\", \n \"container\", \n \"(.+)\"\n )\n) \n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "request",
                  "refId": "B"
                },
                {
                  "expr": "sum(\n label_replace(\n sum (rate (container_cpu_usage_seconds_total{image!=\"\",container!=\"POD\",container!=\"\"}[10m])) by (container,pod),\n \"pod\", \n \"$1\", \n \"pod_name\", \n \"(.+)\"\n )\n * on (pod) group_left (label_$label)\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container)\n)\n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "usage",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "CPU Usage vs Requests vs Limits",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "fill": 1,
              "gridPos": {
                "h": 8,
                "w": 12,
                "x": 12,
                "y": 9
              },
              "id": 23,
              "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
              },
              "lines": true,
              "linewidth": 1,
              "links": [],
              "nullPointMode": "null",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "sum(\n label_replace(\n sum (kube_pod_container_resource_limits_memory_bytes) by (pod, container)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container),\n \"container_name\",\n \"$1\", \n \"container\", \n \"(.+)\"\n )\n) \n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "limit",
                  "refId": "C"
                },
                {
                  "expr": "sum(\n label_replace(\n sum (kube_pod_container_resource_requests_memory_bytes) by (pod, container)\n * on (pod) group_left()\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container),\n \"container_name\",\n \"$1\", \n \"container\", \n \"(.+)\"\n )\n) \n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "request",
                  "refId": "B"
                },
                {
                  "expr": "sum(\n label_replace(\n sum (container_memory_working_set_bytes{container!=\"\",container!=\"POD\"}) by (container,pod),\n \"pod\", \n \"$1\", \n \"pod_name\", \n \"(.+)\"\n )\n * on (pod) group_left (label_$label)\n max(kube_pod_labels{label_$label=~\"$label_value\"}) by (pod,container)\n)\n",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "usage",
                  "refId": "A"
                }
              ],
              "thresholds": [],
              "timeFrom": null,
              "timeShift": null,
              "title": "Memory Usage vs Requests vs Limits",
              "tooltip": {
                "shared": true,
                "sort": 0,
                "value_type": "individual"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "refresh": false,
          "schemaVersion": 16,
          "style": "dark",
          "tags": [
            "cost",
            "utilization",
            "metrics"
          ],
          "templating": {
            "list": [
              {
                "datasource": "default-kubecost",
                "filters": [],
                "hide": 0,
                "label": "",
                "name": "Filters",
                "skipUrlSync": false,
                "type": "adhoc"
              },
              {
                "allValue": null,
                "current": {
                  "tags": [],
                  "text": "app",
                  "value": "app"
                },
                "hide": 0,
                "includeAll": false,
                "label": "Label",
                "multi": false,
                "name": "label",
                "options": [
                  {
                    "selected": false,
                    "text": "app",
                    "value": "app"
                  },
                  {
                    "selected": false,
                    "text": "tier",
                    "value": "tier"
                  },
                  {
                    "selected": false,
                    "text": "component",
                    "value": "component"
                  },
                  {
                    "selected": true,
                    "text": "release",
                    "value": "release"
                  },
                  {
                    "selected": false,
                    "text": "name",
                    "value": "name"
                  },
                  {
                    "selected": false,
                    "text": "team",
                    "value": "team"
                  },
                  {
                    "selected": false,
                    "text": "department",
                    "value": "department"
                  },
                  {
                    "selected": false,
                    "text": "owner",
                    "value": "owner"
                  },
                  {
                    "selected": false,
                    "text": "contact",
                    "value": "contact"
                  }
                ],
                "query": "app, tier, component, release, name, team, department, owner, contact",
                "skipUrlSync": false,
                "type": "custom"
              },
              {
                "allValue": ".*",
                "current": {
                  "tags": [],
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": "Value",
                "multi": false,
                "name": "label_value",
                "options": [],
                "query": "query_result(SUM(kube_pod_labels{label_$label!=\"\",namespace!=\"kube-system\"}) by (label_$label))",
                "refresh": 1,
                "regex": "/label_$label=\\\"(.*?)(\\\")/",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": "()",
                "current": {
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": "",
                "multi": false,
                "name": "Deployments",
                "options": [],
                "query": "label_values(deployment)",
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": null,
                "current": {
                  "tags": [],
                  "text": "All",
                  "value": "$__all"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": true,
                "label": null,
                "multi": false,
                "name": "Secondary",
                "options": [
                  {
                    "selected": true,
                    "text": "All",
                    "value": "$__all"
                  },
                  {
                    "selected": false,
                    "text": "app",
                    "value": "app"
                  },
                  {
                    "selected": false,
                    "text": "component",
                    "value": "component"
                  },
                  {
                    "selected": false,
                    "text": "controller_revision_hash",
                    "value": "controller_revision_hash"
                  },
                  {
                    "selected": false,
                    "text": "k8s_app",
                    "value": "k8s_app"
                  }
                ],
                "query": "query_result(kube_pod_labels)",
                "refresh": 0,
                "regex": "/.+?label_([^=]*).*/",
                "skipUrlSync": false,
                "sort": 1,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-24h",
            "to": "now"
          },
          "timepicker": {
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "",
          "title": "Label costs & utilization",
          "uid": "lWMhIA-ik",
          "version": 2
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-namespace-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: namespace-utilization-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    namespace-utilization.json: |-
        {
        	"annotations":{
        		"list":[
        			{
        				"builtIn":1,
        				"datasource":"-- Grafana --",
        				"enable":true,
        				"hide":true,
        				"iconColor":"rgba(0, 211, 255, 1)",
        				"name":"Annotations & Alerts",
        				"type":"dashboard"
        			}
        		]
        	},
        	"description":"A dashboard to help with utilization and resource allocation",
        	"editable":true,
        	"gnetId":8673,
        	"graphTooltip":0,
        	"id":9,
        	"iteration":1553150922105,
        	"links":[
        
        	],
        	"panels":[
        		{
        			"columns":[
        				{
        					"text":"Avg",
        					"value":"avg"
        				}
        			],
        			"datasource":"default-kubecost",
        			"fontSize":"100%",
        			"gridPos":{
        				"h":9,
        				"w":16,
        				"x":0,
        				"y":0
        			},
        			"hideTimeOverride":true,
        			"id":73,
        			"links":[
        
        			],
        			"pageSize":8,
        			"repeat":null,
        			"repeatDirection":"v",
        			"scroll":true,
        			"showHeader":true,
        			"sort":{
        				"col":2,
        				"desc":false
        			},
        			"styles":[
        				{
        					"alias":"Pod",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(50, 172, 45, 0.97)",
        						"#c15c17"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"link":false,
        					"linkTooltip":"",
        					"linkUrl":"",
        					"pattern":"pod_name",
        					"thresholds":[
        						"30",
        						"80"
        					],
        					"type":"string",
        					"unit":"currencyUSD"
        				},
        				{
        					"alias":"RAM",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"pattern":"Value #B",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"decbytes"
        				},
        				{
        					"alias":"CPU %",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #A",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"percent"
        				},
        				{
        					"alias":"",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Time",
        					"thresholds":[
        
        					],
        					"type":"hidden",
        					"unit":"short"
        				},
        				{
        					"alias":"Storage",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #C",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"currencyUSD"
        				},
        				{
        					"alias":"Total",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #D",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"currencyUSD"
        				},
        				{
        					"alias":"CPU Utilization",
        					"colorMode":"value",
        					"colors":[
        						"#bf1b00",
        						"rgba(50, 172, 45, 0.97)",
        						"#ef843c"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #E",
        					"thresholds":[
        						"30",
        						"80"
        					],
        					"type":"number",
        					"unit":"percent"
        				},
        				{
        					"alias":"RAM Utilization",
        					"colorMode":"value",
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(50, 172, 45, 0.97)",
        						"#ef843c"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #F",
        					"thresholds":[
        						"30",
        						"80"
        					],
        					"type":"number",
        					"unit":"percent"
        				}
        			],
        			"targets":[
        				{
        					"expr":"sum (rate (container_cpu_usage_seconds_total{namespace=\"$namespace\"}[10m])) by (pod_name) * 100",
        					"format":"table",
        					"hide":false,
        					"instant":true,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"{{ pod_name }}",
        					"refId":"A"
        				},
        				{
        					"expr":"sum (avg_over_time (container_memory_working_set_bytes{namespace=\"$namespace\", container_name!=\"POD\"}[10m])) by (pod_name)",
        					"format":"table",
        					"hide":false,
        					"instant":true,
        					"intervalFactor":1,
        					"legendFormat":"{{ pod_name }}",
        					"refId":"B"
        				}
        			],
        			"timeFrom":"1M",
        			"timeShift":null,
        			"title":"Pod utilization analysis",
        			"transform":"table",
        			"transparent":false,
        			"type":"table"
        		},
        		{
        			"columns":[
        				{
        					"text":"Avg",
        					"value":"avg"
        				}
        			],
        			"datasource":"default-kubecost",
        			"fontSize":"100%",
        			"gridPos":{
        				"h":9,
        				"w":8,
        				"x":16,
        				"y":0
        			},
        			"hideTimeOverride":true,
        			"id":90,
        			"links":[
        
        			],
        			"pageSize":8,
        			"repeatDirection":"v",
        			"scroll":true,
        			"showHeader":true,
        			"sort":{
        				"col":4,
        				"desc":true
        			},
        			"styles":[
        				{
        					"alias":"Namespace",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"namespace",
        					"thresholds":[
        
        					],
        					"type":"hidden",
        					"unit":"short"
        				},
        				{
        					"alias":"PVC Name",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"persistentvolumeclaim",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"short"
        				},
        				{
        					"alias":"Storage Class",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"storageclass",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"short"
        				},
        				{
        					"alias":"Size",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":1,
        					"mappingType":1,
        					"pattern":"Value",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"gbytes"
        				},
        				{
        					"alias":"",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Time",
        					"thresholds":[
        
        					],
        					"type":"hidden",
        					"unit":"short"
        				}
        			],
        			"targets":[
        				{
        					"expr":"sum (\n sum(kube_persistentvolumeclaim_info) by (persistentvolumeclaim, namespace, storageclass)\n + on (persistentvolumeclaim, namespace) group_right (storageclass)\n sum(kube_persistentvolumeclaim_resource_requests_storage_bytes{namespace=~\"$namespace\"}) by (persistentvolumeclaim, namespace)\n) by (namespace,persistentvolumeclaim,storageclass) / 1024 / 1024 /1024 ",
        					"format":"table",
        					"hide":false,
        					"instant":true,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"{{ persistentvolumeclaim }}",
        					"refId":"A"
        				}
        			],
        			"timeFrom":null,
        			"timeShift":null,
        			"title":"Persistent Volume Claims",
        			"transform":"table",
        			"transparent":false,
        			"type":"table"
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"description":"CPU requests by pod divided by the rate of CPU usage over the last hour",
        			"fill":1,
        			"gridPos":{
        				"h":9,
        				"w":24,
        				"x":0,
        				"y":9
        			},
        			"id":100,
        			"legend":{
        				"avg":false,
        				"current":false,
        				"max":false,
        				"min":false,
        				"show":true,
        				"total":false,
        				"values":false
        			},
        			"lines":true,
        			"linewidth":1,
        			"links":[
        
        			],
        			"nullPointMode":"null",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":false,
        			"targets":[
        				{
        					"expr":"topk(10,\n label_replace(\n sum(kube_pod_container_resource_requests_cpu_cores{namespace=\"$namespace\"}) by (pod),\n \"pod_name\", \n \"$1\", \n \"pod\", \n \"(.+)\"\n ) \n/ on (pod_name) sum(rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod_name=~\".+\"}[1h])) by (pod_name))",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":null,
        			"timeShift":null,
        			"title":"Ratio of CPU requests to usage (Top 10 pods)",
        			"tooltip":{
        				"shared":true,
        				"sort":0,
        				"value_type":"individual"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":3,
        			"description":"This panel shows historical utilization as an average across all pods in this namespace. It only accounts for currently deployed pods",
        			"editable":true,
        			"error":false,
        			"fill":0,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":0,
        				"y":18
        			},
        			"height":"",
        			"id":94,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":false,
        				"current":false,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":false,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":true,
        			"targets":[
        				{
        					"expr":"sum (rate (container_cpu_usage_seconds_total{namespace=\"$namespace\"}[10m])) by (namespace)\n",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"10s",
        					"intervalFactor":1,
        					"legendFormat":"cpu utilization",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Overall CPU Utilization",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"decimals":null,
        					"format":"percent",
        					"label":"",
        					"logBase":1,
        					"max":"110",
        					"min":"0",
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"This panel shows historical utilization as an average across all pods in this namespace. It only accounts for currently deployed pods",
        			"editable":true,
        			"error":false,
        			"fill":0,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":12,
        				"y":18
        			},
        			"id":92,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":false,
        				"current":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":false,
        				"sideWidth":200,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":true,
        			"targets":[
        				{
        					"expr":"sum (container_memory_working_set_bytes{namespace=\"$namespace\"})\n/\nsum(node_memory_MemTotal_bytes)",
        					"format":"time_series",
        					"instant":false,
        					"intervalFactor":1,
        					"legendFormat":"mem utilization",
        					"refId":"B"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Overall RAM Utilization",
        			"tooltip":{
        				"msResolution":false,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"decimals":null,
        					"format":"percent",
        					"label":null,
        					"logBase":1,
        					"max":"110",
        					"min":"0",
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"Traffic in and out of this namespace, as a sum of the pods within it",
        			"editable":true,
        			"error":false,
        			"fill":1,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":0,
        				"y":24
        			},
        			"height":"",
        			"id":96,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":true,
        				"current":true,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":true,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":false,
        			"targets":[
        				{
        					"expr":"sum (rate (container_network_receive_bytes_total{namespace=\"$namespace\"}[10m])) by (namespace)",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"<- in",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				},
        				{
        					"expr":"- sum (rate (container_network_transmit_bytes_total{namespace=\"$namespace\"}[10m])) by (namespace)",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"-> out",
        					"refId":"B"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Network IO",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"format":"Bps",
        					"label":"",
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"Disk reads and writes for the namespace, as a sum of the pods within it",
        			"editable":true,
        			"error":false,
        			"fill":1,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":12,
        				"y":24
        			},
        			"height":"",
        			"id":98,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":true,
        				"current":true,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":true,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":false,
        			"targets":[
        				{
        					"expr":"sum (rate (container_fs_writes_bytes_total{namespace=\"$namespace\"}[10m])) by (namespace)",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"<- write",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				},
        				{
        					"expr":"- sum (rate (container_fs_reads_bytes_total{namespace=\"$namespace\"}[10m])) by (namespace)",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"-> read",
        					"refId":"B"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Disk IO",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"format":"Bps",
        					"label":"",
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		}
        	],
        	"refresh":"10s",
        	"schemaVersion":16,
        	"style":"dark",
        	"tags":[
        		"cost",
        		"utilization",
        		"metrics"
        	],
        	"templating":{
        		"list":[
        			{
        				"current":{
        					"text":"23.06",
        					"value":"23.06"
        				},
        				"hide":0,
        				"label":"CPU",
        				"name":"costcpu",
        				"options":[
        					{
        						"text":"23.06",
        						"value":"23.06"
        					}
        				],
        				"query":"23.06",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":"7.28",
        					"value":"7.28"
        				},
        				"hide":0,
        				"label":"PE CPU",
        				"name":"costpcpu",
        				"options":[
        					{
        						"text":"7.28",
        						"value":"7.28"
        					}
        				],
        				"query":"7.28",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":"3.25",
        					"value":"3.25"
        				},
        				"hide":0,
        				"label":"RAM",
        				"name":"costram",
        				"options":[
        					{
        						"text":"3.25",
        						"value":"3.25"
        					}
        				],
        				"query":"3.25",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":"0.6862",
        					"value":"0.6862"
        				},
        				"hide":0,
        				"label":"PE RAM",
        				"name":"costpram",
        				"options":[
        					{
        						"text":"0.6862",
        						"value":"0.6862"
        					}
        				],
        				"query":"0.6862",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":"0.04",
        					"value":"0.04"
        				},
        				"hide":0,
        				"label":"Storage",
        				"name":"costStorageStandard",
        				"options":[
        					{
        						"text":"0.04",
        						"value":"0.04"
        					}
        				],
        				"query":"0.04",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":".17",
        					"value":".17"
        				},
        				"hide":0,
        				"label":"SSD",
        				"name":"costStorageSSD",
        				"options":[
        					{
        						"text":".17",
        						"value":".17"
        					}
        				],
        				"query":".17",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"current":{
        					"text":"30",
        					"value":"30"
        				},
        				"hide":0,
        				"label":"Disc.",
        				"name":"costDiscount",
        				"options":[
        					{
        						"text":"30",
        						"value":"30"
        					}
        				],
        				"query":"30",
        				"skipUrlSync":false,
        				"type":"constant"
        			},
        			{
        				"allValue":null,
        				"current":{
        					"text":"kube-system",
        					"value":"kube-system"
        				},
        				"datasource":"default-kubecost",
        				"hide":0,
        				"includeAll":false,
        				"label":"NS",
        				"multi":false,
        				"name":"namespace",
        				"options":[
        
        				],
        				"query":"query_result(sum(kube_namespace_created{namespace!=\"\"}) by (namespace))",
        				"refresh":1,
        				"regex":"/namespace=\\\"(.*?)(\\\")/",
        				"skipUrlSync":false,
        				"sort":0,
        				"tagValuesQuery":"",
        				"tags":[
        
        				],
        				"tagsQuery":"",
        				"type":"query",
        				"useTags":false
        			},
        			{
        				"datasource":"default-kubecost",
        				"filters":[
        
        				],
        				"hide":0,
        				"label":"",
        				"name":"Filters",
        				"skipUrlSync":false,
        				"type":"adhoc"
        			}
        		]
        	},
        	"time":{
        		"from":"now-15m",
        		"to":"now"
        	},
        	"timepicker":{
        		"hidden":false,
        		"refresh_intervals":[
        			"5s",
        			"10s",
        			"30s",
        			"1m",
        			"5m",
        			"15m",
        			"30m",
        			"1h",
        			"2h",
        			"1d"
        		],
        		"time_options":[
        			"5m",
        			"15m",
        			"1h",
        			"6h",
        			"12h",
        			"24h",
        			"2d",
        			"7d",
        			"30d"
        		]
        	},
        	"timezone":"browser",
        	"title":"Namespace utilization metrics",
        	"uid":"at-cost-analysis-namespace2",
        	"version":1
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-node-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: node-utilization-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    node-utilization.json: |-
        {
        	"annotations":{
        		"list":[
        			{
        				"builtIn":1,
        				"datasource":"-- Grafana --",
        				"enable":true,
        				"hide":true,
        				"iconColor":"rgba(0, 211, 255, 1)",
        				"name":"Annotations & Alerts",
        				"type":"dashboard"
        			}
        		]
        	},
        	"editable":true,
        	"gnetId":null,
        	"graphTooltip":0,
        	"id":6,
        	"iteration":1557245882378,
        	"links":[
        
        	],
        	"panels":[
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"percentunit",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":true,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":7,
        				"w":8,
        				"x":0,
        				"y":0
        			},
        			"id":2,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"sum(irate(container_cpu_usage_seconds_total{id=\"/\",instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"CPU Usage",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"avg"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"percentunit",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":true,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":7,
        				"w":8,
        				"x":8,
        				"y":0
        			},
        			"id":3,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"SUM(container_memory_usage_bytes{namespace!=\"\",instance=\"$node\"}) / SUM(kube_node_status_capacity_memory_bytes{node=\"$node\"})",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"Memory Usage",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"avg"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"percentunit",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":true,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":7,
        				"w":8,
        				"x":16,
        				"y":0
        			},
        			"id":4,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"sum(container_fs_usage_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\",instance=\"$node\"}) /\nsum(container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\",instance=\"$node\"})",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"Storage Usage",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"avg"
        		},
        		{
        			"columns":[
        				{
        					"text":"Avg",
        					"value":"avg"
        				}
        			],
        			"datasource":"default-kubecost",
        			"fontSize":"100%",
        			"gridPos":{
        				"h":8,
        				"w":16,
        				"x":0,
        				"y":7
        			},
        			"hideTimeOverride":true,
        			"id":21,
        			"links":[
        
        			],
        			"pageSize":8,
        			"repeat":null,
        			"repeatDirection":"v",
        			"scroll":true,
        			"showHeader":true,
        			"sort":{
        				"col":4,
        				"desc":true
        			},
        			"styles":[
        				{
        					"alias":"Pod",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(50, 172, 45, 0.97)",
        						"#c15c17"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"link":false,
        					"linkTooltip":"",
        					"linkUrl":"",
        					"pattern":"pod_name",
        					"thresholds":[
        						"30",
        						"80"
        					],
        					"type":"string",
        					"unit":"currencyUSD"
        				},
        				{
        					"alias":"",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Time",
        					"thresholds":[
        
        					],
        					"type":"hidden",
        					"unit":"short"
        				},
        				{
        					"alias":"CPU Usage",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #C",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"short"
        				},
        				{
        					"alias":"CPU Request",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #A",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"short"
        				},
        				{
        					"alias":"CPU Limit",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #B",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"short"
        				},
        				{
        					"alias":"Mem Usage",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #D",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"bytes"
        				},
        				{
        					"alias":"Mem Request",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #E",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"bytes"
        				},
        				{
        					"alias":"Mem Limit",
        					"colorMode":null,
        					"colors":[
        						"rgba(245, 54, 54, 0.9)",
        						"rgba(237, 129, 40, 0.89)",
        						"rgba(50, 172, 45, 0.97)"
        					],
        					"dateFormat":"YYYY-MM-DD HH:mm:ss",
        					"decimals":2,
        					"mappingType":1,
        					"pattern":"Value #F",
        					"thresholds":[
        
        					],
        					"type":"number",
        					"unit":"bytes"
        				}
        			],
        			"targets":[
        				{
        					"expr":"sum(rate(container_cpu_usage_seconds_total{container_name!=\"\",container_name!=\"POD\",pod_name!=\"\",instance=\"$node\"}[24h])) by (pod_name)",
        					"format":"table",
        					"instant":true,
        					"intervalFactor":1,
        					"refId":"C"
        				},
        				{
        					"expr":"sum(label_replace(\nsum(avg_over_time(kube_pod_container_resource_requests_cpu_cores{container!=\"\",container!=\"POD\",node=\"$node\"}[24h])) by (pod), \n\"pod_name\",\"$1\",\"pod\",\"(.+)\")\nor up * 0\n) by (pod_name)",
        					"format":"table",
        					"instant":true,
        					"intervalFactor":1,
        					"refId":"A"
        				},
        				{
        					"expr":"sum(avg_over_time(container_memory_usage_bytes{container_name!=\"\",container_name!=\"POD\",pod_name!=\"\",instance=\"$node\"}[24h])) by (pod_name)\n",
        					"format":"table",
        					"instant":true,
        					"intervalFactor":1,
        					"refId":"D"
        				},
        				{
        					"expr":"sum(label_replace(label_replace(\nsum(avg_over_time(kube_pod_container_resource_requests_memory_bytes{container!=\"\",container!=\"POD\",node=\"$node\"}[24h])) by (pod),\n\"container_name\",\"$1\",\"container\",\"(.+)\"), \"pod_name\",\"$1\",\"pod\",\"(.+)\")\nor up * 0\n) by (pod_name)\n",
        					"format":"table",
        					"instant":true,
        					"intervalFactor":1,
        					"refId":"E"
        				}
        			],
        			"timeFrom":"1M",
        			"timeShift":null,
        			"title":"Current pods",
        			"transform":"table",
        			"transparent":false,
        			"type":"table"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"decimals":0,
        			"format":"none",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":false,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":4,
        				"w":4,
        				"x":16,
        				"y":7
        			},
        			"id":8,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"sum(\n count(avg_over_time(kube_pod_container_resource_requests_cpu_cores{container!=\"\",container!=\"POD\",node=\"$node\"}[24h])) by (pod)\n * on (pod) group_right()\n sum(kube_pod_container_status_running) by (pod)\n)",
        					"format":"time_series",
        					"instant":true,
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"Pods Running",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"current"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"bytes",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":false,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":4,
        				"w":4,
        				"x":20,
        				"y":7
        			},
        			"id":18,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"sum(container_fs_limit_bytes{device=~\"^/dev/[sv]d[a-z][1-9]$\",id=\"/\",instance=\"$node\"})",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"Storage Capacity",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"current"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"none",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":false,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":4,
        				"w":4,
        				"x":16,
        				"y":11
        			},
        			"id":9,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"kube_node_status_capacity_cpu_cores{node=\"$node\"}",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"CPU Capacity",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"avg"
        		},
        		{
        			"cacheTimeout":null,
        			"colorBackground":false,
        			"colorValue":false,
        			"colors":[
        				"#299c46",
        				"rgba(237, 129, 40, 0.89)",
        				"#d44a3a"
        			],
        			"datasource":"default-kubecost",
        			"format":"bytes",
        			"gauge":{
        				"maxValue":100,
        				"minValue":0,
        				"show":false,
        				"thresholdLabels":false,
        				"thresholdMarkers":true
        			},
        			"gridPos":{
        				"h":4,
        				"w":4,
        				"x":20,
        				"y":11
        			},
        			"id":19,
        			"interval":null,
        			"links":[
        
        			],
        			"mappingType":1,
        			"mappingTypes":[
        				{
        					"name":"value to text",
        					"value":1
        				},
        				{
        					"name":"range to text",
        					"value":2
        				}
        			],
        			"maxDataPoints":100,
        			"nullPointMode":"connected",
        			"nullText":null,
        			"postfix":"",
        			"postfixFontSize":"50%",
        			"prefix":"",
        			"prefixFontSize":"50%",
        			"rangeMaps":[
        				{
        					"from":"null",
        					"text":"N/A",
        					"to":"null"
        				}
        			],
        			"sparkline":{
        				"fillColor":"rgba(31, 118, 189, 0.18)",
        				"full":false,
        				"lineColor":"rgb(31, 120, 193)",
        				"show":false
        			},
        			"tableColumn":"",
        			"targets":[
        				{
        					"expr":"kube_node_status_capacity_memory_bytes{node=\"$node\"}",
        					"format":"time_series",
        					"intervalFactor":1,
        					"refId":"A"
        				}
        			],
        			"thresholds":"",
        			"title":"RAM Capacity",
        			"type":"singlestat",
        			"valueFontSize":"80%",
        			"valueMaps":[
        				{
        					"op":"=",
        					"text":"N/A",
        					"value":"null"
        				}
        			],
        			"valueName":"current"
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":3,
        			"description":"This panel shows historical utilization for the node.",
        			"editable":true,
        			"error":false,
        			"fill":0,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":0,
        				"y":15
        			},
        			"height":"",
        			"id":11,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":false,
        				"current":false,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":false,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":true,
        			"targets":[
        				{
        					"expr":"sum(irate(container_cpu_usage_seconds_total{id=\"/\",instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"10s",
        					"intervalFactor":1,
        					"legendFormat":"cpu utilization",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"CPU Utilization",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"decimals":null,
        					"format":"percentunit",
        					"label":"",
        					"logBase":1,
        					"max":"1.1",
        					"min":"0",
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"This panel shows historical utilization for the node.",
        			"editable":true,
        			"error":false,
        			"fill":0,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":12,
        				"y":15
        			},
        			"id":13,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":false,
        				"current":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":false,
        				"sideWidth":200,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":true,
        			"targets":[
        				{
        					"expr":"SUM(container_memory_usage_bytes{namespace!=\"\",instance=\"$node\"}) / SUM(kube_node_status_capacity_memory_bytes{node=\"$node\"})",
        					"format":"time_series",
        					"instant":false,
        					"interval":"10s",
        					"intervalFactor":1,
        					"legendFormat":"ram utilization",
        					"metric":"container_memory_usage:sort_desc",
        					"refId":"A",
        					"step":10
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"RAM Utilization",
        			"tooltip":{
        				"msResolution":false,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"decimals":null,
        					"format":"percentunit",
        					"label":null,
        					"logBase":1,
        					"max":"1.1",
        					"min":"0",
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"Traffic in and out of this namespace, as a sum of the pods within it",
        			"editable":true,
        			"error":false,
        			"fill":1,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":0,
        				"y":21
        			},
        			"height":"",
        			"id":15,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":true,
        				"current":true,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":true,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":false,
        			"targets":[
        				{
        					"expr":"sum (rate (container_network_receive_bytes_total{instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"<- in",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				},
        				{
        					"expr":"- sum (rate (container_network_transmit_bytes_total{instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"-> out",
        					"refId":"B"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Network IO",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"format":"Bps",
        					"label":"",
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		},
        		{
        			"aliasColors":{
        
        			},
        			"bars":false,
        			"dashLength":10,
        			"dashes":false,
        			"datasource":"default-kubecost",
        			"decimals":2,
        			"description":"Disk reads and writes for the namespace, as a sum of the pods within it",
        			"editable":true,
        			"error":false,
        			"fill":1,
        			"grid":{
        
        			},
        			"gridPos":{
        				"h":6,
        				"w":12,
        				"x":12,
        				"y":21
        			},
        			"height":"",
        			"id":17,
        			"isNew":true,
        			"legend":{
        				"alignAsTable":false,
        				"avg":true,
        				"current":true,
        				"hideEmpty":false,
        				"hideZero":false,
        				"max":false,
        				"min":false,
        				"rightSide":false,
        				"show":true,
        				"sideWidth":null,
        				"sort":"current",
        				"sortDesc":true,
        				"total":false,
        				"values":true
        			},
        			"lines":true,
        			"linewidth":2,
        			"links":[
        
        			],
        			"nullPointMode":"connected",
        			"percentage":false,
        			"pointradius":5,
        			"points":false,
        			"renderer":"flot",
        			"seriesOverrides":[
        
        			],
        			"spaceLength":10,
        			"stack":false,
        			"steppedLine":false,
        			"targets":[
        				{
        					"expr":"sum (rate (container_fs_writes_bytes_total{instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"<- write",
        					"metric":"container_cpu",
        					"refId":"A",
        					"step":10
        				},
        				{
        					"expr":"- sum (rate (container_fs_reads_bytes_total{instance=\"$node\"}[10m]))",
        					"format":"time_series",
        					"hide":false,
        					"instant":false,
        					"interval":"",
        					"intervalFactor":1,
        					"legendFormat":"-> read",
        					"refId":"B"
        				}
        			],
        			"thresholds":[
        
        			],
        			"timeFrom":"",
        			"timeShift":null,
        			"title":"Disk IO",
        			"tooltip":{
        				"msResolution":true,
        				"shared":true,
        				"sort":2,
        				"value_type":"cumulative"
        			},
        			"type":"graph",
        			"xaxis":{
        				"buckets":null,
        				"mode":"time",
        				"name":null,
        				"show":true,
        				"values":[
        
        				]
        			},
        			"yaxes":[
        				{
        					"format":"Bps",
        					"label":"",
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":true
        				},
        				{
        					"format":"short",
        					"label":null,
        					"logBase":1,
        					"max":null,
        					"min":null,
        					"show":false
        				}
        			],
        			"yaxis":{
        				"align":false,
        				"alignLevel":null
        			}
        		}
        	],
        	"schemaVersion":16,
        	"style":"dark",
        	"tags":[
        		"cost",
        		"utilization",
        		"metrics"
        	],
        	"templating":{
        		"list":[
        			{
        				"allValue":null,
        				"current":{
        					"text":"ip-172-20-44-170.us-east-2.compute.internal",
        					"value":"ip-172-20-44-170.us-east-2.compute.internal"
        				},
        				"datasource":"default-kubecost",
        				"hide":0,
        				"includeAll":false,
        				"label":null,
        				"multi":false,
        				"name":"node",
        				"options":[
        
        				],
        				"query":"query_result(kube_node_labels)",
        				"refresh":1,
        				"regex":"/node=\\\"(.*?)(\\\")/",
        				"skipUrlSync":false,
        				"sort":0,
        				"tagValuesQuery":"",
        				"tags":[
        
        				],
        				"tagsQuery":"",
        				"type":"query",
        				"useTags":false
        			}
        		]
        	},
        	"time":{
        		"from":"now-6h",
        		"to":"now"
        	},
        	"timepicker":{
        		"refresh_intervals":[
        			"5s",
        			"10s",
        			"30s",
        			"1m",
        			"5m",
        			"15m",
        			"30m",
        			"1h",
        			"2h",
        			"1d"
        		],
        		"time_options":[
        			"5m",
        			"15m",
        			"1h",
        			"6h",
        			"12h",
        			"24h",
        			"2d",
        			"7d",
        			"30d"
        		]
        	},
        	"timezone":"",
        	"title":"Node utilization metrics",
        	"uid":"NUQW37Lmk",
        	"version":1
        }
---
# Source: cost-analyzer/templates/grafana-dashboard-pod-utilization-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: pod-utilization-dashboard
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    grafana_dashboard: "1"
data:
    pod-utilization.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "description": "Visualize your kubernetes costs at the pod level.",
          "editable": true,
          "gnetId": 9063,
          "graphTooltip": 0,
          "id": 4,
          "iteration": 1560100821196,
          "links": [],
          "panels": [
            {
              "columns": [
                {
                  "text": "Avg",
                  "value": "avg"
                }
              ],
              "datasource": "default-kubecost",
              "fontSize": "100%",
              "gridPos": {
                "h": 5,
                "w": 24,
                "x": 0,
                "y": 0
              },
              "hideTimeOverride": true,
              "id": 98,
              "links": [],
              "pageSize": 5,
              "repeatDirection": "v",
              "scroll": true,
              "showHeader": true,
              "sort": {
                "col": 6,
                "desc": true
              },
              "styles": [
                {
                  "alias": "Container",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(50, 172, 45, 0.97)",
                    "#c15c17"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "link": false,
                  "pattern": "container_name",
                  "thresholds": [
                    "30",
                    "80"
                  ],
                  "type": "string",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "Memory Allocation",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "pattern": "Value #B",
                  "thresholds": [],
                  "type": "number",
                  "unit": "bytes"
                },
                {
                  "alias": "CPU Allocation",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #A",
                  "thresholds": [],
                  "type": "number",
                  "unit": "none"
                },
                {
                  "alias": "",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Time",
                  "thresholds": [],
                  "type": "hidden",
                  "unit": "short"
                },
                {
                  "alias": "Memory ($/hour)",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #C",
                  "thresholds": [],
                  "type": "number",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "Spot/PE RAM",
                  "colorMode": null,
                  "colors": [
                    "rgba(245, 54, 54, 0.9)",
                    "rgba(237, 129, 40, 0.89)",
                    "rgba(50, 172, 45, 0.97)"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #D",
                  "thresholds": [],
                  "type": "number",
                  "unit": "currencyUSD"
                },
                {
                  "alias": "Total",
                  "colorMode": null,
                  "colors": [
                    "#bf1b00",
                    "rgba(50, 172, 45, 0.97)",
                    "#ef843c"
                  ],
                  "dateFormat": "YYYY-MM-DD HH:mm:ss",
                  "decimals": 2,
                  "mappingType": 1,
                  "pattern": "Value #E",
                  "thresholds": [
                    ""
                  ],
                  "type": "number",
                  "unit": "currencyUSD"
                }
              ],
              "targets": [
                {
                  "expr": "sum(\n  avg_over_time(container_memory_allocation_bytes{namespace=\"$namespace\", pod=\"$pod\", container!=\"POD\"}[$__range])\n) by (container,node)",
                  "format": "table",
                  "instant": true,
                  "intervalFactor": 1,
                  "refId": "B"
                },
                {
                  "expr": "sum(\n  avg_over_time(container_cpu_allocation{namespace=\"$namespace\", pod=\"$pod\", container!=\"POD\"}[$__range])\n  or up * 0 \n) by (container,node)",
                  "format": "table",
                  "hide": false,
                  "instant": true,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "",
                  "refId": "A"
                }
              ],
              "timeFrom": "1M",
              "timeShift": null,
              "title": "Container cost  & allocation analysis",
              "transform": "table",
              "transparent": false,
              "type": "table"
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 3,
              "description": "This graph attempts to show you CPU use of your application vs its requests",
              "editable": true,
              "error": false,
              "fill": 0,
              "grid": {},
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 0,
                "y": 5
              },
              "height": "",
              "id": 94,
              "isNew": true,
              "legend": {
                "alignAsTable": false,
                "avg": false,
                "current": false,
                "hideEmpty": false,
                "hideZero": false,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": true,
              "targets": [
                {
                  "expr": "avg (rate (container_cpu_usage_seconds_total{namespace=~\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\",container_name!=\"\"}[10m])) by (container_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{ container_name }} (usage)",
                  "metric": "container_cpu",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "avg(kube_pod_container_resource_requests_cpu_cores{namespace=~\"$namespace\", pod=\"$pod\", container!=\"POD\"}) by (container)",
                  "format": "time_series",
                  "instant": false,
                  "intervalFactor": 1,
                  "legendFormat": "{{ container}} (request)",
                  "refId": "B"
                }
              ],
              "thresholds": [],
              "timeFrom": "",
              "timeShift": null,
              "title": "CPU Usage vs Requested",
              "tooltip": {
                "msResolution": true,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "none",
                  "label": "",
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 3,
              "description": "This graph attempts to show you RAM use of your application vs its requests",
              "editable": true,
              "error": false,
              "fill": 0,
              "grid": {},
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 12,
                "y": 5
              },
              "height": "",
              "id": 96,
              "isNew": true,
              "legend": {
                "alignAsTable": false,
                "avg": false,
                "current": false,
                "hideEmpty": false,
                "hideZero": false,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": true,
              "targets": [
                {
                  "expr": "avg (avg_over_time (container_memory_working_set_bytes{namespace=\"$namespace\", pod_name=\"$pod\", container_name!=\"POD\",container_name!=\"\"}[1m])) by (container_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{ container_name }} (usage)",
                  "metric": "container_cpu",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "avg(kube_pod_container_resource_requests_memory_bytes{namespace=~\"$namespace\", pod=\"$pod\", container!=\"POD\"}) by (container)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "intervalFactor": 1,
                  "legendFormat": "{{ container }} (requested)",
                  "refId": "B"
                }
              ],
              "thresholds": [],
              "timeFrom": "",
              "timeShift": null,
              "title": "RAM Usage vs Requested",
              "tooltip": {
                "msResolution": true,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "bytes",
                  "label": "",
                  "logBase": 1,
                  "max": null,
                  "min": "0",
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Traffic in and out of this pod, as a sum of its containers",
              "editable": true,
              "error": false,
              "fill": 1,
              "grid": {},
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 0,
                "y": 12
              },
              "height": "",
              "id": 95,
              "isNew": true,
              "legend": {
                "alignAsTable": false,
                "avg": true,
                "current": true,
                "hideEmpty": false,
                "hideZero": false,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "avg (rate (container_network_receive_bytes_total{namespace=\"$namespace\",pod_name=\"$pod\"}[10m])) by (pod_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "<- in",
                  "metric": "container_cpu",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "- avg (rate (container_network_transmit_bytes_total{namespace=\"$namespace\",pod_name=\"$pod\"}[10m])) by (pod_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "-> out",
                  "refId": "B"
                }
              ],
              "thresholds": [],
              "timeFrom": "",
              "timeShift": null,
              "title": "Network IO",
              "tooltip": {
                "msResolution": true,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "Bps",
                  "label": "",
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            },
            {
              "aliasColors": {},
              "bars": false,
              "dashLength": 10,
              "dashes": false,
              "datasource": "default-kubecost",
              "decimals": 2,
              "description": "Disk read writes",
              "editable": true,
              "error": false,
              "fill": 1,
              "grid": {},
              "gridPos": {
                "h": 7,
                "w": 12,
                "x": 12,
                "y": 12
              },
              "height": "",
              "id": 97,
              "isNew": true,
              "legend": {
                "alignAsTable": false,
                "avg": true,
                "current": true,
                "hideEmpty": false,
                "hideZero": false,
                "max": false,
                "min": false,
                "rightSide": false,
                "show": true,
                "sideWidth": null,
                "sort": "current",
                "sortDesc": true,
                "total": false,
                "values": true
              },
              "lines": true,
              "linewidth": 2,
              "links": [],
              "nullPointMode": "connected",
              "percentage": false,
              "pointradius": 5,
              "points": false,
              "renderer": "flot",
              "seriesOverrides": [],
              "spaceLength": 10,
              "stack": false,
              "steppedLine": false,
              "targets": [
                {
                  "expr": "avg (rate (container_fs_writes_bytes_total{namespace=\"$namespace\",pod_name=\"$pod\"}[10m])) by (pod_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "<- write",
                  "metric": "container_cpu",
                  "refId": "A",
                  "step": 10
                },
                {
                  "expr": "- avg (rate (container_fs_reads_bytes_total{namespace=\"$namespace\",pod_name=\"$pod\"}[10m])) by (pod_name)",
                  "format": "time_series",
                  "hide": false,
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "-> read",
                  "refId": "B"
                }
              ],
              "thresholds": [],
              "timeFrom": "",
              "timeShift": null,
              "title": "Disk IO",
              "tooltip": {
                "msResolution": true,
                "shared": true,
                "sort": 2,
                "value_type": "cumulative"
              },
              "type": "graph",
              "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": []
              },
              "yaxes": [
                {
                  "format": "Bps",
                  "label": "",
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": true
                },
                {
                  "format": "short",
                  "label": null,
                  "logBase": 1,
                  "max": null,
                  "min": null,
                  "show": false
                }
              ],
              "yaxis": {
                "align": false,
                "alignLevel": null
              }
            }
          ],
          "refresh": false,
          "schemaVersion": 16,
          "style": "dark",
          "tags": [
            "cost",
            "utilization",
            "metrics"
          ],
          "templating": {
            "list": [
              {
                "current": {
                  "text": "0.044",
                  "value": "0.044"
                },
                "hide": 0,
                "label": "Storage",
                "name": "costStorageStandard",
                "options": [
                  {
                    "text": "0.044",
                    "value": "0.044"
                  }
                ],
                "query": "0.044",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "current": {
                  "text": "0.187",
                  "value": "0.187"
                },
                "hide": 0,
                "label": "SSD",
                "name": "costStorageSSD",
                "options": [
                  {
                    "text": "0.187",
                    "value": "0.187"
                  }
                ],
                "query": "0.187",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "current": {
                  "text": "30",
                  "value": "30"
                },
                "hide": 0,
                "label": "Disc.",
                "name": "costDiscount",
                "options": [
                  {
                    "text": "30",
                    "value": "30"
                  }
                ],
                "query": "30",
                "skipUrlSync": false,
                "type": "constant"
              },
              {
                "allValue": null,
                "current": {
                  "selected": false,
                  "text": "kubecost",
                  "value": "kubecost"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": false,
                "label": "NS",
                "multi": false,
                "name": "namespace",
                "options": [],
                "query": "query_result(sum(container_memory_working_set_bytes{namespace!=\"\"}) by (namespace))",
                "refresh": 1,
                "regex": "/namespace=\\\"(.*?)(\\\")/",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              },
              {
                "allValue": null,
                "current": {
                  "selected": false,
                  "tags": [],
                  "text": "kubecost-grafana-5cc9f5bf6-7kmgl",
                  "value": "kubecost-grafana-5cc9f5bf6-7kmgl"
                },
                "datasource": "default-kubecost",
                "hide": 0,
                "includeAll": false,
                "label": "Pod",
                "multi": false,
                "name": "pod",
                "options": [],
                "query": "query_result(sum(container_memory_working_set_bytes{namespace=\"$namespace\"}) by (pod_name))",
                "refresh": 1,
                "regex": "/pod_name=\\\"(.*?)(\\\")/",
                "skipUrlSync": false,
                "sort": 0,
                "tagValuesQuery": "",
                "tags": [],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
              }
            ]
          },
          "time": {
            "from": "now-24h",
            "to": "now"
          },
          "timepicker": {
            "hidden": false,
            "refresh_intervals": [
              "5s",
              "10s",
              "30s",
              "1m",
              "5m",
              "15m",
              "30m",
              "1h",
              "2h",
              "1d"
            ],
            "time_options": [
              "5m",
              "15m",
              "1h",
              "6h",
              "12h",
              "24h",
              "2d",
              "7d",
              "30d"
            ]
          },
          "timezone": "browser",
          "title": "Pod cost & utilization metrics",
          "uid": "at-cost-analysis-pod",
          "version": 1
        }
---
# Source: cost-analyzer/templates/grafana-datasource-template.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-datasource
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
    kubecost_grafana_datasource: "1"
data:
  datasource.yaml: |-
    apiVersion: 1
    datasources:
    - access: proxy
      name: "default-kubecost"
      isDefault: false
      type: prometheus
      url: http://kubecost-prometheus-server.kubecost
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: "2Gi"
---
# Source: cost-analyzer/charts/prometheus/templates/pushgateway-pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    component: "pushgateway"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-pushgateway
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: "2Gi"
---
# Source: cost-analyzer/charts/prometheus/templates/server-pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: "32Gi"
---
# Source: cost-analyzer/templates/cost-analyzer-db-pvc-template.yaml
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: kubecost-cost-analyzer-db
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 32.0Gi
---
# Source: cost-analyzer/templates/cost-analyzer-pvc-template.yaml
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 0.2Gi
---
# Source: cost-analyzer/charts/grafana/templates/clusterrole.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
  name: kubecost-grafana-clusterrole
rules:
- apiGroups: [""] # "" indicates the core API group
  resources: ["configmaps"]
  verbs: ["get", "watch", "list"]
---
# Source: cost-analyzer/charts/prometheus/charts/kube-state-metrics/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: kube-state-metrics-2.7.2
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: kubecost
  name: kubecost-kube-state-metrics
rules:

- apiGroups: ["certificates.k8s.io"]
  resources:
  - certificatesigningrequests
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - configmaps
  verbs: ["list", "watch"]

- apiGroups: ["batch"]
  resources:
  - cronjobs
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "apps"]
  resources:
  - daemonsets
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "apps"]
  resources:
  - deployments
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - endpoints
  verbs: ["list", "watch"]

- apiGroups: ["autoscaling"]
  resources:
  - horizontalpodautoscalers
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "networking.k8s.io"]
  resources:
  - ingresses
  verbs: ["list", "watch"]

- apiGroups: ["batch"]
  resources:
  - jobs
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - limitranges
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - namespaces
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - nodes
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - persistentvolumeclaims
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - persistentvolumes
  verbs: ["list", "watch"]

- apiGroups: ["policy"]
  resources:
    - poddisruptionbudgets
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - pods
  verbs: ["list", "watch"]

- apiGroups: ["extensions", "apps"]
  resources:
  - replicasets
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - replicationcontrollers
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - resourcequotas
  verbs: ["list", "watch"]

- apiGroups: [""]
  resources:
  - services
  verbs: ["list", "watch"]

- apiGroups: ["apps"]
  resources:
  - statefulsets
  verbs: ["list", "watch"]

- apiGroups: ["storage.k8s.io"]
  resources:
    - storageclasses
  verbs: ["list", "watch"]
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRole
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
rules:
  []
---
# Source: cost-analyzer/charts/prometheus/templates/server-clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRole
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
rules:
  - apiGroups:
      - ""
    resources:
      - nodes
      - nodes/proxy
      - nodes/metrics
      - services
      - endpoints
      - pods
      - ingresses
      - configmaps
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - "extensions"
    resources:
      - ingresses/status
      - ingresses
    verbs:
      - get
      - list
      - watch
  - nonResourceURLs:
      - "/metrics"
    verbs:
      - get
---
# Source: cost-analyzer/templates/cost-analyzer-cluser-role-template.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
rules:
  - apiGroups:
      - ''
    resources:
      - configmaps
      - deployments
      - nodes
      - pods
      - events
      - services
      - resourcequotas
      - replicationcontrollers
      - limitranges
      - persistentvolumeclaims
      - persistentvolumes
      - namespaces
      - endpoints
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - extensions
    resources:
      - daemonsets
      - deployments
      - replicasets
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - apps
    resources:
      - statefulsets
      - deployments
      - daemonsets
      - replicasets
    verbs:
      - list
      - watch
  - apiGroups:
      - batch
    resources:
      - cronjobs
      - jobs
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - autoscaling
    resources:
      - horizontalpodautoscalers
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - policy
    resources:
      - poddisruptionbudgets
    verbs:
      - get
      - list
      - watch
  - apiGroups: 
      - storage.k8s.io
    resources: 
      - storageclasses
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - events.k8s.io
    resources:
      - events
    verbs:
      - get
      - list
      - watch
---
# Source: cost-analyzer/charts/grafana/templates/clusterrolebinding.yaml
kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: kubecost-grafana-clusterrolebinding
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
subjects:
  - kind: ServiceAccount
    name: kubecost-grafana
    namespace: kubecost
roleRef:
  kind: ClusterRole
  name: kubecost-grafana-clusterrole
  apiGroup: rbac.authorization.k8s.io
---
# Source: cost-analyzer/charts/prometheus/charts/kube-state-metrics/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: kube-state-metrics-2.7.2
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/instance: kubecost
  name: kubecost-kube-state-metrics
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kubecost-kube-state-metrics
subjects:
- kind: ServiceAccount
  name: kubecost-kube-state-metrics
  namespace: kubecost
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
subjects:
  - kind: ServiceAccount
    name: kubecost-prometheus-alertmanager
    namespace: kubecost
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kubecost-prometheus-alertmanager
---
# Source: cost-analyzer/charts/prometheus/templates/server-clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
subjects:
  - kind: ServiceAccount
    name: kubecost-prometheus-server
    namespace: kubecost
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kubecost-prometheus-server
---
# Source: cost-analyzer/templates/cost-analyzer-cluster-role-binding-template.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kubecost-cost-analyzer
subjects:
  - kind: ServiceAccount
    name: kubecost-cost-analyzer
    namespace: kubecost
---
# Source: cost-analyzer/charts/grafana/templates/role.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: Role
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    heritage: Helm
    release: kubecost
rules:
- apiGroups:      ['extensions']
  resources:      ['podsecuritypolicies']
  verbs:          ['use']
  resourceNames:  [kubecost-grafana]
---
# Source: cost-analyzer/templates/cost-analyzer-cluser-role-template.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: kubecost
  name: kubecost-cost-analyzer
rules:
- apiGroups: 
    - ''
  resources:
    - "pods/log"
  verbs:
    - get
    - list
    - watch
---
# Source: cost-analyzer/charts/grafana/templates/rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: RoleBinding
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    heritage: Helm
    release: kubecost
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: kubecost-grafana
subjects:
- kind: ServiceAccount
  name: kubecost-grafana
---
# Source: cost-analyzer/templates/cost-analyzer-cluster-role-binding-template.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: kubecost-cost-analyzer
subjects:
  - kind: ServiceAccount
    name: kubecost-cost-analyzer
    namespace: kubecost
---
# Source: cost-analyzer/charts/grafana/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
spec:
  type: ClusterIP
  ports:
    - name: service
      port: 80
      protocol: TCP
      targetPort: 3000

  selector:
    app: grafana
    release: kubecost
---
# Source: cost-analyzer/charts/prometheus/charts/kube-state-metrics/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: kubecost-kube-state-metrics
  namespace: kubecost
  labels:
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: "kube-state-metrics-2.7.2"
    app.kubernetes.io/instance: "kubecost"
    app.kubernetes.io/managed-by: "Helm"
  annotations:
    prometheus.io/scrape: 'true'
spec:
  type: "ClusterIP"
  ports:
  - name: "http"
    protocol: TCP
    port: 8080
    targetPort: 8080
  selector:
    app.kubernetes.io/name: kube-state-metrics
    app.kubernetes.io/instance: kubecost
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
spec:
  ports:
    - name: http
      port: 80
      protocol: TCP
      targetPort: 9093
  selector:
    component: "alertmanager"
    app: prometheus
    release: kubecost
  sessionAffinity: None
  type: "ClusterIP"
---
# Source: cost-analyzer/charts/prometheus/templates/node-exporter-service.yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    prometheus.io/scrape: "true"
  labels:
    component: "node-exporter"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-node-exporter
spec:
  clusterIP: None
  ports:
    - name: metrics
      port: 9100
      protocol: TCP
      targetPort: 9100
  selector:
    component: "node-exporter"
    app: prometheus
    release: kubecost
  type: "ClusterIP"
---
# Source: cost-analyzer/charts/prometheus/templates/server-service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
spec:
  ports:
    - name: http
      port: 80
      protocol: TCP
      targetPort: 9090
  selector:
    component: "server"
    app: prometheus
    release: kubecost
  sessionAffinity: None
  type: "ClusterIP"
---
# Source: cost-analyzer/templates/cost-analyzer-service-template.yaml
kind: Service
apiVersion: v1
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
spec:
  selector:
    
    app.kubernetes.io/name: cost-analyzer
    app.kubernetes.io/instance: kubecost
    app: cost-analyzer
  type: "ClusterIP"
  ports:
    - name: server
      port: 9001
      targetPort: 9001
    - name: model
      port: 9003
      targetPort: 9003
    - name: frontend
      port: 9090
      targetPort: 9090
---
# Source: cost-analyzer/charts/prometheus/templates/node-exporter-daemonset.yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  labels:
    component: "node-exporter"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-node-exporter
spec:
  selector:
    matchLabels:
      component: "node-exporter"
      app: prometheus
      release: kubecost
  updateStrategy:
    type: RollingUpdate
  template:
    metadata:
      labels:
        component: "node-exporter"
        app: prometheus
        release: kubecost
        chart: prometheus-11.0.2
        heritage: Helm
    spec:
      serviceAccountName: kubecost-prometheus-node-exporter
      containers:
        - name: prometheus-node-exporter
          image: "prom/node-exporter:v0.18.1"
          imagePullPolicy: "IfNotPresent"
          args:
            - --path.procfs=/host/proc
            - --path.sysfs=/host/sys
            - --web.listen-address=:9100
          ports:
            - name: metrics
              containerPort: 9100
              hostPort: 9100
          resources:
            {}
          volumeMounts:
            - name: proc
              mountPath: /host/proc
              readOnly:  true
            - name: sys
              mountPath: /host/sys
              readOnly: true
      hostNetwork: true
      hostPID: true
      volumes:
        - name: proc
          hostPath:
            path: /proc
        - name: sys
          hostPath:
            path: /sys
---
# Source: cost-analyzer/charts/grafana/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kubecost-grafana
  labels:
    app: grafana
    chart: grafana-1.17.2
    release: kubecost
    heritage: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: grafana
      release: kubecost
  strategy:
    type: RollingUpdate    
  template:
    metadata:
      labels:
        app: grafana
        release: kubecost
    spec:
      serviceAccountName: kubecost-grafana
      securityContext:
        fsGroup: 472
        runAsUser: 472
      containers:
        - name: grafana-sc-dashboard
          image: "kiwigrid/k8s-sidecar:0.1.144"
          imagePullPolicy: IfNotPresent
          env:
            - name: LABEL
              value: "grafana_dashboard"
            - name: FOLDER
              value: "/tmp/dashboards"
          resources:
            null
          volumeMounts:
            - name: sc-dashboard-volume
              mountPath: "/tmp/dashboards"
        - name: grafana-sc-datasources
          image: "kiwigrid/k8s-sidecar:0.1.144"
          imagePullPolicy: IfNotPresent
          env:
            - name: LABEL
              value: "kubecost_grafana_datasource"
            - name: FOLDER
              value: "/etc/grafana/provisioning/datasources"
          resources:
            null
          volumeMounts:
            - name: sc-datasources-volume
              mountPath: "/etc/grafana/provisioning/datasources"
        - name: grafana
          image: "grafana/grafana:7.1.1"
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: config
              mountPath: "/etc/grafana/grafana.ini"
              subPath: grafana.ini
            - name: ldap
              mountPath: "/etc/grafana/ldap.toml"
              subPath: ldap.toml
            - name: sc-dashboard-volume
              mountPath: "/tmp/dashboards"
            - name: sc-dashboard-provider
              mountPath: "/etc/grafana/provisioning/dashboards/sc-dashboardproviders.yaml"
              subPath: provider.yaml
            - name: sc-datasources-volume
              mountPath: "/etc/grafana/provisioning/datasources"
            - name: storage
              mountPath: "/var/lib/grafana"
              subPath: 
          ports:
            - name: service
              containerPort: 80
              protocol: TCP
            - name: grafana
              containerPort: 3000
              protocol: TCP
          env:
            - name: GF_SECURITY_ADMIN_USER
              valueFrom:
                secretKeyRef:
                  name: kubecost-grafana
                  key: admin-user
            - name: GF_SECURITY_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: kubecost-grafana
                  key: admin-password
          livenessProbe:
            failureThreshold: 10
            httpGet:
              path: /api/health
              port: 3000
            initialDelaySeconds: 60
            timeoutSeconds: 30
          readinessProbe:
            httpGet:
              path: /api/health
              port: 3000
          resources:
            {}
      volumes:
        - name: config
          configMap:
            name: kubecost-grafana
        - name: ldap
          secret:
            secretName: kubecost-grafana
            items:
              - key: ldap-toml
                path: ldap.toml
        - name: storage
          emptyDir: {}
        - name: sc-dashboard-volume
          emptyDir: {}
        - name: sc-dashboard-provider
          configMap:
            name: kubecost-grafana-config-dashboards
        - name: sc-datasources-volume
          emptyDir: {}
---
# Source: cost-analyzer/charts/prometheus/charts/kube-state-metrics/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kubecost-kube-state-metrics
  namespace: kubecost
  labels:
    app.kubernetes.io/name: kube-state-metrics
    helm.sh/chart: "kube-state-metrics-2.7.2"
    app.kubernetes.io/instance: "kubecost"
    app.kubernetes.io/managed-by: "Helm"
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: kube-state-metrics
  replicas: 1
  template:
    metadata:
      labels:
        app.kubernetes.io/name: kube-state-metrics
        app.kubernetes.io/instance: "kubecost"
    spec:
      hostNetwork: false
      serviceAccountName: kubecost-kube-state-metrics
      securityContext:
        fsGroup: 65534
        runAsUser: 65534
      containers:
      - name: kube-state-metrics
        args:

        - --collectors=certificatesigningrequests


        - --collectors=configmaps


        - --collectors=cronjobs


        - --collectors=daemonsets


        - --collectors=deployments


        - --collectors=endpoints


        - --collectors=horizontalpodautoscalers


        - --collectors=ingresses


        - --collectors=jobs


        - --collectors=limitranges



        - --collectors=namespaces



        - --collectors=nodes


        - --collectors=persistentvolumeclaims


        - --collectors=persistentvolumes


        - --collectors=poddisruptionbudgets


        - --collectors=pods


        - --collectors=replicasets


        - --collectors=replicationcontrollers


        - --collectors=resourcequotas



        - --collectors=services


        - --collectors=statefulsets


        - --collectors=storageclasses






        imagePullPolicy: IfNotPresent
        image: "quay.io/coreos/kube-state-metrics:v1.9.5"
        ports:
        - containerPort: 8080
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8080
          initialDelaySeconds: 5
          timeoutSeconds: 5
        readinessProbe:
          httpGet:
            path: /
            port: 8080
          initialDelaySeconds: 5
          timeoutSeconds: 5
---
# Source: cost-analyzer/charts/prometheus/templates/alertmanager-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    component: "alertmanager"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-alertmanager
spec:
  selector:
    matchLabels:
      component: "alertmanager"
      app: prometheus
      release: kubecost
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        component: "alertmanager"
        app: prometheus
        release: kubecost
        chart: prometheus-11.0.2
        heritage: Helm
    spec:
      serviceAccountName: kubecost-prometheus-alertmanager
      containers:
        - name: prometheus-alertmanager
          image: "prom/alertmanager:v0.20.0"
          imagePullPolicy: "IfNotPresent"
          env:
            - name: POD_IP
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: status.podIP
          args:
            - --config.file=/etc/config/alertmanager.yml
            - --storage.path=/data
            - --cluster.advertise-address=$(POD_IP):6783
            - --web.external-url=http://localhost:9093

          ports:
            - containerPort: 9093
          readinessProbe:
            httpGet:
              path: /-/ready
              port: 9093
            initialDelaySeconds: 30
            timeoutSeconds: 30
          resources:
            {}
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
            - name: storage-volume
              mountPath: "/data"
              subPath: ""
        - name: prometheus-alertmanager-configmap-reload
          image: "jimmidyson/configmap-reload:v0.3.0"
          imagePullPolicy: "IfNotPresent"
          args:
            - --volume-dir=/etc/config
            - --webhook-url=http://127.0.0.1:9093/-/reload
          resources:
            {}
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
              readOnly: true
      securityContext:
        fsGroup: 65534
        runAsGroup: 65534
        runAsNonRoot: true
        runAsUser: 65534
      volumes:
        - name: config-volume
          configMap:
            name: kubecost-prometheus-alertmanager
        - name: storage-volume
          persistentVolumeClaim:
            claimName: kubecost-prometheus-alertmanager
---
# Source: cost-analyzer/charts/prometheus/templates/server-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    component: "server"
    app: prometheus
    release: kubecost
    chart: prometheus-11.0.2
    heritage: Helm
  name: kubecost-prometheus-server
spec:
  selector:
    matchLabels:
      component: "server"
      app: prometheus
      release: kubecost
  replicas: 1
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        component: "server"
        app: prometheus
        release: kubecost
        chart: prometheus-11.0.2
        heritage: Helm
    spec:
      serviceAccountName: kubecost-prometheus-server
      containers:
        - name: prometheus-server-configmap-reload
          image: "jimmidyson/configmap-reload:v0.3.0"
          imagePullPolicy: "IfNotPresent"
          args:
            - --volume-dir=/etc/config
            - --webhook-url=http://127.0.0.1:9090/-/reload
          resources:
            {}
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
              readOnly: true

        - name: prometheus-server
          image: "prom/prometheus:v2.17.2"
          imagePullPolicy: "IfNotPresent"
          args:
            - --storage.tsdb.retention.time=15d
            - --config.file=/etc/config/prometheus.yml
            - --storage.tsdb.path=/data
            - --web.console.libraries=/etc/prometheus/console_libraries
            - --web.console.templates=/etc/prometheus/consoles
            - --web.enable-lifecycle
            - --query.max-concurrency=1
            - --query.max-samples=1e+08
          ports:
            - containerPort: 9090
          readinessProbe:
            httpGet:
              path: /-/ready
              port: 9090
            initialDelaySeconds: 30
            timeoutSeconds: 30
            failureThreshold: 3
            successThreshold: 1
          livenessProbe:
            httpGet:
              path: /-/healthy
              port: 9090
            initialDelaySeconds: 30
            timeoutSeconds: 30
            failureThreshold: 3
            successThreshold: 1
          resources:
            {}
          volumeMounts:
            - name: config-volume
              mountPath: /etc/config
            - name: storage-volume
              mountPath: /data
              subPath: ""
      securityContext:
        fsGroup: 65534
        runAsGroup: 65534
        runAsNonRoot: true
        runAsUser: 65534
      terminationGracePeriodSeconds: 300
      volumes:
        - name: config-volume
          configMap:
            name: kubecost-prometheus-server
        - name: storage-volume
          persistentVolumeClaim:
            claimName: kubecost-prometheus-server
---
# Source: cost-analyzer/templates/cost-analyzer-deployment-template.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kubecost-cost-analyzer
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
spec:
  replicas: 1
  selector:
    matchLabels:

        app.kubernetes.io/name: cost-analyzer
        app.kubernetes.io/instance: kubecost
        app: cost-analyzer
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      labels:
        
        app.kubernetes.io/name: cost-analyzer
        app.kubernetes.io/instance: kubecost
        app: cost-analyzer
    spec:
      securityContext:
        runAsUser: 1001
        runAsGroup: 1001
        fsGroup: 1001
      restartPolicy: Always
      serviceAccountName: kubecost-cost-analyzer
      volumes:
        - name: nginx-conf
          configMap:
            name: nginx-conf
            items:
              - key: nginx.conf
                path: default.conf
        - name: persistent-configs
          persistentVolumeClaim:
            claimName: kubecost-cost-analyzer
        - name: persistent-db
          persistentVolumeClaim:
            claimName: kubecost-cost-analyzer-db
      initContainers:
        - name: config-db-perms-fix
          image: busybox
          resources:
            {}
          command: ["sh", "-c", "/bin/chmod -R 777 /var/configs && /bin/chmod -R 777 var/db"]
          volumeMounts:
            - name: persistent-configs
              mountPath: /var/configs
            - name: persistent-db
              mountPath: /var/db
          securityContext:
            runAsUser: 0

      containers:
        - image: gcr.io/kubecost1/cost-model:prod-1.67.1
        
          name: cost-model
          imagePullPolicy: Always
          resources:
            requests:
              cpu: 200m
              memory: 55Mi
          readinessProbe:
            httpGet:
              path: /healthz
              port: 9003
            initialDelaySeconds: 30
            periodSeconds: 10
            failureThreshold: 200
          volumeMounts:
            - name: persistent-configs
              mountPath: /var/configs
            - name: persistent-db
              mountPath: /var/db
          env:
            - name: PROMETHEUS_SERVER_ENDPOINT
              valueFrom:
                configMapKeyRef:
                  name: kubecost-cost-analyzer
                  key: prometheus-server-endpoint
            - name: CLOUD_PROVIDER_API_KEY
              value: "AIzaSyDXQPG_MHUEy9neR7stolq6l0ujXmjJlvk" # The GCP Pricing API requires a key.
            - name: GOOGLE_APPLICATION_CREDENTIALS
              value: /var/configs/key.json
            - name: CONFIG_PATH
              value: /var/configs/
            - name: DB_PATH
              value: /var/db/
            - name: CLUSTER_PROFILE
              value: production
            - name: REMOTE_WRITE_PASSWORD
              value: admin
            - name: GOGC
              value: "60"
            - name: LOG_COLLECTION_ENABLED
              value: "true"
            - name: PRODUCT_ANALYTICS_ENABLED
              value: "true"
            - name: ERROR_REPORTING_ENABLED
              value: "true"
            - name: VALUES_REPORTING_ENABLED
              value: "true"
            - name: SENTRY_DSN
              value: "https://71964476292e4087af8d5072afe43abd@o394722.ingest.sentry.io/5245431"
            - name: CACHE_WARMING_ENABLED
              value: "true"
            - name: SAVINGS_CACHE_WARMING_ENABLED
              value: "true"
            - name: USE_ETL_CACHE
              value: "true"
            - name: ETL_ENABLED
              value: "true"
            - name: ETL_STORE_DURATION_DAYS
              value: "120"
            - name: PV_ENABLED
              value: "true"
            - name: MAX_QUERY_CONCURRENCY
              value: "5"
            - name: UTC_OFFSET
              value: "+00:00"
            - name: CLUSTER_ID
              value: cluster-one
            - name: SQL_ADDRESS
              value: pgprometheus
            - name: RELEASE_NAME
              value: kubecost
            - name: KUBECOST_NAMESPACE
              value: kubecost
            - name: KUBECOST_TOKEN
              valueFrom:
                configMapKeyRef:
                  name: kubecost-cost-analyzer
                  key: kubecost-token
        - image: gcr.io/kubecost1/frontend:prod-1.67.1
        
          env:
            - name: GET_HOSTS_FROM
              value: dns
          name: cost-analyzer-frontend
          volumeMounts:
            - name: nginx-conf
              mountPath: /etc/nginx/conf.d/
          resources:
            requests:
              cpu: 10m
              memory: 55Mi
          imagePullPolicy: Always
          readinessProbe:
            httpGet:
              path: /healthz
              port: 9003
            initialDelaySeconds: 30
            periodSeconds: 10
            failureThreshold: 200
        - image: gcr.io/kubecost1/server:prod-1.67.1
        
          resources:
            requests:
              cpu: 100m
              memory: 55Mi
          name: cost-analyzer-server
          readinessProbe:
            httpGet:
              path: /healthz
              port: 9003
            initialDelaySeconds: 30
            periodSeconds: 10
            failureThreshold: 200
          volumeMounts:
            - name: persistent-configs
              mountPath: /var/configs
          env:
            - name: PROMETHEUS_SERVER_ENDPOINT
              valueFrom:
                configMapKeyRef:
                  name: kubecost-cost-analyzer
                  key: prometheus-server-endpoint
            - name: HELM_VALUES
              value: eyJhZmZpbml0eSI6e30sImdsb2JhbCI6eyJncmFmYW5hIjp7ImRvbWFpbk5hbWUiOiJjb3N0LWFuYWx5emVyLWdyYWZhbmEuZGVmYXVsdC5zdmMiLCJlbmFibGVkIjp0cnVlLCJwcm94eSI6dHJ1ZSwic2NoZW1lIjoiaHR0cCJ9LCJub3RpZmljYXRpb25zIjp7fSwicG9kQW5ub3RhdGlvbnMiOnt9LCJwcm9tZXRoZXVzIjp7ImVuYWJsZWQiOnRydWUsImZxZG4iOiJodHRwOi8vY29zdC1hbmFseXplci1wcm9tZXRoZXVzLXNlcnZlci5kZWZhdWx0LnN2YyJ9fSwiZ3JhZmFuYSI6eyJhZG1pblBhc3N3b3JkIjoic3Ryb25ncGFzc3dvcmQiLCJhZG1pblVzZXIiOiJhZG1pbiIsImFmZmluaXR5Ijp7fSwiZGFzaGJvYXJkUHJvdmlkZXJzIjp7fSwiZGFzaGJvYXJkcyI6e30sImRhc2hib2FyZHNDb25maWdNYXBzIjp7fSwiZGF0YXNvdXJjZXMiOnt9LCJkZXBsb3ltZW50U3RyYXRlZ3kiOiJSb2xsaW5nVXBkYXRlIiwiZG93bmxvYWREYXNoYm9hcmRzSW1hZ2UiOnsicHVsbFBvbGljeSI6IklmTm90UHJlc2VudCIsInJlcG9zaXRvcnkiOiJhcHByb3ByaWF0ZS9jdXJsIiwidGFnIjoibGF0ZXN0In0sImVudiI6e30sImVudkZyb21TZWNyZXQiOiIiLCJleHRyYVNlY3JldE1vdW50cyI6W10sImdsb2JhbCI6eyJncmFmYW5hIjp7ImRvbWFpbk5hbWUiOiJjb3N0LWFuYWx5emVyLWdyYWZhbmEuZGVmYXVsdC5zdmMiLCJlbmFibGVkIjp0cnVlLCJwcm94eSI6dHJ1ZSwic2NoZW1lIjoiaHR0cCJ9LCJub3RpZmljYXRpb25zIjp7fSwicG9kQW5ub3RhdGlvbnMiOnt9LCJwcm9tZXRoZXVzIjp7ImVuYWJsZWQiOnRydWUsImZxZG4iOiJodHRwOi8vY29zdC1hbmFseXplci1wcm9tZXRoZXVzLXNlcnZlci5kZWZhdWx0LnN2YyJ9fSwiZ3JhZmFuYS5pbmkiOnsiYW5hbHl0aWNzIjp7ImNoZWNrX2Zvcl91cGRhdGVzIjp0cnVlfSwiYXV0aC5hbm9ueW1vdXMiOnsiZW5hYmxlZCI6dHJ1ZSwib3JnX25hbWUiOiJNYWluIE9yZy4iLCJvcmdfcm9sZSI6IkFkbWluIn0sImdyYWZhbmFfbmV0Ijp7InVybCI6Imh0dHBzOi8vZ3JhZmFuYS5uZXQifSwibG9nIjp7Im1vZGUiOiJjb25zb2xlIn0sInBhdGhzIjp7ImRhdGEiOiIvdmFyL2xpYi9ncmFmYW5hL2RhdGEiLCJsb2dzIjoiL3Zhci9sb2cvZ3JhZmFuYSIsInBsdWdpbnMiOiIvdmFyL2xpYi9ncmFmYW5hL3BsdWdpbnMiLCJwcm92aXNpb25pbmciOiIvZXRjL2dyYWZhbmEvcHJvdmlzaW9uaW5nIn0sInNlcnZlciI6eyJyb290X3VybCI6IiUocHJvdG9jb2wpczovLyUoZG9tYWluKXM6JShodHRwX3BvcnQpcy9ncmFmYW5hIn19LCJpbWFnZSI6eyJwdWxsUG9saWN5IjoiSWZOb3RQcmVzZW50IiwicmVwb3NpdG9yeSI6ImdyYWZhbmEvZ3JhZmFuYSIsInRhZyI6IjcuMS4xIn0sImxkYXAiOnsiY29uZmlnIjoiIiwiZXhpc3RpbmdTZWNyZXQiOiIifSwibGl2ZW5lc3NQcm9iZSI6eyJmYWlsdXJlVGhyZXNob2xkIjoxMCwiaHR0cEdldCI6eyJwYXRoIjoiL2FwaS9oZWFsdGgiLCJwb3J0IjozMDAwfSwiaW5pdGlhbERlbGF5U2Vjb25kcyI6NjAsInRpbWVvdXRTZWNvbmRzIjozMH0sIm5vZGVTZWxlY3RvciI6e30sInBsdWdpbnMiOltdLCJyYmFjIjp7ImNyZWF0ZSI6dHJ1ZSwicHNwRW5hYmxlZCI6dHJ1ZX0sInJlYWRpbmVzc1Byb2JlIjp7Imh0dHBHZXQiOnsicGF0aCI6Ii9hcGkvaGVhbHRoIiwicG9ydCI6MzAwMH19LCJyZXBsaWNhcyI6MSwicmVzb3VyY2VzIjp7fSwic2VjdXJpdHlDb250ZXh0Ijp7ImZzR3JvdXAiOjQ3MiwicnVuQXNVc2VyIjo0NzJ9LCJzZXJ2aWNlIjp7ImFubm90YXRpb25zIjp7fSwibGFiZWxzIjp7fSwicG9ydCI6ODAsInR5cGUiOiJDbHVzdGVySVAifSwic2VydmljZUFjY291bnQiOnsiY3JlYXRlIjp0cnVlfSwic2lkZWNhciI6eyJkYXNoYm9hcmRzIjp7ImVuYWJsZWQiOnRydWUsImZvbGRlciI6Ii90bXAvZGFzaGJvYXJkcyIsImxhYmVsIjoiZ3JhZmFuYV9kYXNoYm9hcmQifSwiZGF0YXNvdXJjZXMiOnsiZGF0YVNvdXJjZU5hbWUiOiJkZWZhdWx0LWt1YmVjb3N0IiwiZGVmYXVsdERhdGFzb3VyY2VFbmFibGVkIjpmYWxzZSwiZW5hYmxlZCI6dHJ1ZSwibGFiZWwiOiJrdWJlY29zdF9ncmFmYW5hX2RhdGFzb3VyY2UifSwiaW1hZ2UiOiJraXdpZ3JpZC9rOHMtc2lkZWNhcjowLjEuMTQ0IiwiaW1hZ2VQdWxsUG9saWN5IjoiSWZOb3RQcmVzZW50IiwicmVzb3VyY2VzIjpudWxsfSwic210cCI6eyJleGlzdGluZ1NlY3JldCI6IiJ9LCJ0b2xlcmF0aW9ucyI6W119LCJpbml0Q2hvd25EYXRhIjp7InJlc291cmNlcyI6e319LCJpbml0Q2hvd25EYXRhSW1hZ2UiOiJidXN5Ym94Iiwia3ViZWNvc3QiOnsiaW1hZ2UiOiJnY3IuaW8va3ViZWNvc3QxL3NlcnZlciIsInJlc291cmNlcyI6eyJyZXF1ZXN0cyI6eyJjcHUiOiIxMDBtIiwibWVtb3J5IjoiNTVNaSJ9fX0sImt1YmVjb3N0Q2hlY2tzIjp7ImVuYWJsZWQiOnRydWUsImltYWdlIjoicXVheS5pby9rdWJlY29zdDEvY2hlY2tzIiwicmVzb3VyY2VzIjp7ImxpbWl0cyI6eyJjcHUiOiIxMDBtIiwibWVtb3J5IjoiMjAwTWkifSwicmVxdWVzdHMiOnsiY3B1IjoiMjBtIiwibWVtb3J5IjoiMTAwTWkifX19LCJrdWJlY29zdERlcGxveW1lbnQiOnsicmVwbGljYXMiOjF9LCJrdWJlY29zdEZyb250ZW5kIjp7ImltYWdlIjoiZ2NyLmlvL2t1YmVjb3N0MS9mcm9udGVuZCIsImltYWdlUHVsbFBvbGljeSI6IkFsd2F5cyIsInJlc291cmNlcyI6eyJyZXF1ZXN0cyI6eyJjcHUiOiIxMG0iLCJtZW1vcnkiOiI1NU1pIn19fSwia3ViZWNvc3RNb2RlbCI6eyJldGwiOnRydWUsImV0bFN0b3JlRHVyYXRpb25EYXlzIjoxMjAsImltYWdlIjoiZ2NyLmlvL2t1YmVjb3N0MS9jb3N0LW1vZGVsIiwiaW1hZ2VQdWxsUG9saWN5IjoiQWx3YXlzIiwibWF4UXVlcnlDb25jdXJyZW5jeSI6NSwicmVzb3VyY2VzIjp7InJlcXVlc3RzIjp7ImNwdSI6IjIwMG0iLCJtZW1vcnkiOiI1NU1pIn19LCJ1dGNPZmZzZXQiOiIrMDA6MDAiLCJ3YXJtQ2FjaGUiOnRydWUsIndhcm1TYXZpbmdzQ2FjaGUiOnRydWV9LCJub2RlU2VsZWN0b3IiOnt9LCJwZXJzaXN0ZW50Vm9sdW1lIjp7ImRiU2l6ZSI6IjMyLjBHaSIsImVuYWJsZWQiOnRydWUsInNpemUiOiIwLjJHaSJ9LCJwcm9tZXRoZXVzIjp7ImFsZXJ0UmVsYWJlbENvbmZpZ3MiOm51bGwsImFsZXJ0bWFuYWdlciI6eyJhZmZpbml0eSI6e30sImJhc2VVUkwiOiJodHRwOi8vbG9jYWxob3N0OjkwOTMiLCJjb25maWdGaWxlTmFtZSI6ImFsZXJ0bWFuYWdlci55bWwiLCJjb25maWdGcm9tU2VjcmV0IjoiIiwiY29uZmlnTWFwT3ZlcnJpZGVOYW1lIjoiIiwiZW5hYmxlZCI6dHJ1ZSwiZXh0cmFBcmdzIjp7fSwiZXh0cmFFbnYiOnt9LCJleHRyYVNlY3JldE1vdW50cyI6W10sImltYWdlIjp7InB1bGxQb2xpY3kiOiJJZk5vdFByZXNlbnQiLCJyZXBvc2l0b3J5IjoicHJvbS9hbGVydG1hbmFnZXIiLCJ0YWciOiJ2MC4yMC4wIn0sIm5hbWUiOiJhbGVydG1hbmFnZXIiLCJub2RlU2VsZWN0b3IiOnt9LCJwZXJzaXN0ZW50Vm9sdW1lIjp7ImFjY2Vzc01vZGVzIjpbIlJlYWRXcml0ZU9uY2UiXSwiYW5ub3RhdGlvbnMiOnt9LCJlbmFibGVkIjp0cnVlLCJleGlzdGluZ0NsYWltIjoiIiwibW91bnRQYXRoIjoiL2RhdGEiLCJzaXplIjoiMkdpIiwic3ViUGF0aCI6IiJ9LCJwb2RBbm5vdGF0aW9ucyI6e30sInBvZExhYmVscyI6e30sInBvZFNlY3VyaXR5UG9saWN5Ijp7ImFubm90YXRpb25zIjp7fX0sInByZWZpeFVSTCI6IiIsInByaW9yaXR5Q2xhc3NOYW1lIjoiIiwicmVwbGljYUNvdW50IjoxLCJyZXNvdXJjZXMiOnt9LCJzZWN1cml0eUNvbnRleHQiOnsiZnNHcm91cCI6NjU1MzQsInJ1bkFzR3JvdXAiOjY1NTM0LCJydW5Bc05vblJvb3QiOnRydWUsInJ1bkFzVXNlciI6NjU1MzR9LCJzZXJ2aWNlIjp7ImFubm90YXRpb25zIjp7fSwiY2x1c3RlcklQIjoiIiwiZXh0ZXJuYWxJUHMiOltdLCJsYWJlbHMiOnt9LCJsb2FkQmFsYW5jZXJJUCI6IiIsImxvYWRCYWxhbmNlclNvdXJjZVJhbmdlcyI6W10sInNlcnZpY2VQb3J0Ijo4MCwic2Vzc2lvbkFmZmluaXR5IjoiTm9uZSIsInR5cGUiOiJDbHVzdGVySVAifSwic3RyYXRlZ3kiOnsidHlwZSI6IlJlY3JlYXRlIn0sInRvbGVyYXRpb25zIjpbXX0sImFsZXJ0bWFuYWdlckZpbGVzIjp7ImFsZXJ0bWFuYWdlci55bWwiOnsiZ2xvYmFsIjp7fSwicmVjZWl2ZXJzIjpbeyJuYW1lIjoiZGVmYXVsdC1yZWNlaXZlciJ9XSwicm91dGUiOnsiZ3JvdXBfaW50ZXJ2YWwiOiI1bSIsImdyb3VwX3dhaXQiOiIxMHMiLCJyZWNlaXZlciI6ImRlZmF1bHQtcmVjZWl2ZXIiLCJyZXBlYXRfaW50ZXJ2YWwiOiIzaCJ9fX0sImNvbmZpZ21hcFJlbG9hZCI6eyJhbGVydG1hbmFnZXIiOnsiZW5hYmxlZCI6dHJ1ZSwiZXh0cmFBcmdzIjp7fSwiZXh0cmFDb25maWdtYXBNb3VudHMiOltdLCJleHRyYVZvbHVtZURpcnMiOltdLCJpbWFnZSI6eyJwdWxsUG9saWN5IjoiSWZOb3RQcmVzZW50IiwicmVwb3NpdG9yeSI6ImppbW1pZHlzb24vY29uZmlnbWFwLXJlbG9hZCIsInRhZyI6InYwLjMuMCJ9LCJuYW1lIjoiY29uZmlnbWFwLXJlbG9hZCIsInJlc291cmNlcyI6e319LCJwcm9tZXRoZXVzIjp7ImVuYWJsZWQiOnRydWUsImV4dHJhQXJncyI6e30sImV4dHJhQ29uZmlnbWFwTW91bnRzIjpbXSwiZXh0cmFWb2x1bWVEaXJzIjpbXSwiaW1hZ2UiOnsicHVsbFBvbGljeSI6IklmTm90UHJlc2VudCIsInJlcG9zaXRvcnkiOiJqaW1taWR5c29uL2NvbmZpZ21hcC1yZWxvYWQiLCJ0YWciOiJ2MC4zLjAifSwibmFtZSI6ImNvbmZpZ21hcC1yZWxvYWQiLCJyZXNvdXJjZXMiOnt9fX0sImV4dHJhU2NyYXBlQ29uZmlncyI6Ii0gam9iX25hbWU6IGt1YmVjb3N0XG4gIGhvbm9yX2xhYmVsczogdHJ1ZVxuICBzY3JhcGVfaW50ZXJ2YWw6IDFtXG4gIHNjcmFwZV90aW1lb3V0OiAxMHNcbiAgbWV0cmljc19wYXRoOiAvbWV0cmljc1xuICBzY2hlbWU6IGh0dHBcbiAgZG5zX3NkX2NvbmZpZ3M6XG4gIC0gbmFtZXM6XG4gICAgLSB7eyB0ZW1wbGF0ZSBcImNvc3QtYW5hbHl6ZXIuc2VydmljZU5hbWVcIiAuIH19XG4gICAgdHlwZTogJ0EnXG4gICAgcG9ydDogOTAwM1xuLSBqb2JfbmFtZToga3ViZWNvc3QtbmV0d29ya2luZ1xuICBrdWJlcm5ldGVzX3NkX2NvbmZpZ3M6XG4gICAgLSByb2xlOiBwb2RcbiAgcmVsYWJlbF9jb25maWdzOlxuICAjIFNjcmFwZSBvbmx5IHRoZSB0aGUgdGFyZ2V0cyBtYXRjaGluZyB0aGUgZm9sbG93aW5nIG1ldGFkYXRhXG4gICAgLSBzb3VyY2VfbGFiZWxzOiBbX19tZXRhX2t1YmVybmV0ZXNfcG9kX2xhYmVsX2FwcF1cbiAgICAgIGFjdGlvbjoga2VlcFxuICAgICAgcmVnZXg6ICB7eyB0ZW1wbGF0ZSBcImNvc3QtYW5hbHl6ZXIubmV0d29ya0Nvc3RzTmFtZVwiIC4gfX1cbiIsImdsb2JhbCI6eyJncmFmYW5hIjp7ImRvbWFpbk5hbWUiOiJjb3N0LWFuYWx5emVyLWdyYWZhbmEuZGVmYXVsdC5zdmMiLCJlbmFibGVkIjp0cnVlLCJwcm94eSI6dHJ1ZSwic2NoZW1lIjoiaHR0cCJ9LCJub3RpZmljYXRpb25zIjp7fSwicG9kQW5ub3RhdGlvbnMiOnt9LCJwcm9tZXRoZXVzIjp7ImVuYWJsZWQiOnRydWUsImZxZG4iOiJodHRwOi8vY29zdC1hbmFseXplci1wcm9tZXRoZXVzLXNlcnZlci5kZWZhdWx0LnN2YyJ9fSwiaW1hZ2VQdWxsU2VjcmV0cyI6bnVsbCwia3ViZS1zdGF0ZS1tZXRyaWNzIjp7ImFmZmluaXR5Ijp7fSwiY29sbGVjdG9ycyI6eyJjZXJ0aWZpY2F0ZXNpZ25pbmdyZXF1ZXN0cyI6dHJ1ZSwiY29uZmlnbWFwcyI6dHJ1ZSwiY3JvbmpvYnMiOnRydWUsImRhZW1vbnNldHMiOnRydWUsImRlcGxveW1lbnRzIjp0cnVlLCJlbmRwb2ludHMiOnRydWUsImhvcml6b250YWxwb2RhdXRvc2NhbGVycyI6dHJ1ZSwiaW5ncmVzc2VzIjp0cnVlLCJqb2JzIjp0cnVlLCJsaW1pdHJhbmdlcyI6dHJ1ZSwibXV0YXRpbmd3ZWJob29rY29uZmlndXJhdGlvbnMiOmZhbHNlLCJuYW1lc3BhY2VzIjp0cnVlLCJuZXR3b3JrcG9saWNpZXMiOmZhbHNlLCJub2RlcyI6dHJ1ZSwicGVyc2lzdGVudHZvbHVtZWNsYWltcyI6dHJ1ZSwicGVyc2lzdGVudHZvbHVtZXMiOnRydWUsInBvZGRpc3J1cHRpb25idWRnZXRzIjp0cnVlLCJwb2RzIjp0cnVlLCJyZXBsaWNhc2V0cyI6dHJ1ZSwicmVwbGljYXRpb25jb250cm9sbGVycyI6dHJ1ZSwicmVzb3VyY2VxdW90YXMiOnRydWUsInNlY3JldHMiOmZhbHNlLCJzZXJ2aWNlcyI6dHJ1ZSwic3RhdGVmdWxzZXRzIjp0cnVlLCJzdG9yYWdlY2xhc3NlcyI6dHJ1ZSwidmFsaWRhdGluZ3dlYmhvb2tjb25maWd1cmF0aW9ucyI6ZmFsc2UsInZlcnRpY2FscG9kYXV0b3NjYWxlcnMiOmZhbHNlLCJ2b2x1bWVhdHRhY2htZW50cyI6ZmFsc2V9LCJjdXN0b21MYWJlbHMiOnt9LCJnbG9iYWwiOnsiZ3JhZmFuYSI6eyJkb21haW5OYW1lIjoiY29zdC1hbmFseXplci1ncmFmYW5hLmRlZmF1bHQuc3ZjIiwiZW5hYmxlZCI6dHJ1ZSwicHJveHkiOnRydWUsInNjaGVtZSI6Imh0dHAifSwibm90aWZpY2F0aW9ucyI6e30sInBvZEFubm90YXRpb25zIjp7fSwicHJvbWV0aGV1cyI6eyJlbmFibGVkIjp0cnVlLCJmcWRuIjoiaHR0cDovL2Nvc3QtYW5hbHl6ZXItcHJvbWV0aGV1cy1zZXJ2ZXIuZGVmYXVsdC5zdmMifX0sImhvc3ROZXR3b3JrIjpmYWxzZSwiaW1hZ2UiOnsicHVsbFBvbGljeSI6IklmTm90UHJlc2VudCIsInJlcG9zaXRvcnkiOiJxdWF5LmlvL2NvcmVvcy9rdWJlLXN0YXRlLW1ldHJpY3MiLCJ0YWciOiJ2MS45LjUifSwibmFtZXNwYWNlT3ZlcnJpZGUiOiIiLCJub2RlU2VsZWN0b3IiOnt9LCJwb2RBbm5vdGF0aW9ucyI6e30sInByb21ldGhldXMiOnt9LCJwcm9tZXRoZXVzU2NyYXBlIjp0cnVlLCJyYmFjIjp7ImNyZWF0ZSI6dHJ1ZX0sInJlcGxpY2FzIjoxLCJzZWN1cml0eUNvbnRleHQiOnsiZW5hYmxlZCI6dHJ1ZSwiZnNHcm91cCI6NjU1MzQsInJ1bkFzVXNlciI6NjU1MzR9LCJzZXJ2aWNlIjp7ImFubm90YXRpb25zIjp7fSwibG9hZEJhbGFuY2VySVAiOiIiLCJub2RlUG9ydCI6MCwicG9ydCI6ODA4MCwidHlwZSI6IkNsdXN0ZXJJUCJ9LCJzZXJ2aWNlQWNjb3VudCI6eyJjcmVhdGUiOnRydWUsImltYWdlUHVsbFNlY3JldHMiOltdfSwidG9sZXJhdGlvbnMiOltdfSwia3ViZVN0YXRlTWV0cmljcyI6eyJlbmFibGVkIjp0cnVlfSwibm9kZUV4cG9ydGVyIjp7ImVuYWJsZWQiOnRydWUsImV4dHJhQXJncyI6e30sImV4dHJhQ29uZmlnbWFwTW91bnRzIjpbXSwiZXh0cmFIb3N0UGF0aE1vdW50cyI6W10sImhvc3ROZXR3b3JrIjp0cnVlLCJob3N0UElEIjp0cnVlLCJpbWFnZSI6eyJwdWxsUG9saWN5IjoiSWZOb3RQcmVzZW50IiwicmVwb3NpdG9yeSI6InByb20vbm9kZS1leHBvcnRlciIsInRhZyI6InYwLjE4LjEifSwibmFtZSI6Im5vZGUtZXhwb3J0ZXIiLCJub2RlU2VsZWN0b3IiOnt9LCJwb2QiOnsibGFiZWxzIjp7fX0sInBvZEFubm90YXRpb25zIjp7fSwicG9kU2VjdXJpdHlQb2xpY3kiOnsiYW5ub3RhdGlvbnMiOnt9fSwicHJpb3JpdHlDbGFzc05hbWUiOiIiLCJyZXNvdXJjZXMiOnt9LCJzZWN1cml0eUNvbnRleHQiOnt9LCJzZXJ2aWNlIjp7ImFubm90YXRpb25zIjp7InByb21ldGhldXMuaW8vc2NyYXBlIjoidHJ1ZSJ9LCJjbHVzdGVySVAiOiJOb25lIiwiZXh0ZXJuYWxJUHMiOltdLCJob3N0UG9ydCI6OTEwMCwibGFiZWxzIjp7fSwibG9hZEJhbGFuY2VySVAiOiIiLCJsb2FkQmFsYW5jZXJTb3VyY2VSYW5nZXMiOltdLCJzZXJ2aWNlUG9ydCI6OTEwMCwidHlwZSI6IkNsdXN0ZXJJUCJ9LCJ0b2xlcmF0aW9ucyI6W10sInVwZGF0ZVN0cmF0ZWd5Ijp7InR5cGUiOiJSb2xsaW5nVXBkYXRlIn19LCJyYmFjIjp7ImNyZWF0ZSI6dHJ1ZX0sInNlcnZlciI6eyJhZmZpbml0eSI6e30sImFsZXJ0bWFuYWdlcnMiOltdLCJiYXNlVVJMIjoiIiwiY29uZmlnTWFwT3ZlcnJpZGVOYW1lIjoiIiwiY29uZmlnUGF0aCI6Ii9ldGMvY29uZmlnL3Byb21ldGhldXMueW1sIiwiZW1wdHlEaXIiOnsic2l6ZUxpbWl0IjoiIn0sImVuYWJsZWQiOnRydWUsImVudiI6W10sImV4dHJhQXJncyI6eyJxdWVyeS5tYXgtY29uY3VycmVuY3kiOjEsInF1ZXJ5Lm1heC1zYW1wbGVzIjoxMDAwMDAwMDB9LCJleHRyYUNvbmZpZ21hcE1vdW50cyI6W10sImV4dHJhRmxhZ3MiOlsid2ViLmVuYWJsZS1saWZlY3ljbGUiXSwiZXh0cmFIb3N0UGF0aE1vdW50cyI6W10sImV4dHJhSW5pdENvbnRhaW5lcnMiOltdLCJleHRyYVNlY3JldE1vdW50cyI6W10sImV4dHJhVm9sdW1lTW91bnRzIjpbXSwiZXh0cmFWb2x1bWVzIjpbXSwiZ2xvYmFsIjp7ImV2YWx1YXRpb25faW50ZXJ2YWwiOiIxbSIsImV4dGVybmFsX2xhYmVscyI6eyJjbHVzdGVyX2lkIjoiY2x1c3Rlci1vbmUifSwic2NyYXBlX2ludGVydmFsIjoiMW0iLCJzY3JhcGVfdGltZW91dCI6IjEwcyJ9LCJpbWFnZSI6eyJwdWxsUG9saWN5IjoiSWZOb3RQcmVzZW50IiwicmVwb3NpdG9yeSI6InByb20vcHJvbWV0aGV1cyIsInRhZyI6InYyLjE3LjIifSwibGl2ZW5lc3NQcm9iZUZhaWx1cmVUaHJlc2hvbGQiOjMsImxpdmVuZXNzUHJvYmVJbml0aWFsRGVsYXkiOjMwLCJsaXZlbmVzc1Byb2JlU3VjY2Vzc1RocmVzaG9sZCI6MSwibGl2ZW5lc3NQcm9iZVRpbWVvdXQiOjMwLCJuYW1lIjoic2VydmVyIiwibm9kZVNlbGVjdG9yIjp7fSwicGVyc2lzdGVudFZvbHVtZSI6eyJhY2Nlc3NNb2RlcyI6WyJSZWFkV3JpdGVPbmNlIl0sImFubm90YXRpb25zIjp7fSwiZW5hYmxlZCI6dHJ1ZSwiZXhpc3RpbmdDbGFpbSI6IiIsIm1vdW50UGF0aCI6Ii9kYXRhIiwic2l6ZSI6IjMyR2kiLCJzdWJQYXRoIjoiIn0sInBvZEFubm90YXRpb25zIjp7fSwicG9kTGFiZWxzIjp7fSwicG9kU2VjdXJpdHlQb2xpY3kiOnsiYW5ub3RhdGlvbnMiOnt9fSwicHJlZml4VVJMIjoiIiwicHJpb3JpdHlDbGFzc05hbWUiOiIiLCJyZWFkaW5lc3NQcm9iZUZhaWx1cmVUaHJlc2hvbGQiOjMsInJlYWRpbmVzc1Byb2JlSW5pdGlhbERlbGF5IjozMCwicmVhZGluZXNzUHJvYmVTdWNjZXNzVGhyZXNob2xkIjoxLCJyZWFkaW5lc3NQcm9iZVRpbWVvdXQiOjMwLCJyZW1vdGVSZWFkIjp7fSwicmVtb3RlV3JpdGUiOnt9LCJyZXBsaWNhQ291bnQiOjEsInJlc291cmNlcyI6e30sInJldGVudGlvbiI6IjE1ZCIsInNlY3VyaXR5Q29udGV4dCI6eyJmc0dyb3VwIjo2NTUzNCwicnVuQXNHcm91cCI6NjU1MzQsInJ1bkFzTm9uUm9vdCI6dHJ1ZSwicnVuQXNVc2VyIjo2NTUzNH0sInNlcnZpY2UiOnsiYW5ub3RhdGlvbnMiOnt9LCJjbHVzdGVySVAiOiIiLCJleHRlcm5hbElQcyI6W10sImxhYmVscyI6e30sImxvYWRCYWxhbmNlcklQIjoiIiwibG9hZEJhbGFuY2VyU291cmNlUmFuZ2VzIjpbXSwic2VydmljZVBvcnQiOjgwLCJzZXNzaW9uQWZmaW5pdHkiOiJOb25lIiwidHlwZSI6IkNsdXN0ZXJJUCJ9LCJzaWRlY2FyQ29udGFpbmVycyI6bnVsbCwic3RyYXRlZ3kiOnsidHlwZSI6IlJlY3JlYXRlIn0sInRlcm1pbmF0aW9uR3JhY2VQZXJpb2RTZWNvbmRzIjozMDAsInRvbGVyYXRpb25zIjpbXX0sInNlcnZlckZpbGVzIjp7ImFsZXJ0aW5nX3J1bGVzLnltbCI6e30sImFsZXJ0cyI6e30sInByb21ldGhldXMueW1sIjp7InJ1bGVfZmlsZXMiOlsiL2V0Yy9jb25maWcvcmVjb3JkaW5nX3J1bGVzLnltbCIsIi9ldGMvY29uZmlnL2FsZXJ0aW5nX3J1bGVzLnltbCIsIi9ldGMvY29uZmlnL3J1bGVzIiwiL2V0Yy9jb25maWcvYWxlcnRzIl0sInNjcmFwZV9jb25maWdzIjpbeyJqb2JfbmFtZSI6InByb21ldGhldXMiLCJzdGF0aWNfY29uZmlncyI6W3sidGFyZ2V0cyI6WyJsb2NhbGhvc3Q6OTA5MCJdfV19LHsiYmVhcmVyX3Rva2VuX2ZpbGUiOiIvdmFyL3J1bi9zZWNyZXRzL2t1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvdG9rZW4iLCJqb2JfbmFtZSI6Imt1YmVybmV0ZXMtbm9kZXMtY2Fkdmlzb3IiLCJrdWJlcm5ldGVzX3NkX2NvbmZpZ3MiOlt7InJvbGUiOiJub2RlIn1dLCJtZXRyaWNfcmVsYWJlbF9jb25maWdzIjpbeyJhY3Rpb24iOiJrZWVwIiwicmVnZXgiOiIoY29udGFpbmVyX2NwdV91c2FnZV9zZWNvbmRzX3RvdGFsfGNvbnRhaW5lcl9tZW1vcnlfd29ya2luZ19zZXRfYnl0ZXN8Y29udGFpbmVyX25ldHdvcmtfcmVjZWl2ZV9lcnJvcnNfdG90YWx8Y29udGFpbmVyX25ldHdvcmtfdHJhbnNtaXRfZXJyb3JzX3RvdGFsfGNvbnRhaW5lcl9uZXR3b3JrX3JlY2VpdmVfcGFja2V0c19kcm9wcGVkX3RvdGFsfGNvbnRhaW5lcl9uZXR3b3JrX3RyYW5zbWl0X3BhY2tldHNfZHJvcHBlZF90b3RhbHxjb250YWluZXJfbWVtb3J5X3VzYWdlX2J5dGVzfGNvbnRhaW5lcl9jcHVfY2ZzX3Rocm90dGxlZF9wZXJpb2RzX3RvdGFsfGNvbnRhaW5lcl9jcHVfY2ZzX3BlcmlvZHNfdG90YWx8Y29udGFpbmVyX2ZzX3VzYWdlX2J5dGVzfGNvbnRhaW5lcl9mc19saW1pdF9ieXRlc3xjb250YWluZXJfY3B1X2Nmc19wZXJpb2RzX3RvdGFsfGNvbnRhaW5lcl9mc19pbm9kZXNfZnJlZXxjb250YWluZXJfZnNfaW5vZGVzX3RvdGFsfGNvbnRhaW5lcl9mc191c2FnZV9ieXRlc3xjb250YWluZXJfZnNfbGltaXRfYnl0ZXN8Y29udGFpbmVyX2NwdV9jZnNfdGhyb3R0bGVkX3BlcmlvZHNfdG90YWx8Y29udGFpbmVyX2NwdV9jZnNfcGVyaW9kc190b3RhbHxjb250YWluZXJfbmV0d29ya19yZWNlaXZlX2J5dGVzX3RvdGFsfGNvbnRhaW5lcl9uZXR3b3JrX3RyYW5zbWl0X2J5dGVzX3RvdGFsfGNvbnRhaW5lcl9mc19pbm9kZXNfZnJlZXxjb250YWluZXJfZnNfaW5vZGVzX3RvdGFsfGNvbnRhaW5lcl9mc191c2FnZV9ieXRlc3xjb250YWluZXJfZnNfbGltaXRfYnl0ZXN8Y29udGFpbmVyX3NwZWNfY3B1X3NoYXJlc3xjb250YWluZXJfc3BlY19tZW1vcnlfbGltaXRfYnl0ZXN8Y29udGFpbmVyX25ldHdvcmtfcmVjZWl2ZV9ieXRlc190b3RhbHxjb250YWluZXJfbmV0d29ya190cmFuc21pdF9ieXRlc190b3RhbHxjb250YWluZXJfZnNfcmVhZHNfYnl0ZXNfdG90YWx8Y29udGFpbmVyX25ldHdvcmtfcmVjZWl2ZV9ieXRlc190b3RhbHxjb250YWluZXJfZnNfd3JpdGVzX2J5dGVzX3RvdGFsfGNvbnRhaW5lcl9mc19yZWFkc19ieXRlc190b3RhbHxjYWR2aXNvcl92ZXJzaW9uX2luZm8pIiwic291cmNlX2xhYmVscyI6WyJfX25hbWVfXyJdfSx7ImFjdGlvbiI6InJlcGxhY2UiLCJyZWdleCI6IiguKykiLCJzb3VyY2VfbGFiZWxzIjpbImNvbnRhaW5lciJdLCJ0YXJnZXRfbGFiZWwiOiJjb250YWluZXJfbmFtZSJ9LHsiYWN0aW9uIjoicmVwbGFjZSIsInJlZ2V4IjoiKC4rKSIsInNvdXJjZV9sYWJlbHMiOlsicG9kIl0sInRhcmdldF9sYWJlbCI6InBvZF9uYW1lIn1dLCJyZWxhYmVsX2NvbmZpZ3MiOlt7ImFjdGlvbiI6ImxhYmVsbWFwIiwicmVnZXgiOiJfX21ldGFfa3ViZXJuZXRlc19ub2RlX2xhYmVsXyguKykifSx7InJlcGxhY2VtZW50Ijoia3ViZXJuZXRlcy5kZWZhdWx0LnN2Yzo0NDMiLCJ0YXJnZXRfbGFiZWwiOiJfX2FkZHJlc3NfXyJ9LHsicmVnZXgiOiIoLispIiwicmVwbGFjZW1lbnQiOiIvYXBpL3YxL25vZGVzLyQxL3Byb3h5L21ldHJpY3MvY2Fkdmlzb3IiLCJzb3VyY2VfbGFiZWxzIjpbIl9fbWV0YV9rdWJlcm5ldGVzX25vZGVfbmFtZSJdLCJ0YXJnZXRfbGFiZWwiOiJfX21ldHJpY3NfcGF0aF9fIn1dLCJzY2hlbWUiOiJodHRwcyIsInRsc19jb25maWciOnsiY2FfZmlsZSI6Ii92YXIvcnVuL3NlY3JldHMva3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9jYS5jcnQiLCJpbnNlY3VyZV9za2lwX3ZlcmlmeSI6dHJ1ZX19LHsiam9iX25hbWUiOiJrdWJlcm5ldGVzLXNlcnZpY2UtZW5kcG9pbnRzIiwia3ViZXJuZXRlc19zZF9jb25maWdzIjpbeyJyb2xlIjoiZW5kcG9pbnRzIn1dLCJtZXRyaWNfcmVsYWJlbF9jb25maWdzIjpbeyJhY3Rpb24iOiJrZWVwIiwicmVnZXgiOiIoY29udGFpbmVyX2NwdV9hbGxvY2F0aW9ufGNvbnRhaW5lcl9jcHVfdXNhZ2Vfc2Vjb25kc190b3RhbHxjb250YWluZXJfZnNfbGltaXRfYnl0ZXN8Y29udGFpbmVyX21lbW9yeV9hbGxvY2F0aW9uX2J5dGVzfGNvbnRhaW5lcl9tZW1vcnlfdXNhZ2VfYnl0ZXN8Y29udGFpbmVyX21lbW9yeV93b3JraW5nX3NldF9ieXRlc3xjb250YWluZXJfbmV0d29ya19yZWNlaXZlX2J5dGVzX3RvdGFsfGNvbnRhaW5lcl9uZXR3b3JrX3RyYW5zbWl0X2J5dGVzX3RvdGFsfGRlcGxveW1lbnRfbWF0Y2hfbGFiZWxzfGt1YmVfZGVwbG95bWVudF9zcGVjX3JlcGxpY2FzfGt1YmVfZGVwbG95bWVudF9zdGF0dXNfcmVwbGljYXNfYXZhaWxhYmxlfGt1YmVfam9iX3N0YXR1c19mYWlsZWR8a3ViZV9uYW1lc3BhY2VfYW5ub3RhdGlvbnN8a3ViZV9uYW1lc3BhY2VfbGFiZWxzfGt1YmVfbm9kZV9pbmZvfGt1YmVfbm9kZV9sYWJlbHN8a3ViZV9ub2RlX3N0YXR1c19jYXBhY2l0eV9jcHVfY29yZXN8a3ViZV9ub2RlX3N0YXR1c19jYXBhY2l0eV9tZW1vcnlfYnl0ZXN8a3ViZV9ub2RlX3N0YXR1c19jb25kaXRpb258a3ViZV9wZXJzaXN0ZW50dm9sdW1lX2NhcGFjaXR5X2J5dGVzfGt1YmVfcGVyc2lzdGVudHZvbHVtZV9zdGF0dXNfcGhhc2V8a3ViZV9wZXJzaXN0ZW50dm9sdW1lY2xhaW1faW5mb3xrdWJlX3BlcnNpc3RlbnR2b2x1bWVjbGFpbV9yZXNvdXJjZV9yZXF1ZXN0c19zdG9yYWdlX2J5dGVzfGt1YmVfcGVyc2lzdGVudHZvbHVtZWNsYWltX3Jlc291cmNlX3JlcXVlc3RzX3N0b3JhZ2VfYnl0ZXN8Y29udGFpbmVyX21lbW9yeV9hbGxvY2F0aW9uX2J5dGVzfGt1YmVfcG9kX2NvbnRhaW5lcl9yZXNvdXJjZV9saW1pdHNfY3B1X2NvcmVzfGt1YmVfcG9kX2NvbnRhaW5lcl9yZXNvdXJjZV9saW1pdHNfbWVtb3J5X2J5dGVzfGt1YmVfcG9kX2NvbnRhaW5lcl9yZXNvdXJjZV9yZXF1ZXN0c19jcHVfY29yZXN8a3ViZV9wb2RfY29udGFpbmVyX3Jlc291cmNlX3JlcXVlc3RzX2NwdV9jb3Jlc3xjb250YWluZXJfY3B1X3VzYWdlX3NlY29uZHNfdG90YWx8a3ViZV9wb2RfY29udGFpbmVyX3Jlc291cmNlX3JlcXVlc3RzX21lbW9yeV9ieXRlc3xrdWJlX3BvZF9jb250YWluZXJfcmVzb3VyY2VfcmVxdWVzdHNfbWVtb3J5X2J5dGVzfGt1YmVfbm9kZV9zdGF0dXNfY2FwYWNpdHlfbWVtb3J5X2J5dGVzfGt1YmVfcG9kX2NvbnRhaW5lcl9yZXNvdXJjZV9yZXF1ZXN0c3xrdWJlX3BvZF9jb250YWluZXJfc3RhdHVzX3Jlc3RhcnRzX3RvdGFsfGt1YmVfcG9kX2NvbnRhaW5lcl9zdGF0dXNfcnVubmluZ3xrdWJlX3BvZF9jb250YWluZXJfc3RhdHVzX3Rlcm1pbmF0ZWRfcmVhc29ufGt1YmVfcG9kX2xhYmVsc3xrdWJlX3BvZF9vd25lcnxrdWJlX3BvZF9zdGF0dXNfcGhhc2V8a3ViZWNvc3RfY2x1c3Rlcl9tZW1vcnlfd29ya2luZ19zZXRfYnl0ZXN8a3ViZWNvc3RfcG9kX25ldHdvcmtfZWdyZXNzX2J5dGVzX3RvdGFsfG5vZGVfY3B1X2hvdXJseV9jb3N0fG5vZGVfY3B1X3NlY29uZHNfdG90YWx8bm9kZV9kaXNrX3JlYWRzX2NvbXBsZXRlZHxub2RlX2Rpc2tfcmVhZHNfY29tcGxldGVkX3RvdGFsfG5vZGVfZGlza193cml0ZXNfY29tcGxldGVkfG5vZGVfZGlza193cml0ZXNfY29tcGxldGVkX3RvdGFsfG5vZGVfZmlsZXN5c3RlbV9kZXZpY2VfZXJyb3J8bm9kZV9ncHVfaG91cmx5X2Nvc3R8bm9kZV9tZW1vcnlfQnVmZmVyc19ieXRlc3xub2RlX21lbW9yeV9DYWNoZWRfYnl0ZXN8bm9kZV9tZW1vcnlfTWVtQXZhaWxhYmxlX2J5dGVzfG5vZGVfbWVtb3J5X01lbUZyZWVfYnl0ZXN8bm9kZV9tZW1vcnlfTWVtVG90YWxfYnl0ZXN8bm9kZV9uZXR3b3JrX3RyYW5zbWl0X2J5dGVzX3RvdGFsfG5vZGVfcmFtX2hvdXJseV9jb3N0fHBvZF9wdmNfYWxsb2NhdGlvbnxwdl9ob3VybHlfY29zdHxzZXJ2aWNlX3NlbGVjdG9yX2xhYmVsc3xzdGF0ZWZ1bFNldF9tYXRjaF9sYWJlbHN8dXB8a3ViZV9ub2RlX3N0YXR1c19hbGxvY2F0YWJsZV9jcHVfY29yZXN8a3ViZV9ub2RlX3N0YXR1c19hbGxvY2F0YWJsZV9tZW1vcnlfYnl0ZXN8Y29udGFpbmVyX2ZzX3dyaXRlc19ieXRlc190b3RhbHxrdWJlX2RlcGxveW1lbnRfc3RhdHVzX3JlcGxpY2FzfGt1YmVfc3RhdGVmdWxzZXRfcmVwbGljYXN8a3ViZV9kYWVtb25zZXRfc3RhdHVzX2Rlc2lyZWRfbnVtYmVyX3NjaGVkdWxlZHxrdWJlX2RlcGxveW1lbnRfc3RhdHVzX3JlcGxpY2FzX2F2YWlsYWJsZXxrdWJlX3N0YXRlZnVsc2V0X3N0YXR1c19yZXBsaWNhc3xrdWJlX2RhZW1vbnNldF9zdGF0dXNfbnVtYmVyX3JlYWR5fGt1YmVfZGVwbG95bWVudF9zdGF0dXNfcmVwbGljYXN8a3ViZV9zdGF0ZWZ1bHNldF9yZXBsaWNhc3xrdWJlX2RhZW1vbnNldF9zdGF0dXNfZGVzaXJlZF9udW1iZXJfc2NoZWR1bGVkfGt1YmVfcmVwbGljYXNldF9vd25lcnxrdWJlX3BvZF9jb250YWluZXJfaW5mbykiLCJzb3VyY2VfbGFiZWxzIjpbIl9fbmFtZV9fIl19XSwicmVsYWJlbF9jb25maWdzIjpbeyJhY3Rpb24iOiJrZWVwIiwicmVnZXgiOnRydWUsInNvdXJjZV9sYWJlbHMiOlsiX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9hbm5vdGF0aW9uX3Byb21ldGhldXNfaW9fc2NyYXBlIl19LHsiYWN0aW9uIjoicmVwbGFjZSIsInJlZ2V4IjoiKGh0dHBzPykiLCJzb3VyY2VfbGFiZWxzIjpbIl9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfYW5ub3RhdGlvbl9wcm9tZXRoZXVzX2lvX3NjaGVtZSJdLCJ0YXJnZXRfbGFiZWwiOiJfX3NjaGVtZV9fIn0seyJhY3Rpb24iOiJyZXBsYWNlIiwicmVnZXgiOiIoLispIiwic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19wYXRoIl0sInRhcmdldF9sYWJlbCI6Il9fbWV0cmljc19wYXRoX18ifSx7ImFjdGlvbiI6InJlcGxhY2UiLCJyZWdleCI6IihbXjpdKykoPzo6XFxkKyk/OyhcXGQrKSIsInJlcGxhY2VtZW50IjoiJDE6JDIiLCJzb3VyY2VfbGFiZWxzIjpbIl9fYWRkcmVzc19fIiwiX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9hbm5vdGF0aW9uX3Byb21ldGhldXNfaW9fcG9ydCJdLCJ0YXJnZXRfbGFiZWwiOiJfX2FkZHJlc3NfXyJ9LHsiYWN0aW9uIjoibGFiZWxtYXAiLCJyZWdleCI6Il9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbGFiZWxfKC4rKSJ9LHsiYWN0aW9uIjoicmVwbGFjZSIsInNvdXJjZV9sYWJlbHMiOlsiX19tZXRhX2t1YmVybmV0ZXNfbmFtZXNwYWNlIl0sInRhcmdldF9sYWJlbCI6Imt1YmVybmV0ZXNfbmFtZXNwYWNlIn0seyJhY3Rpb24iOiJyZXBsYWNlIiwic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX25hbWUiXSwidGFyZ2V0X2xhYmVsIjoia3ViZXJuZXRlc19uYW1lIn0seyJhY3Rpb24iOiJyZXBsYWNlIiwic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19wb2Rfbm9kZV9uYW1lIl0sInRhcmdldF9sYWJlbCI6Imt1YmVybmV0ZXNfbm9kZSJ9XX0seyJqb2JfbmFtZSI6Imt1YmVybmV0ZXMtc2VydmljZS1lbmRwb2ludHMtc2xvdyIsImt1YmVybmV0ZXNfc2RfY29uZmlncyI6W3sicm9sZSI6ImVuZHBvaW50cyJ9XSwicmVsYWJlbF9jb25maWdzIjpbeyJhY3Rpb24iOiJrZWVwIiwicmVnZXgiOnRydWUsInNvdXJjZV9sYWJlbHMiOlsiX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9hbm5vdGF0aW9uX3Byb21ldGhldXNfaW9fc2NyYXBlX3Nsb3ciXX0seyJhY3Rpb24iOiJyZXBsYWNlIiwicmVnZXgiOiIoaHR0cHM/KSIsInNvdXJjZV9sYWJlbHMiOlsiX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9hbm5vdGF0aW9uX3Byb21ldGhldXNfaW9fc2NoZW1lIl0sInRhcmdldF9sYWJlbCI6Il9fc2NoZW1lX18ifSx7ImFjdGlvbiI6InJlcGxhY2UiLCJyZWdleCI6IiguKykiLCJzb3VyY2VfbGFiZWxzIjpbIl9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfYW5ub3RhdGlvbl9wcm9tZXRoZXVzX2lvX3BhdGgiXSwidGFyZ2V0X2xhYmVsIjoiX19tZXRyaWNzX3BhdGhfXyJ9LHsiYWN0aW9uIjoicmVwbGFjZSIsInJlZ2V4IjoiKFteOl0rKSg/OjpcXGQrKT87KFxcZCspIiwicmVwbGFjZW1lbnQiOiIkMTokMiIsInNvdXJjZV9sYWJlbHMiOlsiX19hZGRyZXNzX18iLCJfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19wb3J0Il0sInRhcmdldF9sYWJlbCI6Il9fYWRkcmVzc19fIn0seyJhY3Rpb24iOiJsYWJlbG1hcCIsInJlZ2V4IjoiX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9sYWJlbF8oLispIn0seyJhY3Rpb24iOiJyZXBsYWNlIiwic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19uYW1lc3BhY2UiXSwidGFyZ2V0X2xhYmVsIjoia3ViZXJuZXRlc19uYW1lc3BhY2UifSx7ImFjdGlvbiI6InJlcGxhY2UiLCJzb3VyY2VfbGFiZWxzIjpbIl9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbmFtZSJdLCJ0YXJnZXRfbGFiZWwiOiJrdWJlcm5ldGVzX25hbWUifSx7ImFjdGlvbiI6InJlcGxhY2UiLCJzb3VyY2VfbGFiZWxzIjpbIl9fbWV0YV9rdWJlcm5ldGVzX3BvZF9ub2RlX25hbWUiXSwidGFyZ2V0X2xhYmVsIjoia3ViZXJuZXRlc19ub2RlIn1dLCJzY3JhcGVfaW50ZXJ2YWwiOiI1bSIsInNjcmFwZV90aW1lb3V0IjoiMzBzIn0seyJob25vcl9sYWJlbHMiOnRydWUsImpvYl9uYW1lIjoicHJvbWV0aGV1cy1wdXNoZ2F0ZXdheSIsImt1YmVybmV0ZXNfc2RfY29uZmlncyI6W3sicm9sZSI6InNlcnZpY2UifV0sInJlbGFiZWxfY29uZmlncyI6W3siYWN0aW9uIjoia2VlcCIsInJlZ2V4IjoicHVzaGdhdGV3YXkiLCJzb3VyY2VfbGFiZWxzIjpbIl9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfYW5ub3RhdGlvbl9wcm9tZXRoZXVzX2lvX3Byb2JlIl19XX0seyJqb2JfbmFtZSI6Imt1YmVybmV0ZXMtc2VydmljZXMiLCJrdWJlcm5ldGVzX3NkX2NvbmZpZ3MiOlt7InJvbGUiOiJzZXJ2aWNlIn1dLCJtZXRyaWNzX3BhdGgiOiIvcHJvYmUiLCJwYXJhbXMiOnsibW9kdWxlIjpbImh0dHBfMnh4Il19LCJyZWxhYmVsX2NvbmZpZ3MiOlt7ImFjdGlvbiI6ImtlZXAiLCJyZWdleCI6dHJ1ZSwic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19zZXJ2aWNlX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19wcm9iZSJdfSx7InNvdXJjZV9sYWJlbHMiOlsiX19hZGRyZXNzX18iXSwidGFyZ2V0X2xhYmVsIjoiX19wYXJhbV90YXJnZXQifSx7InJlcGxhY2VtZW50IjoiYmxhY2tib3giLCJ0YXJnZXRfbGFiZWwiOiJfX2FkZHJlc3NfXyJ9LHsic291cmNlX2xhYmVscyI6WyJfX3BhcmFtX3RhcmdldCJdLCJ0YXJnZXRfbGFiZWwiOiJpbnN0YW5jZSJ9LHsiYWN0aW9uIjoibGFiZWxtYXAiLCJyZWdleCI6Il9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbGFiZWxfKC4rKSJ9LHsic291cmNlX2xhYmVscyI6WyJfX21ldGFfa3ViZXJuZXRlc19uYW1lc3BhY2UiXSwidGFyZ2V0X2xhYmVsIjoia3ViZXJuZXRlc19uYW1lc3BhY2UifSx7InNvdXJjZV9sYWJlbHMiOlsiX19tZXRhX2t1YmVybmV0ZXNfc2VydmljZV9uYW1lIl0sInRhcmdldF9sYWJlbCI6Imt1YmVybmV0ZXNfbmFtZSJ9XX1dfSwicmVjb3JkaW5nX3J1bGVzLnltbCI6e30sInJ1bGVzIjp7Imdyb3VwcyI6W3sibmFtZSI6IkNQVSIsInJ1bGVzIjpbeyJleHByIjoic3VtKHJhdGUoY29udGFpbmVyX2NwdV91c2FnZV9zZWNvbmRzX3RvdGFse2NvbnRhaW5lcl9uYW1lIT1cIlwifVs1bV0pKSIsInJlY29yZCI6ImNsdXN0ZXI6Y3B1X3VzYWdlOnJhdGU1bSJ9LHsiZXhwciI6InJhdGUoY29udGFpbmVyX2NwdV91c2FnZV9zZWNvbmRzX3RvdGFse2NvbnRhaW5lcl9uYW1lIT1cIlwifVs1bV0pIiwicmVjb3JkIjoiY2x1c3RlcjpjcHVfdXNhZ2Vfbm9zdW06cmF0ZTVtIn0seyJleHByIjoiYXZnKGlyYXRlKGNvbnRhaW5lcl9jcHVfdXNhZ2Vfc2Vjb25kc190b3RhbHtjb250YWluZXJfbmFtZSE9XCJQT0RcIiwgY29udGFpbmVyX25hbWUhPVwiXCJ9WzVtXSkpIGJ5IChjb250YWluZXJfbmFtZSxwb2RfbmFtZSxuYW1lc3BhY2UpIiwicmVjb3JkIjoia3ViZWNvc3RfY29udGFpbmVyX2NwdV91c2FnZV9pcmF0ZSJ9LHsiZXhwciI6InN1bShjb250YWluZXJfbWVtb3J5X3dvcmtpbmdfc2V0X2J5dGVze2NvbnRhaW5lcl9uYW1lIT1cIlBPRFwiLGNvbnRhaW5lcl9uYW1lIT1cIlwifSkgYnkgKGNvbnRhaW5lcl9uYW1lLHBvZF9uYW1lLG5hbWVzcGFjZSkiLCJyZWNvcmQiOiJrdWJlY29zdF9jb250YWluZXJfbWVtb3J5X3dvcmtpbmdfc2V0X2J5dGVzIn0seyJleHByIjoic3VtKGNvbnRhaW5lcl9tZW1vcnlfd29ya2luZ19zZXRfYnl0ZXN7Y29udGFpbmVyX25hbWUhPVwiUE9EXCIsY29udGFpbmVyX25hbWUhPVwiXCJ9KSIsInJlY29yZCI6Imt1YmVjb3N0X2NsdXN0ZXJfbWVtb3J5X3dvcmtpbmdfc2V0X2J5dGVzIn1dfSx7Im5hbWUiOiJTYXZpbmdzIiwicnVsZXMiOlt7ImV4cHIiOiJzdW0oYXZnKGt1YmVfcG9kX293bmVye293bmVyX2tpbmQhPVwiRGFlbW9uU2V0XCJ9KSBieSAocG9kKSAqIHN1bShjb250YWluZXJfY3B1X2FsbG9jYXRpb24pIGJ5IChwb2QpKSIsImxhYmVscyI6eyJkYWVtb25zZXQiOiJmYWxzZSJ9LCJyZWNvcmQiOiJrdWJlY29zdF9zYXZpbmdzX2NwdV9hbGxvY2F0aW9uIn0seyJleHByIjoic3VtKGF2ZyhrdWJlX3BvZF9vd25lcntvd25lcl9raW5kPVwiRGFlbW9uU2V0XCJ9KSBieSAocG9kKSAqIHN1bShjb250YWluZXJfY3B1X2FsbG9jYXRpb24pIGJ5IChwb2QpKSAvIHN1bShrdWJlX25vZGVfaW5mbykiLCJsYWJlbHMiOnsiZGFlbW9uc2V0IjoidHJ1ZSJ9LCJyZWNvcmQiOiJrdWJlY29zdF9zYXZpbmdzX2NwdV9hbGxvY2F0aW9uIn0seyJleHByIjoic3VtKGF2ZyhrdWJlX3BvZF9vd25lcntvd25lcl9raW5kIT1cIkRhZW1vblNldFwifSkgYnkgKHBvZCkgKiBzdW0oY29udGFpbmVyX21lbW9yeV9hbGxvY2F0aW9uX2J5dGVzKSBieSAocG9kKSkiLCJsYWJlbHMiOnsiZGFlbW9uc2V0IjoiZmFsc2UifSwicmVjb3JkIjoia3ViZWNvc3Rfc2F2aW5nc19tZW1vcnlfYWxsb2NhdGlvbl9ieXRlcyJ9LHsiZXhwciI6InN1bShhdmcoa3ViZV9wb2Rfb3duZXJ7b3duZXJfa2luZD1cIkRhZW1vblNldFwifSkgYnkgKHBvZCkgKiBzdW0oY29udGFpbmVyX21lbW9yeV9hbGxvY2F0aW9uX2J5dGVzKSBieSAocG9kKSkgLyBzdW0oa3ViZV9ub2RlX2luZm8pIiwibGFiZWxzIjp7ImRhZW1vbnNldCI6InRydWUifSwicmVjb3JkIjoia3ViZWNvc3Rfc2F2aW5nc19tZW1vcnlfYWxsb2NhdGlvbl9ieXRlcyJ9LHsiZXhwciI6ImxhYmVsX3JlcGxhY2Uoc3VtKGt1YmVfcG9kX3N0YXR1c19waGFzZXtwaGFzZT1cIlJ1bm5pbmdcIixuYW1lc3BhY2UhPVwia3ViZS1zeXN0ZW1cIn0gXHUwMDNlIDApIGJ5IChwb2QsIG5hbWVzcGFjZSksIFwicG9kX25hbWVcIiwgXCIkMVwiLCBcInBvZFwiLCBcIiguKylcIikiLCJyZWNvcmQiOiJrdWJlY29zdF9zYXZpbmdzX3J1bm5pbmdfcG9kcyJ9LHsiZXhwciI6InN1bShyYXRlKGNvbnRhaW5lcl9jcHVfdXNhZ2Vfc2Vjb25kc190b3RhbHtjb250YWluZXJfbmFtZSE9XCJcIixjb250YWluZXJfbmFtZSE9XCJQT0RcIixpbnN0YW5jZSE9XCJcIn1bNW1dKSkgYnkgKG5hbWVzcGFjZSwgcG9kX25hbWUsIGNvbnRhaW5lcl9uYW1lLCBpbnN0YW5jZSkiLCJyZWNvcmQiOiJrdWJlY29zdF9zYXZpbmdzX2NvbnRhaW5lcl9jcHVfdXNhZ2Vfc2Vjb25kcyJ9LHsiZXhwciI6InN1bShjb250YWluZXJfbWVtb3J5X3dvcmtpbmdfc2V0X2J5dGVze2NvbnRhaW5lcl9uYW1lIT1cIlwiLGNvbnRhaW5lcl9uYW1lIT1cIlBPRFwiLGluc3RhbmNlIT1cIlwifSkgYnkgKG5hbWVzcGFjZSwgcG9kX25hbWUsIGNvbnRhaW5lcl9uYW1lLCBpbnN0YW5jZSkiLCJyZWNvcmQiOiJrdWJlY29zdF9zYXZpbmdzX2NvbnRhaW5lcl9tZW1vcnlfdXNhZ2VfYnl0ZXMifSx7ImV4cHIiOiJhdmcoc3VtKGt1YmVfcG9kX2NvbnRhaW5lcl9yZXNvdXJjZV9yZXF1ZXN0c19jcHVfY29yZXN7bmFtZXNwYWNlIT1cImt1YmUtc3lzdGVtXCJ9KSBieSAocG9kLCBuYW1lc3BhY2UsIGluc3RhbmNlKSkgYnkgKHBvZCwgbmFtZXNwYWNlKSIsInJlY29yZCI6Imt1YmVjb3N0X3NhdmluZ3NfcG9kX3JlcXVlc3RzX2NwdV9jb3JlcyJ9LHsiZXhwciI6ImF2ZyhzdW0oa3ViZV9wb2RfY29udGFpbmVyX3Jlc291cmNlX3JlcXVlc3RzX21lbW9yeV9ieXRlc3tuYW1lc3BhY2UhPVwia3ViZS1zeXN0ZW1cIn0pIGJ5IChwb2QsIG5hbWVzcGFjZSwgaW5zdGFuY2UpKSBieSAocG9kLCBuYW1lc3BhY2UpIiwicmVjb3JkIjoia3ViZWNvc3Rfc2F2aW5nc19wb2RfcmVxdWVzdHNfbWVtb3J5X2J5dGVzIn1dfV19fSwic2VydmljZUFjY291bnRzIjp7ImFsZXJ0bWFuYWdlciI6eyJjcmVhdGUiOnRydWV9LCJub2RlRXhwb3J0ZXIiOnsiY3JlYXRlIjp0cnVlfSwicHVzaGdhdGV3YXkiOnsiY3JlYXRlIjp0cnVlfSwic2VydmVyIjp7ImNyZWF0ZSI6dHJ1ZX19fSwicmVtb3RlV3JpdGUiOnt9LCJyZXBvcnRpbmciOnsiZXJyb3JSZXBvcnRpbmciOnRydWUsImxvZ0NvbGxlY3Rpb24iOnRydWUsInByb2R1Y3RBbmFseXRpY3MiOnRydWUsInZhbHVlc1JlcG9ydGluZyI6dHJ1ZX0sInNlcnZpY2UiOnsiYW5ub3RhdGlvbnMiOnt9LCJsYWJlbHMiOnt9LCJwb3J0Ijo5MDkwLCJ0YXJnZXRQb3J0Ijo5MDkwLCJ0eXBlIjoiQ2x1c3RlcklQIn0sInNlcnZpY2VBY2NvdW50Ijp7ImFubm90YXRpb25zIjp7fSwiY3JlYXRlIjp0cnVlfSwic3VwcG9ydE5GUyI6dHJ1ZSwidG9sZXJhdGlvbnMiOltdfQ==
            - name: KUBECOST_NAMESPACE
              value: kubecost
            - name: GOOGLE_APPLICATION_CREDENTIALS
              value: /var/configs/key.json
            - name: KUBECOST_TOKEN
              valueFrom:
                configMapKeyRef:
                  name: kubecost-cost-analyzer
                  key: kubecost-token
---
# Source: cost-analyzer/templates/cost-analyzer-checks-template.yaml
apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: cost-analyzer-checks
  labels:
    
    app.kubernetes.io/name: cost-analyzer
    helm.sh/chart: cost-analyzer-1.67.1
    app.kubernetes.io/instance: kubecost
    app.kubernetes.io/managed-by: Helm
    app: cost-analyzer
spec:
  schedule: "*/10 * * * *"
  jobTemplate:
    metadata:
      labels:
        
        app.kubernetes.io/name: cost-analyzer
        helm.sh/chart: cost-analyzer-1.67.1
        app.kubernetes.io/instance: kubecost
        app.kubernetes.io/managed-by: Helm
        app: cost-analyzer
    spec:
      template:
        spec:
          containers:
          - name: cost-analyzer-checks
            image: quay.io/kubecost1/checks:prod-1.67.1
            imagePullPolicy: Always
            args:
            - node
            - ./node/cron.js
            resources:
              limits:
                cpu: 100m
                memory: 200Mi
              requests:
                cpu: 20m
                memory: 100Mi
            env:
            - name: COST_ANALYZER_SERVER_ENDPOINT
              value: kubecost-cost-analyzer.kubecost:9001
            - name: COST_ANALYZER_MODEL_ENDPOINT
              value: kubecost-cost-analyzer.kubecost:9003
              
            - name: PROMETHEUS_ALERTMANAGER_ENDPOINT
              valueFrom:
                configMapKeyRef:
                  name: kubecost-cost-analyzer
                  key: prometheus-alertmanager-endpoint
          restartPolicy: OnFailure
